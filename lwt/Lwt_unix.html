<div class="ocaml_top"><div class="ocaml_summary"><div class="info">Cooperative system calls</div></div>
<div class="ocaml_content"><div class="info">This modules maps system calls, like those of the standard
library's <code class="code">Unix</code> module, to cooperative ones, which will not block
the program.<p>The semantics of all operations is the following: if the action
(for example reading from a <b>file descriptor</b>) can be performed
immediately, it is done and returns immediately, otherwise it
returns a sleeping thread which is woken up when the operation
completes.</p><p>Most operations on sockets and pipes (on Windows it is only
sockets) are <b>cancelable</b>, meaning you can cancel them
with Lwt.cancel. For example if you want to read something from
a <b>file descriptor</b> with a timeout, you can cancel the action
after the timeout and the reading will not be performed if not
already done.</p><p>For example, consider that you have two sockets <code class="code">sock1</code> and
<code class="code">sock2</code>. You want to read something from <code class="code">sock1</code> or exclusively
from <code class="code">sock2</code> and fail with an exception if a timeout of 1 second
expires, without reading anything from <code class="code">sock1</code> and <code class="code">sock2</code>, even
if they become readable in the future.</p><p>Then you can do:</p><pre class="code"><code>    Lwt.pick [Lwt_unix.timeout 1.0; read sock1 buf1 ofs1 len1; read sock2 buf2 ofs2 len2]</code></pre><p>In this case, it is guaranteed that exactly one of the three
operations will complete, and the others will be cancelled.</p></div>
<pre class="odoccode"><span class="VALhandle_unix_error"><span class="keyword">val</span> handle_unix_error</span> : <code class="type">('a -&gt; 'b <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a>) -&gt; 'a -&gt; 'b <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Same as <code class="code">Unix.handle_unix_error</code> but catches lwt-level
exceptions</div>
<div class="info"><h2 id="2_TITLE">Configuration</h2></div>
<pre class="odoccode"><code><span class="TYPEasync_method"><span class="keyword">type</span> async_method</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTasync_method.Async_none"><span class="constructor">Async_none</span></span></code></td><td class="typefieldcomment" align="left"><div class="info">System calls are made synchronously, and may block the
entire program.</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTasync_method.Async_detach"><span class="constructor">Async_detach</span></span></code></td><td class="typefieldcomment" align="left"><div class="info">System calls are made in another system thread, thus without
blocking other Lwt threads. The drawback is that it may
degrade performances in some cases.<p>This is the default.</p></div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTasync_method.Async_switch"><span class="constructor">Async_switch</span></span></code></td><td class="typefieldcomment" align="left"><div class="info">System calls are made in the main thread, and if one blocks
the execution continue in another system thread. This method
is the most efficient, also you will get better performance
if you force all threads to run on the same cpu. On linux
this can be done by using the command <code class="code">taskset</code>.<p>Note that this method is still experimental.</p></div></td></tr></table><div class="info">For system calls that cannot be made asynchronously, Lwt uses one
of the following method:</div>
<pre class="odoccode"><span class="VALdefault_async_method"><span class="keyword">val</span> default_async_method</span> : <code class="type">unit -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.async_method" class="ocaml_internal">async_method</a></code></pre><div class="info">Returns the default async method.<p>This can be initialized using the environment variable
<code class="code">&quot;LWT_ASYNC_METHOD&quot;</code> with possible values <code class="code">&quot;none&quot;</code>,
<code class="code">&quot;detach&quot;</code> and <code class="code">&quot;switch&quot;</code>.</p></div>
<pre class="odoccode"><span class="VALset_default_async_method"><span class="keyword">val</span> set_default_async_method</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.async_method" class="ocaml_internal">async_method</a> -&gt; unit</code></pre><div class="info">Sets the default async method.</div>
<pre class="odoccode"><span class="VALasync_method"><span class="keyword">val</span> async_method</span> : <code class="type">unit -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.async_method" class="ocaml_internal">async_method</a></code></pre><div class="info"><code class="code">async_method ()</code> returns the async method used in the current
thread.</div>
<pre class="odoccode"><span class="VALasync_method_key"><span class="keyword">val</span> async_method_key</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.async_method" class="ocaml_internal">async_method</a> <a href="http://mirage.github.io/lwt/#Lwt.key">Lwt.key</a></code></pre><div class="info">The key for storing the local async method.</div>
<pre class="odoccode"><span class="VALwith_async_none"><span class="keyword">val</span> with_async_none</span> : <code class="type">(unit -&gt; 'a) -&gt; 'a</code></pre><div class="info"><code class="code">with_async_none f</code> is a shorthand for:<pre class="code"><code>        Lwt.with_value async_method_key (Some Async_none) f</code></pre></div>
<pre class="odoccode"><span class="VALwith_async_detach"><span class="keyword">val</span> with_async_detach</span> : <code class="type">(unit -&gt; 'a) -&gt; 'a</code></pre><div class="info"><code class="code">with_async_none f</code> is a shorthand for:<pre class="code"><code>        Lwt.with_value async_method_key (Some Async_detach) f</code></pre></div>
<pre class="odoccode"><span class="VALwith_async_switch"><span class="keyword">val</span> with_async_switch</span> : <code class="type">(unit -&gt; 'a) -&gt; 'a</code></pre><div class="info"><code class="code">with_async_none f</code> is a shorthand for:<pre class="code"><code>        Lwt.with_value async_method_key (Some Async_switch) f</code></pre></div>
<div class="info"><h2 id="2_TITLE">Sleeping</h2></div>
<pre class="odoccode"><span class="VALsleep"><span class="keyword">val</span> sleep</span> : <code class="type">float -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info"><code class="code">sleep d</code> is a thread that remains suspended for <code class="code">d</code> seconds
and then terminates.</div>
<pre class="odoccode"><span class="VALyield"><span class="keyword">val</span> yield</span> : <code class="type">unit -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info"><code class="code">yield ()</code> is a thread that suspends itself and then resumes
as soon as possible and terminates.</div>
<pre class="odoccode"><span class="VALauto_yield"><span class="keyword">val</span> auto_yield</span> : <code class="type">float -&gt; unit -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info"><code class="code">auto_yield timeout</code> returns a function <code class="code">f</code> that will yield
every <code class="code">timeout</code> seconds.</div>
<pre class="odoccode"><span class="EXCEPTIONTimeout"><span class="keyword">exception</span> Timeout</span></pre><div class="info">Exception raised by timeout operations</div>
<pre class="odoccode"><span class="VALtimeout"><span class="keyword">val</span> timeout</span> : <code class="type">float -&gt; 'a <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info"><code class="code">timeout d</code> is a thread that remains suspended for <code class="code">d</code> seconds
and then fails with Timeout.</div>
<pre class="odoccode"><span class="VALwith_timeout"><span class="keyword">val</span> with_timeout</span> : <code class="type">float -&gt; (unit -&gt; 'a <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a>) -&gt; 'a <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info"><code class="code">with_timeout d f</code> is a short-hand for:<pre class="code"><code>        Lwt.pick [Lwt_unix.timeout d; f ()]</code></pre></div>
<div class="info"><h2 id="2_TITLE">Operation on file-descriptors</h2></div>
<pre class="odoccode"><span class="TYPEfile_descr"><span class="keyword">type</span> file_descr</span></pre><div class="info">The abstract type for <b>file descriptor</b>s. A Lwt <b>file
descriptor</b> is a pair of a unix <b>file descriptor</b> (of type
<code class="code">Unix.file_descr</code>) and a <b>state</b>.<p>A <b>file descriptor</b> may be:</p><ul><li><b>opened</b>, in which case it is fully usable</li><li><b>closed</b> or <b>aborted</b>, in which case it is no longer
usable</li></ul></div>
<pre class="odoccode"><code><span class="TYPEstate"><span class="keyword">type</span> state</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTstate.Opened"><span class="constructor">Opened</span></span></code></td><td class="typefieldcomment" align="left"><div class="info">The <b>file descriptor</b> is opened</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTstate.Closed"><span class="constructor">Closed</span></span></code></td><td class="typefieldcomment" align="left"><div class="info">The <b>file descriptor</b> has been closed by close. It must
not be used for any operation.</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTstate.Aborted"><span class="constructor">Aborted</span></span> <span class="keyword">of</span> <code class="type">exn</code></code></td><td class="typefieldcomment" align="left"><div class="info">The <b>file descriptor</b> has been aborted, the only operation
possible is close, all others will fail.</div></td></tr></table><div class="info">State of a <b>file descriptor</b></div>
<pre class="odoccode"><span class="VALstate"><span class="keyword">val</span> state</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.state" class="ocaml_internal">state</a></code></pre><div class="info"><code class="code">state fd</code> returns the state of <code class="code">fd</code></div>
<pre class="odoccode"><span class="VALunix_file_descr"><span class="keyword">val</span> unix_file_descr</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; Unix.file_descr</code></pre><div class="info">Returns the underlying unix <b>file descriptor</b>. It always
succeeds, even if the <b>file descriptor</b>'s state is not
Open.</div>
<pre class="odoccode"><span class="VALof_unix_file_descr"><span class="keyword">val</span> of_unix_file_descr</span> : <code class="type">?blocking:bool -&gt; ?set_flags:bool -&gt; Unix.file_descr -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a></code></pre><div class="info">Creates a lwt <b>file descriptor</b> from a unix one.<p><code class="code">blocking</code> is the blocking mode of the file-descriptor, and
describes how Lwt will use it. In non-blocking mode, read/write
on this file descriptor are made using non-blocking IO; in
blocking mode they are made using the current async method. If
<code class="code">blocking</code> is not specified it is guessed according to the file
kind: socket and pipes are in non-blocking mode and others are
in blocking mode.</p><p>If <code class="code">set_flags</code> is <code class="code">true</code> (the default) then the file flags are
modified according to the <code class="code">blocking</code> argument, otherwise they
are left unchanged.</p><p>Note that the blocking mode is less efficient than the
non-blocking one, so it should be used only for file descriptors
that does not support asynchronous operations, such as regular
files, or for shared descriptors such as stdout, stderr or
stdin.</p></div>
<pre class="odoccode"><span class="VALblocking"><span class="keyword">val</span> blocking</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; bool <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info"><code class="code">blocking fd</code> returns whether <code class="code">fd</code> is used in blocking or
non-blocking mode.</div>
<pre class="odoccode"><span class="VALset_blocking"><span class="keyword">val</span> set_blocking</span> : <code class="type">?set_flags:bool -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; bool -&gt; unit</code></pre><div class="info"><code class="code">set_blocking fd b</code> puts <code class="code">fd</code> in blocking or non-blocking
mode. If <code class="code">set_flags</code> is <code class="code">true</code> (the default) then the file flags
are modified, otherwise the modification is only done at the
application level.</div>
<pre class="odoccode"><span class="VALabort"><span class="keyword">val</span> abort</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; exn -&gt; unit</code></pre><div class="info"><code class="code">abort fd exn</code> makes all current and further uses of the file
descriptor fail with the given exception. This put the <b>file
descriptor</b> into the Aborted state.<p>If the <b>file descriptor</b> is closed, this does nothing, if it is
aborted, this replace the abort exception by <code class="code">exn</code>.</p><p>Note that this only works for reading and writing operations on
file descriptors supporting non-blocking mode.</p></div>
<div class="info"><h2 id="2_TITLE">Process handling</h2></div>
<pre class="odoccode"><span class="VALfork"><span class="keyword">val</span> fork</span> : <code class="type">unit -&gt; int</code></pre><div class="info"><code class="code">fork ()</code> does the same as <code class="code">Unix.fork</code>. You must use this
function instead of <code class="code">Unix.fork</code> when you want to use Lwt in the
child process.<p>Notes:</p><ul><li>in the child process all pending jobs are canceled,</li><li>if you are going to use Lwt in the parent and the child, it is
a good idea to call Lwt_io.flush_all before callling
fork to avoid double-flush.</li></ul></div>
<pre class="odoccode"><span class="TYPEprocess_status"><span class="keyword">type</span> process_status</span> = <code class="type">Unix.process_status</code> = </pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTprocess_status.WEXITED"><span class="constructor">WEXITED</span></span> <span class="keyword">of</span> <code class="type">int</code></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTprocess_status.WSIGNALED"><span class="constructor">WSIGNALED</span></span> <span class="keyword">of</span> <code class="type">int</code></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTprocess_status.WSTOPPED"><span class="constructor">WSTOPPED</span></span> <span class="keyword">of</span> <code class="type">int</code></code></td></tr></table>
<pre class="odoccode"><span class="TYPEwait_flag"><span class="keyword">type</span> wait_flag</span> = <code class="type">Unix.wait_flag</code> = </pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTwait_flag.WNOHANG"><span class="constructor">WNOHANG</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTwait_flag.WUNTRACED"><span class="constructor">WUNTRACED</span></span></code></td></tr></table>
<pre class="odoccode"><span class="VALwait"><span class="keyword">val</span> wait</span> : <code class="type">unit -&gt; (int * <a href="http://mirage.github.io/lwt/#Lwt_unix.process_status" class="ocaml_internal">process_status</a>) <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.wait</code></div>
<pre class="odoccode"><span class="VALwaitpid"><span class="keyword">val</span> waitpid</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.wait_flag" class="ocaml_internal">wait_flag</a> list -&gt; int -&gt; (int * <a href="http://mirage.github.io/lwt/#Lwt_unix.process_status" class="ocaml_internal">process_status</a>) <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.waitpid</code></div>
<pre class="odoccode"><code><span class="TYPEresource_usage"><span class="keyword">type</span> resource_usage</span> = {</code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTresource_usage.ru_utime">ru_utime</span> : <code class="type">float</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">User time used</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTresource_usage.ru_stime">ru_stime</span> : <code class="type">float</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">System time used</div></td></tr><tr><td>}</td></tr></table><div class="info">Resource usages</div>
<pre class="odoccode"><span class="VALwait4"><span class="keyword">val</span> wait4</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.wait_flag" class="ocaml_internal">wait_flag</a> list -&gt; int -&gt; (int * <a href="http://mirage.github.io/lwt/#Lwt_unix.process_status" class="ocaml_internal">process_status</a> * <a href="http://mirage.github.io/lwt/#Lwt_unix.resource_usage" class="ocaml_internal">resource_usage</a>) <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info"><code class="code">wait4 flags pid</code> returns <code class="code">(pid, status, rusage)</code> where <code class="code">(pid,
      status)</code> is the same result as <code class="code">Unix.waitpid flags pid</code>, and
<code class="code">rusage</code> contains accounting information about the child.<p>On windows it will always returns <code class="code">{ utime = 0.0; stime = 0.0 }</code>.</p></div>
<pre class="odoccode"><span class="VALwait_count"><span class="keyword">val</span> wait_count</span> : <code class="type">unit -&gt; int</code></pre><div class="info">Returns the number of threads waiting for a child to
terminate.</div>
<pre class="odoccode"><span class="VALsystem"><span class="keyword">val</span> system</span> : <code class="type">string -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.process_status" class="ocaml_internal">process_status</a> <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Executes the given command, waits until it terminates, and
return its termination status. The string is interpreted by the
shell <code class="code">/bin/sh</code> on Unix and <code class="code">cmd.exe</code> on Windows. The result
<code class="code">WEXITED 127</code> indicates that the shell couldn't be executed.</div>
<div class="info"><h2 id="2_TITLE">Basic file input/output</h2></div>
<pre class="odoccode"><span class="VALstdin"><span class="keyword">val</span> stdin</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a></code></pre><div class="info">The standard <b>file descriptor</b> for input. This one is usually
a terminal is the program is started from a terminal.</div>
<pre class="odoccode"><span class="VALstdout"><span class="keyword">val</span> stdout</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a></code></pre><div class="info">The standard <b>file descriptor</b> for output</div>
<pre class="odoccode"><span class="VALstderr"><span class="keyword">val</span> stderr</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a></code></pre><div class="info">The standard <b>file descriptor</b> for printing error messages</div>
<pre class="odoccode"><span class="TYPEfile_perm"><span class="keyword">type</span> file_perm</span> = <code class="type">Unix.file_perm</code></pre>
<pre class="odoccode"><span class="TYPEopen_flag"><span class="keyword">type</span> open_flag</span> = <code class="type">Unix.open_flag</code> = </pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTopen_flag.O_RDONLY"><span class="constructor">O_RDONLY</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTopen_flag.O_WRONLY"><span class="constructor">O_WRONLY</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTopen_flag.O_RDWR"><span class="constructor">O_RDWR</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTopen_flag.O_NONBLOCK"><span class="constructor">O_NONBLOCK</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTopen_flag.O_APPEND"><span class="constructor">O_APPEND</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTopen_flag.O_CREAT"><span class="constructor">O_CREAT</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTopen_flag.O_TRUNC"><span class="constructor">O_TRUNC</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTopen_flag.O_EXCL"><span class="constructor">O_EXCL</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTopen_flag.O_NOCTTY"><span class="constructor">O_NOCTTY</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTopen_flag.O_DSYNC"><span class="constructor">O_DSYNC</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTopen_flag.O_SYNC"><span class="constructor">O_SYNC</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTopen_flag.O_RSYNC"><span class="constructor">O_RSYNC</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTopen_flag.O_SHARE_DELETE"><span class="constructor">O_SHARE_DELETE</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTopen_flag.O_CLOEXEC"><span class="constructor">O_CLOEXEC</span></span></code></td></tr></table>
<pre class="odoccode"><span class="VALopenfile"><span class="keyword">val</span> openfile</span> : <code class="type">string -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.open_flag" class="ocaml_internal">open_flag</a> list -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.file_perm" class="ocaml_internal">file_perm</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.openfile</code>.</div>
<pre class="odoccode"><span class="VALclose"><span class="keyword">val</span> close</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Close a <b>file descriptor</b>. This close the underlying unix <b>file descriptor</b> and set its state to Closed</div>
<pre class="odoccode"><span class="VALread"><span class="keyword">val</span> read</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; string -&gt; int -&gt; int -&gt; int <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info"><code class="code">read fd buf ofs len</code> has the same semantic as <code class="code">Unix.read</code>, but
is cooperative</div>
<pre class="odoccode"><span class="VALwrite"><span class="keyword">val</span> write</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; string -&gt; int -&gt; int -&gt; int <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info"><code class="code">read fd buf ofs len</code> has the same semantic as <code class="code">Unix.write</code>, but
is cooperative</div>
<pre class="odoccode"><span class="VALreadable"><span class="keyword">val</span> readable</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; bool</code></pre><div class="info">Returns whether the given file descriptor is currently
readable.</div>
<pre class="odoccode"><span class="VALwritable"><span class="keyword">val</span> writable</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; bool</code></pre><div class="info">Returns whether the given file descriptor is currently
writable.</div>
<pre class="odoccode"><span class="VALwait_read"><span class="keyword">val</span> wait_read</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">waits (without blocking other threads) until there is something
to read on the file descriptor</div>
<pre class="odoccode"><span class="VALwait_write"><span class="keyword">val</span> wait_write</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">waits (without blocking other threads) until it is possible to
write on the file descriptor</div>
<div class="info"><h2 id="2_TITLE">Seeking and truncating</h2></div>
<pre class="odoccode"><span class="TYPEseek_command"><span class="keyword">type</span> seek_command</span> = <code class="type">Unix.seek_command</code> = </pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTseek_command.SEEK_SET"><span class="constructor">SEEK_SET</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTseek_command.SEEK_CUR"><span class="constructor">SEEK_CUR</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTseek_command.SEEK_END"><span class="constructor">SEEK_END</span></span></code></td></tr></table>
<pre class="odoccode"><span class="VALlseek"><span class="keyword">val</span> lseek</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; int -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.seek_command" class="ocaml_internal">seek_command</a> -&gt; int <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.lseek</code></div>
<pre class="odoccode"><span class="VALtruncate"><span class="keyword">val</span> truncate</span> : <code class="type">string -&gt; int -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.truncate</code></div>
<pre class="odoccode"><span class="VALftruncate"><span class="keyword">val</span> ftruncate</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; int -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.ftruncate</code></div>
<div class="info"><h2 id="2_TITLE">Syncing</h2></div>
<pre class="odoccode"><span class="VALfsync"><span class="keyword">val</span> fsync</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Synchronise all data and metadata of the file descriptor with
the disk. On Windows it uses <code class="code">FlushFileBuffers</code>.</div>
<pre class="odoccode"><span class="VALfdatasync"><span class="keyword">val</span> fdatasync</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Synchronise all data (but not metadata) of the file descriptor
with the disk.<p>Note that <code class="code">fdatasync</code> is not available on all platforms.</p></div>
<div class="info"><h2 id="2_TITLE">File status</h2></div>
<pre class="odoccode"><span class="TYPEfile_kind"><span class="keyword">type</span> file_kind</span> = <code class="type">Unix.file_kind</code> = </pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTfile_kind.S_REG"><span class="constructor">S_REG</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTfile_kind.S_DIR"><span class="constructor">S_DIR</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTfile_kind.S_CHR"><span class="constructor">S_CHR</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTfile_kind.S_BLK"><span class="constructor">S_BLK</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTfile_kind.S_LNK"><span class="constructor">S_LNK</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTfile_kind.S_FIFO"><span class="constructor">S_FIFO</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTfile_kind.S_SOCK"><span class="constructor">S_SOCK</span></span></code></td></tr></table>
<pre class="odoccode"><span class="TYPEstats"><span class="keyword">type</span> stats</span> = <code class="type">Unix.stats</code> = {</pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstats.st_dev">st_dev</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstats.st_ino">st_ino</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstats.st_kind">st_kind</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_kind" class="ocaml_internal">file_kind</a></code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstats.st_perm">st_perm</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_perm" class="ocaml_internal">file_perm</a></code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstats.st_nlink">st_nlink</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstats.st_uid">st_uid</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstats.st_gid">st_gid</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstats.st_rdev">st_rdev</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstats.st_size">st_size</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstats.st_atime">st_atime</span> : <code class="type">float</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstats.st_mtime">st_mtime</span> : <code class="type">float</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstats.st_ctime">st_ctime</span> : <code class="type">float</code>;</code></td></tr><tr><td>}</td></tr></table>
<pre class="odoccode"><span class="VALstat"><span class="keyword">val</span> stat</span> : <code class="type">string -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.stats" class="ocaml_internal">stats</a> <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.stat</code></div>
<pre class="odoccode"><span class="VALlstat"><span class="keyword">val</span> lstat</span> : <code class="type">string -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.stats" class="ocaml_internal">stats</a> <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.lstat</code></div>
<pre class="odoccode"><span class="VALfstat"><span class="keyword">val</span> fstat</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.stats" class="ocaml_internal">stats</a> <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.fstat</code></div>
<pre class="odoccode"><span class="VALisatty"><span class="keyword">val</span> isatty</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; bool <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.isatty</code></div>
<div class="info"><h2 id="2_TITLE">File operations on large files</h2></div>
<div class="ocaml_module" name="LargeFile"><pre class="odoccode"><span class="keyword">module</span> <a href="http://mirage.github.io/lwt/#Lwt_unix.LargeFile" class="ocaml_internal">LargeFile</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><span class="VALlseek"><span class="keyword">val</span> lseek</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; int64 -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.seek_command" class="ocaml_internal">seek_command</a> -&gt; int64 <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.LargeFile.lseek</code></div>
<pre class="odoccode"><span class="VALtruncate"><span class="keyword">val</span> truncate</span> : <code class="type">string -&gt; int64 -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.LargeFile.truncate</code></div>
<pre class="odoccode"><span class="VALftruncate"><span class="keyword">val</span> ftruncate</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; int64 -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.LargeFile.ftruncate</code></div>
<pre class="odoccode"><span class="TYPEstats"><span class="keyword">type</span> stats</span> = <code class="type">Unix.LargeFile.stats</code> = {</pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstats.st_dev">st_dev</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstats.st_ino">st_ino</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstats.st_kind">st_kind</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_kind" class="ocaml_internal">file_kind</a></code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstats.st_perm">st_perm</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_perm" class="ocaml_internal">file_perm</a></code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstats.st_nlink">st_nlink</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstats.st_uid">st_uid</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstats.st_gid">st_gid</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstats.st_rdev">st_rdev</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstats.st_size">st_size</span> : <code class="type">int64</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstats.st_atime">st_atime</span> : <code class="type">float</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstats.st_mtime">st_mtime</span> : <code class="type">float</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstats.st_ctime">st_ctime</span> : <code class="type">float</code>;</code></td></tr><tr><td>}</td></tr></table>
<pre class="odoccode"><span class="VALstat"><span class="keyword">val</span> stat</span> : <code class="type">string -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.LargeFile.stats" class="ocaml_internal">stats</a> <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.LargeFile.stat</code></div>
<pre class="odoccode"><span class="VALlstat"><span class="keyword">val</span> lstat</span> : <code class="type">string -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.LargeFile.stats" class="ocaml_internal">stats</a> <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.LargeFile.lstat</code></div>
<pre class="odoccode"><span class="VALfstat"><span class="keyword">val</span> fstat</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.LargeFile.stats" class="ocaml_internal">stats</a> <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.LargeFile.fstat</code></div></div></div>
<div class="info"><h2 id="2_TITLE">Operations on file names</h2></div>
<pre class="odoccode"><span class="VALunlink"><span class="keyword">val</span> unlink</span> : <code class="type">string -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.unlink</code></div>
<pre class="odoccode"><span class="VALrename"><span class="keyword">val</span> rename</span> : <code class="type">string -&gt; string -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.rename</code></div>
<pre class="odoccode"><span class="VALlink"><span class="keyword">val</span> link</span> : <code class="type">string -&gt; string -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.link</code></div>
<div class="info"><h2 id="2_TITLE">File permissions and ownership</h2></div>
<pre class="odoccode"><span class="VALchmod"><span class="keyword">val</span> chmod</span> : <code class="type">string -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.file_perm" class="ocaml_internal">file_perm</a> -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.chmod</code></div>
<pre class="odoccode"><span class="VALfchmod"><span class="keyword">val</span> fchmod</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.file_perm" class="ocaml_internal">file_perm</a> -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.fchmod</code></div>
<pre class="odoccode"><span class="VALchown"><span class="keyword">val</span> chown</span> : <code class="type">string -&gt; int -&gt; int -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.chown</code></div>
<pre class="odoccode"><span class="VALfchown"><span class="keyword">val</span> fchown</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; int -&gt; int -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.fchown</code></div>
<pre class="odoccode"><span class="TYPEaccess_permission"><span class="keyword">type</span> access_permission</span> = <code class="type">Unix.access_permission</code> = </pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTaccess_permission.R_OK"><span class="constructor">R_OK</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTaccess_permission.W_OK"><span class="constructor">W_OK</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTaccess_permission.X_OK"><span class="constructor">X_OK</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTaccess_permission.F_OK"><span class="constructor">F_OK</span></span></code></td></tr></table>
<pre class="odoccode"><span class="VALaccess"><span class="keyword">val</span> access</span> : <code class="type">string -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.access_permission" class="ocaml_internal">access_permission</a> list -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.access</code></div>
<div class="info"><h2 id="2_TITLE">Operations on file descriptors</h2></div>
<pre class="odoccode"><span class="VALdup"><span class="keyword">val</span> dup</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a></code></pre><div class="info">Wrapper for <code class="code">Unix.dup</code></div>
<pre class="odoccode"><span class="VALdup2"><span class="keyword">val</span> dup2</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; unit</code></pre><div class="info">Wrapper for <code class="code">Unix.dup2</code></div>
<pre class="odoccode"><span class="VALset_close_on_exec"><span class="keyword">val</span> set_close_on_exec</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; unit</code></pre><div class="info">Wrapper for <code class="code">Unix.set_close_on_exec</code></div>
<pre class="odoccode"><span class="VALclear_close_on_exec"><span class="keyword">val</span> clear_close_on_exec</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; unit</code></pre><div class="info">Wrapper for <code class="code">Unix.clear_close_on_exec</code></div>
<div class="info"><h2 id="2_TITLE">Directories</h2></div>
<pre class="odoccode"><span class="VALmkdir"><span class="keyword">val</span> mkdir</span> : <code class="type">string -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.file_perm" class="ocaml_internal">file_perm</a> -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.mkdir</code></div>
<pre class="odoccode"><span class="VALrmdir"><span class="keyword">val</span> rmdir</span> : <code class="type">string -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.rmdir</code></div>
<pre class="odoccode"><span class="VALchdir"><span class="keyword">val</span> chdir</span> : <code class="type">string -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.chdir</code></div>
<pre class="odoccode"><span class="VALchroot"><span class="keyword">val</span> chroot</span> : <code class="type">string -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.chroot</code></div>
<pre class="odoccode"><span class="TYPEdir_handle"><span class="keyword">type</span> dir_handle</span> = <code class="type">Unix.dir_handle</code></pre>
<pre class="odoccode"><span class="VALopendir"><span class="keyword">val</span> opendir</span> : <code class="type">string -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.dir_handle" class="ocaml_internal">dir_handle</a> <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.opendir</code></div>
<pre class="odoccode"><span class="VALreaddir"><span class="keyword">val</span> readdir</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.dir_handle" class="ocaml_internal">dir_handle</a> -&gt; string <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.readdir</code>.</div>
<pre class="odoccode"><span class="VALreaddir_n"><span class="keyword">val</span> readdir_n</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.dir_handle" class="ocaml_internal">dir_handle</a> -&gt; int -&gt; string array <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info"><code class="code">readdir_n handle count</code> reads at most <code class="code">count</code> entry from the
given directory. It is more efficient than calling <code class="code">readdir</code>
<code class="code">count</code> times. If the length of the returned array is smaller
than <code class="code">count</code>, this means that the end of the directory has been
reached.</div>
<pre class="odoccode"><span class="VALrewinddir"><span class="keyword">val</span> rewinddir</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.dir_handle" class="ocaml_internal">dir_handle</a> -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.rewinddir</code></div>
<pre class="odoccode"><span class="VALclosedir"><span class="keyword">val</span> closedir</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.dir_handle" class="ocaml_internal">dir_handle</a> -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.closedir</code></div>
<pre class="odoccode"><span class="VALfiles_of_directory"><span class="keyword">val</span> files_of_directory</span> : <code class="type">string -&gt; string <a href="http://mirage.github.io/lwt/#Lwt_stream.t">Lwt_stream.t</a></code></pre><div class="info"><code class="code">files_of_directory dir</code> returns the stream of all files of
<code class="code">dir</code>.</div>
<div class="info"><h2 id="2_TITLE">Pipes and redirections</h2></div>
<pre class="odoccode"><span class="VALpipe"><span class="keyword">val</span> pipe</span> : <code class="type">unit -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> * <a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a></code></pre><div class="info"><code class="code">pipe ()</code> creates pipe using <code class="code">Unix.pipe</code> and returns two lwt <b>file descriptor</b>s created from unix <b>file_descriptor</b></div>
<pre class="odoccode"><span class="VALpipe_in"><span class="keyword">val</span> pipe_in</span> : <code class="type">unit -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> * Unix.file_descr</code></pre><div class="info"><code class="code">pipe_in ()</code> is the same as pipe but maps only the unix <b>file descriptor</b> for reading into a lwt one. The second is not
put into non-blocking mode. You usually want to use this before
forking to receive data from the child process.</div>
<pre class="odoccode"><span class="VALpipe_out"><span class="keyword">val</span> pipe_out</span> : <code class="type">unit -&gt; Unix.file_descr * <a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a></code></pre><div class="info"><code class="code">pipe_out ()</code> is the inverse of pipe_in. You usually want to
use this before forking to send data to the child process</div>
<pre class="odoccode"><span class="VALmkfifo"><span class="keyword">val</span> mkfifo</span> : <code class="type">string -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.file_perm" class="ocaml_internal">file_perm</a> -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.mkfifo</code></div>
<div class="info"><h2 id="2_TITLE">Symbolic links</h2></div>
<pre class="odoccode"><span class="VALsymlink"><span class="keyword">val</span> symlink</span> : <code class="type">string -&gt; string -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.symlink</code></div>
<pre class="odoccode"><span class="VALreadlink"><span class="keyword">val</span> readlink</span> : <code class="type">string -&gt; string <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.readlink</code></div>
<div class="info"><h2 id="2_TITLE">Locking</h2></div>
<pre class="odoccode"><span class="TYPElock_command"><span class="keyword">type</span> lock_command</span> = <code class="type">Unix.lock_command</code> = </pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTlock_command.F_ULOCK"><span class="constructor">F_ULOCK</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTlock_command.F_LOCK"><span class="constructor">F_LOCK</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTlock_command.F_TLOCK"><span class="constructor">F_TLOCK</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTlock_command.F_TEST"><span class="constructor">F_TEST</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTlock_command.F_RLOCK"><span class="constructor">F_RLOCK</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTlock_command.F_TRLOCK"><span class="constructor">F_TRLOCK</span></span></code></td></tr></table>
<pre class="odoccode"><span class="VALlockf"><span class="keyword">val</span> lockf</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.lock_command" class="ocaml_internal">lock_command</a> -&gt; int -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.lockf</code></div>
<div class="info"><h2 id="2_TITLE">User id, group id</h2></div>
<pre class="odoccode"><span class="TYPEpasswd_entry"><span class="keyword">type</span> passwd_entry</span> = <code class="type">Unix.passwd_entry</code> = {</pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTpasswd_entry.pw_name">pw_name</span> : <code class="type">string</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTpasswd_entry.pw_passwd">pw_passwd</span> : <code class="type">string</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTpasswd_entry.pw_uid">pw_uid</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTpasswd_entry.pw_gid">pw_gid</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTpasswd_entry.pw_gecos">pw_gecos</span> : <code class="type">string</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTpasswd_entry.pw_dir">pw_dir</span> : <code class="type">string</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTpasswd_entry.pw_shell">pw_shell</span> : <code class="type">string</code>;</code></td></tr><tr><td>}</td></tr></table>
<pre class="odoccode"><span class="TYPEgroup_entry"><span class="keyword">type</span> group_entry</span> = <code class="type">Unix.group_entry</code> = {</pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTgroup_entry.gr_name">gr_name</span> : <code class="type">string</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTgroup_entry.gr_passwd">gr_passwd</span> : <code class="type">string</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTgroup_entry.gr_gid">gr_gid</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTgroup_entry.gr_mem">gr_mem</span> : <code class="type">string array</code>;</code></td></tr><tr><td>}</td></tr></table>
<pre class="odoccode"><span class="VALgetlogin"><span class="keyword">val</span> getlogin</span> : <code class="type">unit -&gt; string <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.getlogin</code></div>
<pre class="odoccode"><span class="VALgetpwnam"><span class="keyword">val</span> getpwnam</span> : <code class="type">string -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.passwd_entry" class="ocaml_internal">passwd_entry</a> <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.getpwnam</code></div>
<pre class="odoccode"><span class="VALgetgrnam"><span class="keyword">val</span> getgrnam</span> : <code class="type">string -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.group_entry" class="ocaml_internal">group_entry</a> <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.getgrnam</code></div>
<pre class="odoccode"><span class="VALgetpwuid"><span class="keyword">val</span> getpwuid</span> : <code class="type">int -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.passwd_entry" class="ocaml_internal">passwd_entry</a> <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.getpwuid</code></div>
<pre class="odoccode"><span class="VALgetgrgid"><span class="keyword">val</span> getgrgid</span> : <code class="type">int -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.group_entry" class="ocaml_internal">group_entry</a> <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.getgrgid</code></div>
<div class="info"><h2 id="2_TITLE">Signals</h2></div>
<pre class="odoccode"><span class="TYPEsignal_handler_id"><span class="keyword">type</span> signal_handler_id</span></pre><div class="info">Id of a signal handler, used to cancel it</div>
<pre class="odoccode"><span class="VALon_signal"><span class="keyword">val</span> on_signal</span> : <code class="type">int -&gt; (int -&gt; unit) -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.signal_handler_id" class="ocaml_internal">signal_handler_id</a></code></pre><div class="info"><code class="code">on_signal signum f</code> calls <code class="code">f</code> each time the signal with numnber
<code class="code">signum</code> is received by the process. It returns a signal handler
identifier that can be used to stop monitoring <code class="code">signum</code>.</div>
<pre class="odoccode"><span class="VALon_signal_full"><span class="keyword">val</span> on_signal_full</span> : <code class="type">int -&gt; (<a href="http://mirage.github.io/lwt/#Lwt_unix.signal_handler_id" class="ocaml_internal">signal_handler_id</a> -&gt; int -&gt; unit) -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.signal_handler_id" class="ocaml_internal">signal_handler_id</a></code></pre><div class="info"><code class="code">on_signal_full f</code> is the same as <code class="code">on_signal f</code> except that <code class="code">f</code>
also receive the signal handler identifier as argument so it can
disable it.</div>
<pre class="odoccode"><span class="VALdisable_signal_handler"><span class="keyword">val</span> disable_signal_handler</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.signal_handler_id" class="ocaml_internal">signal_handler_id</a> -&gt; unit</code></pre><div class="info">Stops receiving this signal</div>
<pre class="odoccode"><span class="VALsignal_count"><span class="keyword">val</span> signal_count</span> : <code class="type">unit -&gt; int</code></pre><div class="info">Returns the number of registered signal handler.</div>
<pre class="odoccode"><span class="VALreinstall_signal_handler"><span class="keyword">val</span> reinstall_signal_handler</span> : <code class="type">int -&gt; unit</code></pre><div class="info"><code class="code">reinstall_signal_handler signum</code> if any signal handler is
registered for this signal with on_signal, it reinstall the
signal handler (with <code class="code">Sys.set_signal</code>). This is usefull in case
another part of the program install another signal handler.</div>
<div class="info"><h2 id="2_TITLE">Sockets</h2></div>
<pre class="odoccode"><span class="TYPEinet_addr"><span class="keyword">type</span> inet_addr</span> = <code class="type">Unix.inet_addr</code></pre>
<pre class="odoccode"><span class="TYPEsocket_domain"><span class="keyword">type</span> socket_domain</span> = <code class="type">Unix.socket_domain</code> = </pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsocket_domain.PF_UNIX"><span class="constructor">PF_UNIX</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsocket_domain.PF_INET"><span class="constructor">PF_INET</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsocket_domain.PF_INET6"><span class="constructor">PF_INET6</span></span></code></td></tr></table>
<pre class="odoccode"><span class="TYPEsocket_type"><span class="keyword">type</span> socket_type</span> = <code class="type">Unix.socket_type</code> = </pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsocket_type.SOCK_STREAM"><span class="constructor">SOCK_STREAM</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsocket_type.SOCK_DGRAM"><span class="constructor">SOCK_DGRAM</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsocket_type.SOCK_RAW"><span class="constructor">SOCK_RAW</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsocket_type.SOCK_SEQPACKET"><span class="constructor">SOCK_SEQPACKET</span></span></code></td></tr></table>
<pre class="odoccode"><span class="TYPEsockaddr"><span class="keyword">type</span> sockaddr</span> = <code class="type">Unix.sockaddr</code> = </pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsockaddr.ADDR_UNIX"><span class="constructor">ADDR_UNIX</span></span> <span class="keyword">of</span> <code class="type">string</code></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsockaddr.ADDR_INET"><span class="constructor">ADDR_INET</span></span> <span class="keyword">of</span> <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.inet_addr" class="ocaml_internal">inet_addr</a> * int</code></code></td></tr></table>
<pre class="odoccode"><span class="VALsocket"><span class="keyword">val</span> socket</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.socket_domain" class="ocaml_internal">socket_domain</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.socket_type" class="ocaml_internal">socket_type</a> -&gt; int -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a></code></pre><div class="info"><code class="code">socket domain type proto</code> is the same as <code class="code">Unix.socket</code> but maps
the result into a lwt <b>file descriptor</b></div>
<pre class="odoccode"><span class="VALsocketpair"><span class="keyword">val</span> socketpair</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.socket_domain" class="ocaml_internal">socket_domain</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.socket_type" class="ocaml_internal">socket_type</a> -&gt; int -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> * <a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a></code></pre><div class="info">Wrapper for <code class="code">Unix.socketpair</code></div>
<pre class="odoccode"><span class="VALbind"><span class="keyword">val</span> bind</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.sockaddr" class="ocaml_internal">sockaddr</a> -&gt; unit</code></pre><div class="info">Wrapper for <code class="code">Unix.bind</code></div>
<pre class="odoccode"><span class="VALlisten"><span class="keyword">val</span> listen</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; int -&gt; unit</code></pre><div class="info">Wrapper for <code class="code">Unix.listen</code></div>
<pre class="odoccode"><span class="VALaccept"><span class="keyword">val</span> accept</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; (<a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> * <a href="http://mirage.github.io/lwt/#Lwt_unix.sockaddr" class="ocaml_internal">sockaddr</a>) <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.accept</code></div>
<pre class="odoccode"><span class="VALaccept_n"><span class="keyword">val</span> accept_n</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; int -&gt; ((<a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> * <a href="http://mirage.github.io/lwt/#Lwt_unix.sockaddr" class="ocaml_internal">sockaddr</a>) list * exn option) <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info"><code class="code">accept_n fd count</code> accepts up to <code class="code">count</code> connections at one time.<ul><li>if no connection is available right now, it returns a sleeping
thread</li></ul><ul><li>if more than 1 and less than <code class="code">count</code> are available, it returns
all of them</li></ul><ul><li>if more than <code class="code">count</code> are available, it returns the next
<code class="code">count</code> of them</li></ul><ul><li>if an error happens, it returns the connections that have been
successfully accepted so far and the error</li></ul><code class="code">accept_n</code> has the advantage of improving performance. If you
want a more detailed description, you can have a look at:<p> <a href="http://portal.acm.org/citation.cfm?id=1247435">Acceptable strategies for improving web server performance</a></p></div>
<pre class="odoccode"><span class="VALconnect"><span class="keyword">val</span> connect</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.sockaddr" class="ocaml_internal">sockaddr</a> -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.connect</code></div>
<pre class="odoccode"><span class="TYPEshutdown_command"><span class="keyword">type</span> shutdown_command</span> = <code class="type">Unix.shutdown_command</code> = </pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTshutdown_command.SHUTDOWN_RECEIVE"><span class="constructor">SHUTDOWN_RECEIVE</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTshutdown_command.SHUTDOWN_SEND"><span class="constructor">SHUTDOWN_SEND</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTshutdown_command.SHUTDOWN_ALL"><span class="constructor">SHUTDOWN_ALL</span></span></code></td></tr></table>
<pre class="odoccode"><span class="VALshutdown"><span class="keyword">val</span> shutdown</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.shutdown_command" class="ocaml_internal">shutdown_command</a> -&gt; unit</code></pre><div class="info">Wrapper for <code class="code">Unix.shutdown</code></div>
<pre class="odoccode"><span class="VALgetsockname"><span class="keyword">val</span> getsockname</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.sockaddr" class="ocaml_internal">sockaddr</a></code></pre><div class="info">Wrapper for <code class="code">Unix.getsockname</code></div>
<pre class="odoccode"><span class="VALgetpeername"><span class="keyword">val</span> getpeername</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.sockaddr" class="ocaml_internal">sockaddr</a></code></pre><div class="info">Wrapper for <code class="code">Unix.getpeername</code></div>
<pre class="odoccode"><span class="TYPEmsg_flag"><span class="keyword">type</span> msg_flag</span> = <code class="type">Unix.msg_flag</code> = </pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTmsg_flag.MSG_OOB"><span class="constructor">MSG_OOB</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTmsg_flag.MSG_DONTROUTE"><span class="constructor">MSG_DONTROUTE</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTmsg_flag.MSG_PEEK"><span class="constructor">MSG_PEEK</span></span></code></td></tr></table>
<pre class="odoccode"><span class="VALrecv"><span class="keyword">val</span> recv</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; string -&gt; int -&gt; int -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.msg_flag" class="ocaml_internal">msg_flag</a> list -&gt; int <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.recv</code></div>
<pre class="odoccode"><span class="VALrecvfrom"><span class="keyword">val</span> recvfrom</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; string -&gt; int -&gt; int -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.msg_flag" class="ocaml_internal">msg_flag</a> list -&gt; (int * <a href="http://mirage.github.io/lwt/#Lwt_unix.sockaddr" class="ocaml_internal">sockaddr</a>) <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.recvfrom</code></div>
<pre class="odoccode"><span class="VALsend"><span class="keyword">val</span> send</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; string -&gt; int -&gt; int -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.msg_flag" class="ocaml_internal">msg_flag</a> list -&gt; int <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.send</code></div>
<pre class="odoccode"><span class="VALsendto"><span class="keyword">val</span> sendto</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; string -&gt; int -&gt; int -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.msg_flag" class="ocaml_internal">msg_flag</a> list -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.sockaddr" class="ocaml_internal">sockaddr</a> -&gt; int <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.sendto</code></div>
<pre class="odoccode"><code><span class="TYPEio_vector"><span class="keyword">type</span> io_vector</span> = {</code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTio_vector.iov_buffer">iov_buffer</span> : <code class="type">string</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTio_vector.iov_offset">iov_offset</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTio_vector.iov_length">iov_length</span> : <code class="type">int</code>;</code></td></tr><tr><td>}</td></tr></table><div class="info">An io-vector. Used by recv_msg and send_msg.</div>
<pre class="odoccode"><span class="VALio_vector"><span class="keyword">val</span> io_vector</span> : <code class="type">buffer:string -&gt; offset:int -&gt; length:int -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.io_vector" class="ocaml_internal">io_vector</a></code></pre><div class="info">Creates an io-vector</div>
<pre class="odoccode"><span class="VALrecv_msg"><span class="keyword">val</span> recv_msg</span> : <code class="type">socket:<a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt;
io_vectors:<a href="http://mirage.github.io/lwt/#Lwt_unix.io_vector" class="ocaml_internal">io_vector</a> list -&gt; (int * Unix.file_descr list) <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info"><code class="code">recv_msg ~socket ~io_vectors</code> receives data into a list of
io-vectors, plus any file-descriptors that may accompany the
messages. It returns a tuple whose first field is the number of
bytes received and second is a list of received file
descriptors. The messages themselves will be recorded in the
provided <code class="code">io_vectors</code> list.<p>This call is not available on windows.</p></div>
<pre class="odoccode"><span class="VALsend_msg"><span class="keyword">val</span> send_msg</span> : <code class="type">socket:<a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt;
io_vectors:<a href="http://mirage.github.io/lwt/#Lwt_unix.io_vector" class="ocaml_internal">io_vector</a> list -&gt; fds:Unix.file_descr list -&gt; int <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info"><code class="code">send_msg ~socket ~io_vectors ~fds</code> sends data from a list of
io-vectors, accompanied with a list of file-descriptors. It
returns the number of bytes sent. If fd-passing is not possible on
the current system and <code class="code">fds</code> is not empty, it raises
<code class="code">Lwt_sys.Not_available &quot;fd_passing&quot;</code>.<p>This call is not available on windows.</p></div>
<pre class="odoccode"><code><span class="TYPEcredentials"><span class="keyword">type</span> credentials</span> = {</code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTcredentials.cred_pid">cred_pid</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTcredentials.cred_uid">cred_uid</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTcredentials.cred_gid">cred_gid</span> : <code class="type">int</code>;</code></td></tr><tr><td>}</td></tr></table>
<pre class="odoccode"><span class="VALget_credentials"><span class="keyword">val</span> get_credentials</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.credentials" class="ocaml_internal">credentials</a></code></pre><div class="info"><code class="code">get_credentials fd</code> returns credential informations from the
given socket. On some platforms, obtaining the peer pid is not
possible and it will be set to <code class="code">-1</code>. If obtaining credentials
is not possible on the current system, it raises
<code class="code">Lwt_sys.Not_available &quot;get_credentials&quot;</code>.<p>This call is not available on windows.</p></div>
<div class="info"><h3 id="3_TITLE">Socket options</h3></div>
<pre class="odoccode"><span class="TYPEsocket_bool_option"><span class="keyword">type</span> socket_bool_option</span> = <code class="type">Unix.socket_bool_option</code> = </pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsocket_bool_option.SO_DEBUG"><span class="constructor">SO_DEBUG</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsocket_bool_option.SO_BROADCAST"><span class="constructor">SO_BROADCAST</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsocket_bool_option.SO_REUSEADDR"><span class="constructor">SO_REUSEADDR</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsocket_bool_option.SO_KEEPALIVE"><span class="constructor">SO_KEEPALIVE</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsocket_bool_option.SO_DONTROUTE"><span class="constructor">SO_DONTROUTE</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsocket_bool_option.SO_OOBINLINE"><span class="constructor">SO_OOBINLINE</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsocket_bool_option.SO_ACCEPTCONN"><span class="constructor">SO_ACCEPTCONN</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsocket_bool_option.TCP_NODELAY"><span class="constructor">TCP_NODELAY</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsocket_bool_option.IPV6_ONLY"><span class="constructor">IPV6_ONLY</span></span></code></td></tr></table>
<pre class="odoccode"><span class="TYPEsocket_int_option"><span class="keyword">type</span> socket_int_option</span> = <code class="type">Unix.socket_int_option</code> = </pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsocket_int_option.SO_SNDBUF"><span class="constructor">SO_SNDBUF</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsocket_int_option.SO_RCVBUF"><span class="constructor">SO_RCVBUF</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsocket_int_option.SO_ERROR"><span class="constructor">SO_ERROR</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsocket_int_option.SO_TYPE"><span class="constructor">SO_TYPE</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsocket_int_option.SO_RCVLOWAT"><span class="constructor">SO_RCVLOWAT</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsocket_int_option.SO_SNDLOWAT"><span class="constructor">SO_SNDLOWAT</span></span></code></td></tr></table>
<pre class="odoccode"><span class="TYPEsocket_optint_option"><span class="keyword">type</span> socket_optint_option</span> = <code class="type">Unix.socket_optint_option</code> = </pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsocket_optint_option.SO_LINGER"><span class="constructor">SO_LINGER</span></span></code></td></tr></table>
<pre class="odoccode"><span class="TYPEsocket_float_option"><span class="keyword">type</span> socket_float_option</span> = <code class="type">Unix.socket_float_option</code> = </pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsocket_float_option.SO_RCVTIMEO"><span class="constructor">SO_RCVTIMEO</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsocket_float_option.SO_SNDTIMEO"><span class="constructor">SO_SNDTIMEO</span></span></code></td></tr></table>
<pre class="odoccode"><span class="VALgetsockopt"><span class="keyword">val</span> getsockopt</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.socket_bool_option" class="ocaml_internal">socket_bool_option</a> -&gt; bool</code></pre><div class="info">Wrapper for <code class="code">Unix.getsockopt</code></div>
<pre class="odoccode"><span class="VALsetsockopt"><span class="keyword">val</span> setsockopt</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.socket_bool_option" class="ocaml_internal">socket_bool_option</a> -&gt; bool -&gt; unit</code></pre><div class="info">Wrapper for <code class="code">Unix.setsockopt</code></div>
<pre class="odoccode"><span class="VALgetsockopt_int"><span class="keyword">val</span> getsockopt_int</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.socket_int_option" class="ocaml_internal">socket_int_option</a> -&gt; int</code></pre><div class="info">Wrapper for <code class="code">Unix.getsockopt_int</code></div>
<pre class="odoccode"><span class="VALsetsockopt_int"><span class="keyword">val</span> setsockopt_int</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.socket_int_option" class="ocaml_internal">socket_int_option</a> -&gt; int -&gt; unit</code></pre><div class="info">Wrapper for <code class="code">Unix.setsockopt_int</code></div>
<pre class="odoccode"><span class="VALgetsockopt_optint"><span class="keyword">val</span> getsockopt_optint</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.socket_optint_option" class="ocaml_internal">socket_optint_option</a> -&gt; int option</code></pre><div class="info">Wrapper for <code class="code">Unix.getsockopt_optint</code></div>
<pre class="odoccode"><span class="VALsetsockopt_optint"><span class="keyword">val</span> setsockopt_optint</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.socket_optint_option" class="ocaml_internal">socket_optint_option</a> -&gt; int option -&gt; unit</code></pre><div class="info">Wrapper for <code class="code">Unix.setsockopt_optint</code></div>
<pre class="odoccode"><span class="VALgetsockopt_float"><span class="keyword">val</span> getsockopt_float</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.socket_float_option" class="ocaml_internal">socket_float_option</a> -&gt; float</code></pre><div class="info">Wrapper for <code class="code">Unix.getsockopt_float</code></div>
<pre class="odoccode"><span class="VALsetsockopt_float"><span class="keyword">val</span> setsockopt_float</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.socket_float_option" class="ocaml_internal">socket_float_option</a> -&gt; float -&gt; unit</code></pre><div class="info">Wrapper for <code class="code">Unix.setsockopt_float</code></div>
<pre class="odoccode"><span class="VALgetsockopt_error"><span class="keyword">val</span> getsockopt_error</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; Unix.error option</code></pre><div class="info">Wrapper for <code class="code">Unix.getsockopt_error</code></div>
<div class="info"><h2 id="2_TITLE">Host and protocol databases</h2></div>
<pre class="odoccode"><span class="TYPEhost_entry"><span class="keyword">type</span> host_entry</span> = <code class="type">Unix.host_entry</code> = {</pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELThost_entry.h_name">h_name</span> : <code class="type">string</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELThost_entry.h_aliases">h_aliases</span> : <code class="type">string array</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELThost_entry.h_addrtype">h_addrtype</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.socket_domain" class="ocaml_internal">socket_domain</a></code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELThost_entry.h_addr_list">h_addr_list</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.inet_addr" class="ocaml_internal">inet_addr</a> array</code>;</code></td></tr><tr><td>}</td></tr></table>
<pre class="odoccode"><span class="TYPEprotocol_entry"><span class="keyword">type</span> protocol_entry</span> = <code class="type">Unix.protocol_entry</code> = {</pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTprotocol_entry.p_name">p_name</span> : <code class="type">string</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTprotocol_entry.p_aliases">p_aliases</span> : <code class="type">string array</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTprotocol_entry.p_proto">p_proto</span> : <code class="type">int</code>;</code></td></tr><tr><td>}</td></tr></table>
<pre class="odoccode"><span class="TYPEservice_entry"><span class="keyword">type</span> service_entry</span> = <code class="type">Unix.service_entry</code> = {</pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTservice_entry.s_name">s_name</span> : <code class="type">string</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTservice_entry.s_aliases">s_aliases</span> : <code class="type">string array</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTservice_entry.s_port">s_port</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTservice_entry.s_proto">s_proto</span> : <code class="type">string</code>;</code></td></tr><tr><td>}</td></tr></table>
<pre class="odoccode"><span class="VALgethostname"><span class="keyword">val</span> gethostname</span> : <code class="type">unit -&gt; string <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.gethostname</code></div>
<pre class="odoccode"><span class="VALgethostbyname"><span class="keyword">val</span> gethostbyname</span> : <code class="type">string -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.host_entry" class="ocaml_internal">host_entry</a> <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.gethostbyname</code></div>
<pre class="odoccode"><span class="VALgethostbyaddr"><span class="keyword">val</span> gethostbyaddr</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.inet_addr" class="ocaml_internal">inet_addr</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.host_entry" class="ocaml_internal">host_entry</a> <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.gethostbyaddr</code></div>
<pre class="odoccode"><span class="VALgetprotobyname"><span class="keyword">val</span> getprotobyname</span> : <code class="type">string -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.protocol_entry" class="ocaml_internal">protocol_entry</a> <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.getprotobyname</code></div>
<pre class="odoccode"><span class="VALgetprotobynumber"><span class="keyword">val</span> getprotobynumber</span> : <code class="type">int -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.protocol_entry" class="ocaml_internal">protocol_entry</a> <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.getprotobynumber</code></div>
<pre class="odoccode"><span class="VALgetservbyname"><span class="keyword">val</span> getservbyname</span> : <code class="type">string -&gt; string -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.service_entry" class="ocaml_internal">service_entry</a> <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.getservbyname</code></div>
<pre class="odoccode"><span class="VALgetservbyport"><span class="keyword">val</span> getservbyport</span> : <code class="type">int -&gt; string -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.service_entry" class="ocaml_internal">service_entry</a> <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.getservbyport</code></div>
<pre class="odoccode"><span class="TYPEaddr_info"><span class="keyword">type</span> addr_info</span> = <code class="type">Unix.addr_info</code> = {</pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTaddr_info.ai_family">ai_family</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.socket_domain" class="ocaml_internal">socket_domain</a></code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTaddr_info.ai_socktype">ai_socktype</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.socket_type" class="ocaml_internal">socket_type</a></code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTaddr_info.ai_protocol">ai_protocol</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTaddr_info.ai_addr">ai_addr</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.sockaddr" class="ocaml_internal">sockaddr</a></code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTaddr_info.ai_canonname">ai_canonname</span> : <code class="type">string</code>;</code></td></tr><tr><td>}</td></tr></table>
<pre class="odoccode"><span class="TYPEgetaddrinfo_option"><span class="keyword">type</span> getaddrinfo_option</span> = <code class="type">Unix.getaddrinfo_option</code> = </pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTgetaddrinfo_option.AI_FAMILY"><span class="constructor">AI_FAMILY</span></span> <span class="keyword">of</span> <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.socket_domain" class="ocaml_internal">socket_domain</a></code></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTgetaddrinfo_option.AI_SOCKTYPE"><span class="constructor">AI_SOCKTYPE</span></span> <span class="keyword">of</span> <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.socket_type" class="ocaml_internal">socket_type</a></code></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTgetaddrinfo_option.AI_PROTOCOL"><span class="constructor">AI_PROTOCOL</span></span> <span class="keyword">of</span> <code class="type">int</code></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTgetaddrinfo_option.AI_NUMERICHOST"><span class="constructor">AI_NUMERICHOST</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTgetaddrinfo_option.AI_CANONNAME"><span class="constructor">AI_CANONNAME</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTgetaddrinfo_option.AI_PASSIVE"><span class="constructor">AI_PASSIVE</span></span></code></td></tr></table>
<pre class="odoccode"><span class="VALgetaddrinfo"><span class="keyword">val</span> getaddrinfo</span> : <code class="type">string -&gt; string -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.getaddrinfo_option" class="ocaml_internal">getaddrinfo_option</a> list -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.addr_info" class="ocaml_internal">addr_info</a> list <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.getaddrinfo</code></div>
<pre class="odoccode"><span class="TYPEname_info"><span class="keyword">type</span> name_info</span> = <code class="type">Unix.name_info</code> = {</pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTname_info.ni_hostname">ni_hostname</span> : <code class="type">string</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTname_info.ni_service">ni_service</span> : <code class="type">string</code>;</code></td></tr><tr><td>}</td></tr></table>
<pre class="odoccode"><span class="TYPEgetnameinfo_option"><span class="keyword">type</span> getnameinfo_option</span> = <code class="type">Unix.getnameinfo_option</code> = </pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTgetnameinfo_option.NI_NOFQDN"><span class="constructor">NI_NOFQDN</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTgetnameinfo_option.NI_NUMERICHOST"><span class="constructor">NI_NUMERICHOST</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTgetnameinfo_option.NI_NAMEREQD"><span class="constructor">NI_NAMEREQD</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTgetnameinfo_option.NI_NUMERICSERV"><span class="constructor">NI_NUMERICSERV</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTgetnameinfo_option.NI_DGRAM"><span class="constructor">NI_DGRAM</span></span></code></td></tr></table>
<pre class="odoccode"><span class="VALgetnameinfo"><span class="keyword">val</span> getnameinfo</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.sockaddr" class="ocaml_internal">sockaddr</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.getnameinfo_option" class="ocaml_internal">getnameinfo_option</a> list -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.name_info" class="ocaml_internal">name_info</a> <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.getnameinfo</code></div>
<div class="info"><h2 id="2_TITLE">Terminal interface</h2></div>
<pre class="odoccode"><span class="TYPEterminal_io"><span class="keyword">type</span> terminal_io</span> = <code class="type">Unix.terminal_io</code> = {</pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_ignbrk">c_ignbrk</span> : <code class="type">bool</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_brkint">c_brkint</span> : <code class="type">bool</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_ignpar">c_ignpar</span> : <code class="type">bool</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_parmrk">c_parmrk</span> : <code class="type">bool</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_inpck">c_inpck</span> : <code class="type">bool</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_istrip">c_istrip</span> : <code class="type">bool</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_inlcr">c_inlcr</span> : <code class="type">bool</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_igncr">c_igncr</span> : <code class="type">bool</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_icrnl">c_icrnl</span> : <code class="type">bool</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_ixon">c_ixon</span> : <code class="type">bool</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_ixoff">c_ixoff</span> : <code class="type">bool</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_opost">c_opost</span> : <code class="type">bool</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_obaud">c_obaud</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_ibaud">c_ibaud</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_csize">c_csize</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_cstopb">c_cstopb</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_cread">c_cread</span> : <code class="type">bool</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_parenb">c_parenb</span> : <code class="type">bool</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_parodd">c_parodd</span> : <code class="type">bool</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_hupcl">c_hupcl</span> : <code class="type">bool</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_clocal">c_clocal</span> : <code class="type">bool</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_isig">c_isig</span> : <code class="type">bool</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_icanon">c_icanon</span> : <code class="type">bool</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_noflsh">c_noflsh</span> : <code class="type">bool</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_echo">c_echo</span> : <code class="type">bool</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_echoe">c_echoe</span> : <code class="type">bool</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_echok">c_echok</span> : <code class="type">bool</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_echonl">c_echonl</span> : <code class="type">bool</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_vintr">c_vintr</span> : <code class="type">char</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_vquit">c_vquit</span> : <code class="type">char</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_verase">c_verase</span> : <code class="type">char</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_vkill">c_vkill</span> : <code class="type">char</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_veof">c_veof</span> : <code class="type">char</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_veol">c_veol</span> : <code class="type">char</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_vmin">c_vmin</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_vtime">c_vtime</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_vstart">c_vstart</span> : <code class="type">char</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTterminal_io.c_vstop">c_vstop</span> : <code class="type">char</code>;</code></td></tr><tr><td>}</td></tr></table>
<pre class="odoccode"><span class="VALtcgetattr"><span class="keyword">val</span> tcgetattr</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.terminal_io" class="ocaml_internal">terminal_io</a> <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.tcgetattr</code></div>
<pre class="odoccode"><span class="TYPEsetattr_when"><span class="keyword">type</span> setattr_when</span> = <code class="type">Unix.setattr_when</code> = </pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsetattr_when.TCSANOW"><span class="constructor">TCSANOW</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsetattr_when.TCSADRAIN"><span class="constructor">TCSADRAIN</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTsetattr_when.TCSAFLUSH"><span class="constructor">TCSAFLUSH</span></span></code></td></tr></table>
<pre class="odoccode"><span class="VALtcsetattr"><span class="keyword">val</span> tcsetattr</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.setattr_when" class="ocaml_internal">setattr_when</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.terminal_io" class="ocaml_internal">terminal_io</a> -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.tcsetattr</code></div>
<pre class="odoccode"><span class="VALtcsendbreak"><span class="keyword">val</span> tcsendbreak</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; int -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.tcsendbreak</code></div>
<pre class="odoccode"><span class="VALtcdrain"><span class="keyword">val</span> tcdrain</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.tcdrain</code></div>
<pre class="odoccode"><span class="TYPEflush_queue"><span class="keyword">type</span> flush_queue</span> = <code class="type">Unix.flush_queue</code> = </pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTflush_queue.TCIFLUSH"><span class="constructor">TCIFLUSH</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTflush_queue.TCOFLUSH"><span class="constructor">TCOFLUSH</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTflush_queue.TCIOFLUSH"><span class="constructor">TCIOFLUSH</span></span></code></td></tr></table>
<pre class="odoccode"><span class="VALtcflush"><span class="keyword">val</span> tcflush</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.flush_queue" class="ocaml_internal">flush_queue</a> -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.tcflush</code></div>
<pre class="odoccode"><span class="TYPEflow_action"><span class="keyword">type</span> flow_action</span> = <code class="type">Unix.flow_action</code> = </pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTflow_action.TCOOFF"><span class="constructor">TCOOFF</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTflow_action.TCOON"><span class="constructor">TCOON</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTflow_action.TCIOFF"><span class="constructor">TCIOFF</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTflow_action.TCION"><span class="constructor">TCION</span></span></code></td></tr></table>
<pre class="odoccode"><span class="VALtcflow"><span class="keyword">val</span> tcflow</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.flow_action" class="ocaml_internal">flow_action</a> -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wrapper for <code class="code">Unix.tcflow</code></div>
<div class="info"><h2 id="2_TITLE">Low-level interaction</h2></div>
<pre class="odoccode"><span class="EXCEPTIONRetry"><span class="keyword">exception</span> Retry</span></pre><div class="info">If an action raises Retry, it will be requeued until the <b>file descriptor</b> becomes readable/writable again.</div>
<pre class="odoccode"><span class="EXCEPTIONRetry_read"><span class="keyword">exception</span> Retry_read</span></pre><div class="info">If an action raises Retry_read, it will be requeued until the
<b>file descriptor</b> becomes readable.</div>
<pre class="odoccode"><span class="EXCEPTIONRetry_write"><span class="keyword">exception</span> Retry_write</span></pre><div class="info">If an action raises Retry_read, it will be requeued until the
<b>file descriptor</b> becomes writables.</div>
<pre class="odoccode"><code><span class="TYPEio_event"><span class="keyword">type</span> io_event</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTio_event.Read"><span class="constructor">Read</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTio_event.Write"><span class="constructor">Write</span></span></code></td></tr></table>
<pre class="odoccode"><span class="VALwrap_syscall"><span class="keyword">val</span> wrap_syscall</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.io_event" class="ocaml_internal">io_event</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; (unit -&gt; 'a) -&gt; 'a <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info"><code class="code">wrap_syscall set fd action</code> wrap an action on a <b>file
descriptor</b>. It tries to execture action, and if it can not be
performed immediately without blocking, it is registered for
latter.<p>In the latter case, if the thread is canceled, <code class="code">action</code> is
removed from <code class="code">set</code>.</p></div>
<pre class="odoccode"><span class="VALcheck_descriptor"><span class="keyword">val</span> check_descriptor</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; unit</code></pre><div class="info"><code class="code">check_descriptor fd</code> raise an exception if <code class="code">fd</code> is not in the
state Open</div>
<pre class="odoccode"><span class="VALregister_action"><span class="keyword">val</span> register_action</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_unix.io_event" class="ocaml_internal">io_event</a> -&gt; <a href="http://mirage.github.io/lwt/#Lwt_unix.file_descr" class="ocaml_internal">file_descr</a> -&gt; (unit -&gt; 'a) -&gt; 'a <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info"><code class="code">register_action set fd action</code> registers <code class="code">action</code> on <code class="code">fd</code>. When
<code class="code">fd</code> becomes <code class="code">readable</code>/<code class="code">writable</code> <code class="code">action</code> is called.<p>Note:</p><ul><li>you must call <code class="code">check_descriptor fd</code> before calling
<code class="code">register_action</code></li></ul><ul><li>you should prefer using wrap_syscall</li></ul></div>
<pre class="odoccode"><span class="TYPEjob"><span class="keyword">type</span> <code class="type">'a </code>job</span></pre><div class="info">Type of job descriptions. A job description describe how to call
a C function and how to get its result. The C function may be
executed in another system thread.</div>
<pre class="odoccode"><span class="VALexecute_job"><span class="keyword">val</span> execute_job</span> : <code class="type">?async_method:<a href="http://mirage.github.io/lwt/#Lwt_unix.async_method" class="ocaml_internal">async_method</a> -&gt;
job:'a <a href="http://mirage.github.io/lwt/#Lwt_unix.job" class="ocaml_internal">job</a> -&gt; result:('a <a href="http://mirage.github.io/lwt/#Lwt_unix.job" class="ocaml_internal">job</a> -&gt; 'b) -&gt; free:('a <a href="http://mirage.github.io/lwt/#Lwt_unix.job" class="ocaml_internal">job</a> -&gt; unit) -&gt; 'b <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">This is the old and deprecated way of running a job. Use
run_job in new code.</div>
<pre class="odoccode"><span class="VALrun_job"><span class="keyword">val</span> run_job</span> : <code class="type">?async_method:<a href="http://mirage.github.io/lwt/#Lwt_unix.async_method" class="ocaml_internal">async_method</a> -&gt; 'a <a href="http://mirage.github.io/lwt/#Lwt_unix.job" class="ocaml_internal">job</a> -&gt; 'a <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info"><code class="code">run_job ?async_method job</code> starts <code class="code">job</code> and wait for its
termination.<p>The async method is choosen follow:</p><ul><li>if the optional parameter <code class="code">async_method</code> is specified, it is
used,</li><li>otherwise if the local key async_method_key is set in the
current thread, it is used,</li><li>otherwise the default method (returned by
default_async_method) is used.</li></ul>If the method is Async_none then the job is run synchronously
and may block the current system thread, thus blocking all Lwt
threads.<p>If the method is Async_detach then the job is run in another
system thread, unless the the maximum number of worker threads
has been reached (as given by pool_size).</p><p>If the method is Async_switch then the job is run
synchronously and if it blocks, execution will continue in
another system thread (unless the limit is reached).</p></div>
<pre class="odoccode"><span class="VALabort_jobs"><span class="keyword">val</span> abort_jobs</span> : <code class="type">exn -&gt; unit</code></pre><div class="info"><code class="code">abort_jobs exn</code> make all pending jobs to fail with exn. Note
that this does not abort the real job (i.e. the C function
executing it), just the lwt thread for it.</div>
<pre class="odoccode"><span class="VALcancel_jobs"><span class="keyword">val</span> cancel_jobs</span> : <code class="type">unit -&gt; unit</code></pre><div class="info"><code class="code">cancel_jobs ()</code> is the same as <code class="code">abort_jobs Lwt.Canceled</code>.</div>
<pre class="odoccode"><span class="VALwait_for_jobs"><span class="keyword">val</span> wait_for_jobs</span> : <code class="type">unit -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Wait for all pending jobs to terminate.</div>
<div class="info"><h2 id="2_TITLE">Notifications</h2></div>
<div class="info">Lwt internally use a pipe to send notification to the main
thread. The following functions allow to use this pipe.</div>
<pre class="odoccode"><span class="VALmake_notification"><span class="keyword">val</span> make_notification</span> : <code class="type">?once:bool -&gt; (unit -&gt; unit) -&gt; int</code></pre><div class="info"><code class="code">new_notifier ?once f</code> registers a new notifier. It returns the
id of the notifier. Each time a notification with this id is
received, <code class="code">f</code> is called.<p>if <code class="code">once</code> is specified, then the notification is stopped after
the first time it is received. It defaults to <code class="code">false</code>.</p></div>
<pre class="odoccode"><span class="VALsend_notification"><span class="keyword">val</span> send_notification</span> : <code class="type">int -&gt; unit</code></pre><div class="info"><code class="code">send_notification id</code> sends a notification.<p>This function is thread-safe.</p></div>
<pre class="odoccode"><span class="VALstop_notification"><span class="keyword">val</span> stop_notification</span> : <code class="type">int -&gt; unit</code></pre><div class="info">Stop the given notification. Note that you should not reuse the
id after the notification has been stopped, the result is
unspecified if you do so.</div>
<pre class="odoccode"><span class="VALcall_notification"><span class="keyword">val</span> call_notification</span> : <code class="type">int -&gt; unit</code></pre><div class="info">Call the handler associated to the given notification. Note that
if the notification was defined with <code class="code">once = true</code> it is removed.</div>
<pre class="odoccode"><span class="VALset_notification"><span class="keyword">val</span> set_notification</span> : <code class="type">int -&gt; (unit -&gt; unit) -&gt; unit</code></pre><div class="info"><code class="code">set_notification id f</code> replace the function associated to the
notification by <code class="code">f</code>. It raises <code class="code">Not_found</code> if the given
notification is not found.</div>
<div class="info"><h2 id="2_TITLE">System threads pool</h2></div>
<div class="info">If the program is using the async method Async_detach or
Async_switch, Lwt will launch system threads to execute
blocking system calls asynchronously.</div>
<pre class="odoccode"><span class="VALpool_size"><span class="keyword">val</span> pool_size</span> : <code class="type">unit -&gt; int</code></pre><div class="info">Maximum number of system threads that can be started. If this
limit is reached, jobs will be executed synchronously.</div>
<pre class="odoccode"><span class="VALset_pool_size"><span class="keyword">val</span> set_pool_size</span> : <code class="type">int -&gt; unit</code></pre><div class="info">Change the size of the pool.</div>
<pre class="odoccode"><span class="VALthread_count"><span class="keyword">val</span> thread_count</span> : <code class="type">unit -&gt; int</code></pre><div class="info">The number of system threads running (excluding this one).</div>
<pre class="odoccode"><span class="VALthread_waiting_count"><span class="keyword">val</span> thread_waiting_count</span> : <code class="type">unit -&gt; int</code></pre><div class="info">The number threads waiting for a job.</div>
<div class="info"><h2 id="2_TITLE">CPUs</h2></div>
<pre class="odoccode"><span class="VALget_cpu"><span class="keyword">val</span> get_cpu</span> : <code class="type">unit -&gt; int</code></pre><div class="info"><code class="code">get_cpu ()</code> returns the number of the CPU the current thread is
running on.</div>
<pre class="odoccode"><span class="VALget_affinity"><span class="keyword">val</span> get_affinity</span> : <code class="type">?pid:int -&gt; unit -&gt; int list</code></pre><div class="info"><code class="code">get_affinity ?pid ()</code> returns the list of CPUs the process with
pid <code class="code">pid</code> is allowed to run on. If <code class="code">pid</code> is not specified then
the affinity of the current process is returned.</div>
<pre class="odoccode"><span class="VALset_affinity"><span class="keyword">val</span> set_affinity</span> : <code class="type">?pid:int -&gt; int list -&gt; unit</code></pre><div class="info"><code class="code">set_affinity ?pid cpus</code> sets the list of CPUs the given process
is allowed to run on.</div>
<pre class="odoccode"><span class="VALrun"><span class="keyword">val</span> run</span> : <code class="type">'a <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a> -&gt; 'a</code></pre>
<pre class="odoccode"><span class="VALhas_wait4"><span class="keyword">val</span> has_wait4</span> : <code class="type">bool</code></pre>
</div></div>