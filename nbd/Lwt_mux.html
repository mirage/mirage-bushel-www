<div class="ocaml_top"><div class="ocaml_summary"/>
<div class="ocaml_content"><div class="ocaml_modtype" name="RPC"><pre class="odoccode"><span class="keyword">module type</span> <a href="http://mirage.github.io/nbd/#Lwt_mux:RPC" class="ocaml_internal">RPC</a> = <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><span class="TYPEtransport"><span class="keyword">type</span> transport</span></pre>
<pre class="odoccode"><span class="TYPEid"><span class="keyword">type</span> id</span></pre>
<pre class="odoccode"><span class="TYPErequest_hdr"><span class="keyword">type</span> request_hdr</span></pre>
<pre class="odoccode"><span class="TYPErequest_body"><span class="keyword">type</span> request_body</span></pre>
<pre class="odoccode"><span class="TYPEresponse_hdr"><span class="keyword">type</span> response_hdr</span></pre>
<pre class="odoccode"><span class="TYPEresponse_body"><span class="keyword">type</span> response_body</span></pre>
<pre class="odoccode"><span class="VALrecv_hdr"><span class="keyword">val</span> recv_hdr</span> : <code class="type"><a href="http://mirage.github.io/nbd/#Lwt_mux:RPC.transport" class="ocaml_internal">transport</a> -&gt; (<a href="http://mirage.github.io/nbd/#Lwt_mux:RPC.id" class="ocaml_internal">id</a> option * <a href="http://mirage.github.io/nbd/#Lwt_mux:RPC.response_hdr" class="ocaml_internal">response_hdr</a>) <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre>
<pre class="odoccode"><span class="VALrecv_body"><span class="keyword">val</span> recv_body</span> : <code class="type"><a href="http://mirage.github.io/nbd/#Lwt_mux:RPC.transport" class="ocaml_internal">transport</a> -&gt; <a href="http://mirage.github.io/nbd/#Lwt_mux:RPC.request_hdr" class="ocaml_internal">request_hdr</a> -&gt; <a href="http://mirage.github.io/nbd/#Lwt_mux:RPC.response_hdr" class="ocaml_internal">response_hdr</a> -&gt; <a href="http://mirage.github.io/nbd/#Lwt_mux:RPC.response_body" class="ocaml_internal">response_body</a> <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre>
<pre class="odoccode"><span class="VALsend_one"><span class="keyword">val</span> send_one</span> : <code class="type"><a href="http://mirage.github.io/nbd/#Lwt_mux:RPC.transport" class="ocaml_internal">transport</a> -&gt; <a href="http://mirage.github.io/nbd/#Lwt_mux:RPC.request_hdr" class="ocaml_internal">request_hdr</a> -&gt; <a href="http://mirage.github.io/nbd/#Lwt_mux:RPC.request_body" class="ocaml_internal">request_body</a> -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre>
<pre class="odoccode"><span class="VALid_of_request"><span class="keyword">val</span> id_of_request</span> : <code class="type"><a href="http://mirage.github.io/nbd/#Lwt_mux:RPC.request_hdr" class="ocaml_internal">request_hdr</a> -&gt; <a href="http://mirage.github.io/nbd/#Lwt_mux:RPC.id" class="ocaml_internal">id</a></code></pre>
<pre class="odoccode"><span class="VALhandle_unrequested_packet"><span class="keyword">val</span> handle_unrequested_packet</span> : <code class="type"><a href="http://mirage.github.io/nbd/#Lwt_mux:RPC.transport" class="ocaml_internal">transport</a> -&gt; <a href="http://mirage.github.io/nbd/#Lwt_mux:RPC.response_hdr" class="ocaml_internal">response_hdr</a> -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre></div></div>
<div class="ocaml_module" name="Mux"><pre class="odoccode"><span class="keyword">module</span> <a href="http://mirage.github.io/nbd/#Lwt_mux.Mux" class="ocaml_internal">Mux</a> : <code class="type"><div class="sig_block"><code class="code">functor (</code><code class="code">R</code><code class="code"> : </code><code class="code"><a href="http://mirage.github.io/nbd/#Lwt_mux:RPC" class="ocaml_internal">RPC</a></code><code class="code">) -&gt; </code><code class="code">sig</code> .. <code class="code">end</code></div></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><span class="EXCEPTIONUnexpected_id"><span class="keyword">exception</span> Unexpected_id</span> <span class="keyword">of</span> <code class="type">R.id</code></pre>
<pre class="odoccode"><span class="EXCEPTIONShutdown"><span class="keyword">exception</span> Shutdown</span></pre>
<pre class="odoccode"><code><span class="TYPEclient"><span class="keyword">type</span> client</span> = {</code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTclient.transport">transport</span> : <code class="type">R.transport</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTclient.outgoing_mutex">outgoing_mutex</span> : <code class="type"><a href="http://mirage.github.io/lwt/#Lwt_mutex.t">Lwt_mutex.t</a></code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTclient.id_to_wakeup">id_to_wakeup</span> : <code class="type">(R.id, R.request_hdr * (R.response_hdr * R.response_body) <a href="http://mirage.github.io/lwt/#Lwt.u">Lwt.u</a>) Hashtbl.t</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTclient.dispatcher_thread">dispatcher_thread</span> : <code class="type">unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTclient.dispatcher_shutting_down">dispatcher_shutting_down</span> : <code class="type">bool</code>;</code></td></tr><tr><td>}</td></tr></table>
<pre class="odoccode"><span class="VALdispatcher"><span class="keyword">val</span> dispatcher</span> : <code class="type"><a href="http://mirage.github.io/nbd/#Lwt_mux.Mux.client" class="ocaml_internal">client</a> -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre>
<pre class="odoccode"><span class="VALrpc"><span class="keyword">val</span> rpc</span> : <code class="type">R.request_hdr -&gt;
R.request_body -&gt; <a href="http://mirage.github.io/nbd/#Lwt_mux.Mux.client" class="ocaml_internal">client</a> -&gt; (R.response_hdr * R.response_body) <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre>
<pre class="odoccode"><span class="VALcreate"><span class="keyword">val</span> create</span> : <code class="type">R.transport -&gt; <a href="http://mirage.github.io/nbd/#Lwt_mux.Mux.client" class="ocaml_internal">client</a> <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre></div></div>
</div></div>