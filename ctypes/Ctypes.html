<div class="ocaml_top"><div class="ocaml_summary"><div class="info">The core ctypes module.<p>The main points of interest are the set of functions for describing C
types (see types) and the set of functions for accessing C values (see
values). The Foreign.foreign function uses C type descriptions
to bind external C values.</p></div></div>
<div class="ocaml_content"><div class="info"><h2 id="types">Values representing C types</h2></div>
<pre class="odoccode"><span class="TYPEtyp"><span class="keyword">type</span> <code class="type">'a </code>typ</span> = <code class="type">'a <a href="http://mirage.github.io/ctypes/#Static.typ">Static.typ</a></code></pre><div class="info">The type of values representing C types. There are two types associated
with each <code class="code">typ</code> value: the C type used to store and pass values, and the
corresponding OCaml type. The type parameter indicates the OCaml type, so a
value of type <code class="code">t typ</code> is used to read and write OCaml values of type <code class="code">t</code>.
There are various uses of <code class="code">typ</code> values, including<ul><li>constructing function types for binding native functions using
Foreign.foreign</li></ul><ul><li>constructing pointers for reading and writing locations in C-managed
storage using ptr</li></ul><ul><li>describing the fields of structured types built with structure and
union.</li></ul></div>
<div class="info"><h3 id="3_TITLE">The void type</h3></div>
<pre class="odoccode"><span class="VALvoid"><span class="keyword">val</span> void</span> : <code class="type">unit <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Value representing the C void type. Void values appear in OCaml as the
unit type, so using void in an argument or result type specification
produces a function which accepts or returns unit.<p>Dereferencing a pointer to void is an error, as in C, and will raise
IncompleteType.</p></div>
<div class="info"><h3 id="3_TITLE">Scalar types</h3><p>The scalar types consist of the arithmetic_types and the pointer_types.</p></div>
<div class="info"><h4 id="arithmetic_types">Arithmetic types</h4><p>The arithmetic types consist of the signed and unsigned integer types
(including character types) and the floating types. There are values
representing both exact-width integer types (of 8, 16, 32 and 64 bits) and
types whose size depend on the platform (signed and unsigned short, int, long,
long long).</p></div>
<pre class="odoccode"><span class="VALchar"><span class="keyword">val</span> char</span> : <code class="type">char <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Value representing the C type <code class="code">char</code>.</div>
<div class="info"><h5 id="5_TITLE">Signed integer types</h5></div>
<pre class="odoccode"><span class="VALschar"><span class="keyword">val</span> schar</span> : <code class="type">int <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Value representing the C type <code class="code">signed char</code>.</div>
<pre class="odoccode"><span class="VALshort"><span class="keyword">val</span> short</span> : <code class="type">int <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Value representing the C type (<code class="code">signed</code>) <code class="code">short</code>.</div>
<pre class="odoccode"><span class="VALint"><span class="keyword">val</span> int</span> : <code class="type">int <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Value representing the C type (<code class="code">signed</code>) <code class="code">int</code>.</div>
<pre class="odoccode"><span class="VALlong"><span class="keyword">val</span> long</span> : <code class="type"><a href="http://mirage.github.io/ctypes/#Signed.long">Signed.long</a> <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Value representing the C type (<code class="code">signed</code>) <code class="code">long</code>.</div>
<pre class="odoccode"><span class="VALllong"><span class="keyword">val</span> llong</span> : <code class="type"><a href="http://mirage.github.io/ctypes/#Signed.llong">Signed.llong</a> <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Value representing the C type (<code class="code">signed</code>) <code class="code">long long</code>.</div>
<pre class="odoccode"><span class="VALnativeint"><span class="keyword">val</span> nativeint</span> : <code class="type">nativeint <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Value representing the C type (<code class="code">signed</code>) <code class="code">int</code>.</div>
<pre class="odoccode"><span class="VALint8_t"><span class="keyword">val</span> int8_t</span> : <code class="type">int <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Value representing an 8-bit signed integer C type.</div>
<pre class="odoccode"><span class="VALint16_t"><span class="keyword">val</span> int16_t</span> : <code class="type">int <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Value representing a 16-bit signed integer C type.</div>
<pre class="odoccode"><span class="VALint32_t"><span class="keyword">val</span> int32_t</span> : <code class="type">int32 <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Value representing a 32-bit signed integer C type.</div>
<pre class="odoccode"><span class="VALint64_t"><span class="keyword">val</span> int64_t</span> : <code class="type">int64 <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Value representing a 64-bit signed integer C type.</div>
<pre class="odoccode"><span class="VALcamlint"><span class="keyword">val</span> camlint</span> : <code class="type">int <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Value representing an integer type with the same storage requirements as
an OCaml <code class="code">int</code>.</div>
<div class="info"><h5 id="5_TITLE">Unsigned integer types</h5></div>
<pre class="odoccode"><span class="VALuchar"><span class="keyword">val</span> uchar</span> : <code class="type"><a href="http://mirage.github.io/ctypes/#Unsigned.uchar">Unsigned.uchar</a> <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Value representing the C type <code class="code">unsigned char</code>.</div>
<pre class="odoccode"><span class="VALuint8_t"><span class="keyword">val</span> uint8_t</span> : <code class="type"><a href="http://mirage.github.io/ctypes/#Unsigned.uint8">Unsigned.uint8</a> <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Value representing an 8-bit unsigned integer C type.</div>
<pre class="odoccode"><span class="VALuint16_t"><span class="keyword">val</span> uint16_t</span> : <code class="type"><a href="http://mirage.github.io/ctypes/#Unsigned.uint16">Unsigned.uint16</a> <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Value representing a 16-bit unsigned integer C type.</div>
<pre class="odoccode"><span class="VALuint32_t"><span class="keyword">val</span> uint32_t</span> : <code class="type"><a href="http://mirage.github.io/ctypes/#Unsigned.uint32">Unsigned.uint32</a> <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Value representing a 32-bit unsigned integer C type.</div>
<pre class="odoccode"><span class="VALuint64_t"><span class="keyword">val</span> uint64_t</span> : <code class="type"><a href="http://mirage.github.io/ctypes/#Unsigned.uint64">Unsigned.uint64</a> <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Value representing a 64-bit unsigned integer C type.</div>
<pre class="odoccode"><span class="VALsize_t"><span class="keyword">val</span> size_t</span> : <code class="type"><a href="http://mirage.github.io/ctypes/#Unsigned.size_t">Unsigned.size_t</a> <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Value representing the C type <code class="code">size_t</code>, an alias for one of the unsigned
integer types. The actual size and alignment requirements for <code class="code">size_t</code>
vary between platforms.</div>
<pre class="odoccode"><span class="VALushort"><span class="keyword">val</span> ushort</span> : <code class="type"><a href="http://mirage.github.io/ctypes/#Unsigned.ushort">Unsigned.ushort</a> <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Value representing the C type <code class="code">unsigned short</code>.</div>
<pre class="odoccode"><span class="VALuint"><span class="keyword">val</span> uint</span> : <code class="type"><a href="http://mirage.github.io/ctypes/#Unsigned.uint">Unsigned.uint</a> <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Value representing the C type <code class="code">unsigned int</code>.</div>
<pre class="odoccode"><span class="VALulong"><span class="keyword">val</span> ulong</span> : <code class="type"><a href="http://mirage.github.io/ctypes/#Unsigned.ulong">Unsigned.ulong</a> <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Value representing the C type <code class="code">unsigned long</code>.</div>
<pre class="odoccode"><span class="VALullong"><span class="keyword">val</span> ullong</span> : <code class="type"><a href="http://mirage.github.io/ctypes/#Unsigned.ullong">Unsigned.ullong</a> <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Value representing the C type <code class="code">unsigned long long</code>.</div>
<div class="info"><h5 id="5_TITLE">Floating types</h5></div>
<pre class="odoccode"><span class="VALfloat"><span class="keyword">val</span> float</span> : <code class="type">float <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Value representing the C single-precision <code class="code">float</code> type.</div>
<pre class="odoccode"><span class="VALdouble"><span class="keyword">val</span> double</span> : <code class="type">float <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Value representing the C type <code class="code">double</code>.</div>
<div class="info"><h5 id="5_TITLE">Complex types</h5></div>
<pre class="odoccode"><span class="VALcomplex32"><span class="keyword">val</span> complex32</span> : <code class="type">Complex.t <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Value representing the C99 single-precision <code class="code">float complex</code> type.</div>
<pre class="odoccode"><span class="VALcomplex64"><span class="keyword">val</span> complex64</span> : <code class="type">Complex.t <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Value representing the C99 double-precision <code class="code">double complex</code> type.</div>
<div class="info"><h4 id="pointer_types">Pointer types</h4></div>
<pre class="odoccode"><span class="TYPEptr"><span class="keyword">type</span> <code class="type">'a </code>ptr</span></pre><div class="info">The type of pointer values. A value of type <code class="code">t ptr</code> can be used to read
and write values of type <code class="code">t</code> at particular addresses.</div>
<pre class="odoccode"><span class="VALptr"><span class="keyword">val</span> ptr</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a> -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a> <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Construct a pointer type from an existing type (called the <i>reference
type</i>).</div>
<pre class="odoccode"><span class="VALptr_opt"><span class="keyword">val</span> ptr_opt</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a> -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a> option <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Construct a pointer type from an existing type (called the <i>reference
type</i>). This behaves like ptr, except that null pointers appear in OCaml
as <code class="code">None</code>.</div>
<pre class="odoccode"><span class="VALstring"><span class="keyword">val</span> string</span> : <code class="type">string <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">A high-level representation of the string type.<p>On the C side this behaves like <code class="code">char *</code>; on the OCaml side values read
and written using string are simply native OCaml strings.</p><p>To avoid problems with the garbage collector, values passed using
string are copied into immovable C-managed storage before being passed
to C.</p></div>
<pre class="odoccode"><span class="VALstring_opt"><span class="keyword">val</span> string_opt</span> : <code class="type">string option <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">A high-level representation of the string type. This behaves like string,
except that null pointers appear in OCaml as <code class="code">None</code>.</div>
<div class="info"><h3 id="3_TITLE">Array types</h3></div>
<div class="info"><h4 id="4_TITLE">C array types</h4></div>
<pre class="odoccode"><span class="TYPEstd_array"><span class="keyword">type</span> <code class="type">'a </code>std_array</span> = <code class="type">'a array</code></pre>
<pre class="odoccode"><span class="TYPEarray"><span class="keyword">type</span> <code class="type">'a </code>array</span></pre><div class="info">The type of C array values. A value of type <code class="code">t array</code> can be used to read
and write array objects in C-managed storage.</div>
<pre class="odoccode"><span class="VALarray"><span class="keyword">val</span> array</span> : <code class="type">int -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a> -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.array" class="ocaml_internal">array</a> <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Construct a sized array type from a length and an existing type (called
the <i>element type</i>).</div>
<div class="info"><h4 id="4_TITLE">Bigarray types</h4></div>
<pre class="odoccode"><span class="TYPEbigarray_class"><span class="keyword">type</span> <code class="type">_ </code>bigarray_class</span></pre><div class="info">The type of Bigarray classes. There are four instances, one for each of
the Bigarray submodules.</div>
<pre class="odoccode"><span class="VALgenarray"><span class="keyword">val</span> genarray</span> : <code class="type">&lt; ba_repr : 'b; bigarray : ('a, 'b, Bigarray.c_layout) Bigarray.Genarray.t;
  carray : 'a <a href="http://mirage.github.io/ctypes/#Ctypes.array" class="ocaml_internal">array</a>; dims : int <a href="http://mirage.github.io/ctypes/#Ctypes.std_array" class="ocaml_internal">std_array</a>; element : 'a &gt;
<a href="http://mirage.github.io/ctypes/#Ctypes.bigarray_class" class="ocaml_internal">bigarray_class</a></code></pre><div class="info">The class of Bigarray.Genarray.t values</div>
<pre class="odoccode"><span class="VALarray1"><span class="keyword">val</span> array1</span> : <code class="type">&lt; ba_repr : 'b; bigarray : ('a, 'b, Bigarray.c_layout) Bigarray.Array1.t;
  carray : 'a <a href="http://mirage.github.io/ctypes/#Ctypes.array" class="ocaml_internal">array</a>; dims : int; element : 'a &gt;
<a href="http://mirage.github.io/ctypes/#Ctypes.bigarray_class" class="ocaml_internal">bigarray_class</a></code></pre><div class="info">The class of Bigarray.Array1.t values</div>
<pre class="odoccode"><span class="VALarray2"><span class="keyword">val</span> array2</span> : <code class="type">&lt; ba_repr : 'b; bigarray : ('a, 'b, Bigarray.c_layout) Bigarray.Array2.t;
  carray : 'a <a href="http://mirage.github.io/ctypes/#Ctypes.array" class="ocaml_internal">array</a> <a href="http://mirage.github.io/ctypes/#Ctypes.array" class="ocaml_internal">array</a>; dims : int * int; element : 'a &gt;
<a href="http://mirage.github.io/ctypes/#Ctypes.bigarray_class" class="ocaml_internal">bigarray_class</a></code></pre><div class="info">The class of Bigarray.Array2.t values</div>
<pre class="odoccode"><span class="VALarray3"><span class="keyword">val</span> array3</span> : <code class="type">&lt; ba_repr : 'b; bigarray : ('a, 'b, Bigarray.c_layout) Bigarray.Array3.t;
  carray : 'a <a href="http://mirage.github.io/ctypes/#Ctypes.array" class="ocaml_internal">array</a> <a href="http://mirage.github.io/ctypes/#Ctypes.array" class="ocaml_internal">array</a> <a href="http://mirage.github.io/ctypes/#Ctypes.array" class="ocaml_internal">array</a>; dims : int * int * int; element : 'a &gt;
<a href="http://mirage.github.io/ctypes/#Ctypes.bigarray_class" class="ocaml_internal">bigarray_class</a></code></pre><div class="info">The class of Bigarray.Array3.t values</div>
<pre class="odoccode"><span class="VALbigarray"><span class="keyword">val</span> bigarray</span> : <code class="type">&lt; ba_repr : 'b; bigarray : 'bigarray; carray : 'c; dims : 'dims;
  element : 'a &gt;
<a href="http://mirage.github.io/ctypes/#Ctypes.bigarray_class" class="ocaml_internal">bigarray_class</a> -&gt; 'dims -&gt; ('a, 'b) Bigarray.kind -&gt; 'bigarray <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Construct a sized bigarray type representation from a bigarray class, the
dimensions, and the Bigarray.kind.</div>
<div class="info"><h3 id="3_TITLE">Function types</h3></div>
<pre class="odoccode"><span class="TYPEfn"><span class="keyword">type</span> <code class="type">'a </code>fn</span> = <code class="type">'a <a href="http://mirage.github.io/ctypes/#Static.fn">Static.fn</a></code></pre><div class="info">The type of values representing C function types. A value of type <code class="code">t fn</code>
can be used to bind to C functions and to describe type of OCaml functions
passed to C.</div>
<pre class="odoccode"><span class="VAL(@-&gt;)"><span class="keyword">val</span> (@-&gt;)</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a> -&gt; 'b <a href="http://mirage.github.io/ctypes/#Ctypes.fn" class="ocaml_internal">fn</a> -&gt; ('a -&gt; 'b) <a href="http://mirage.github.io/ctypes/#Ctypes.fn" class="ocaml_internal">fn</a></code></pre><div class="info">Construct a function type from a type and an existing function type. This
corresponds to prepending a parameter to a C function parameter list. For
example,<p><code class="code">int @-&gt; ptr void @-&gt; returning float</code></p><p>describes a function type that accepts two arguments -- an integer and a
pointer to void -- and returns a float.</p></div>
<pre class="odoccode"><span class="VALreturning"><span class="keyword">val</span> returning</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a> -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.fn" class="ocaml_internal">fn</a></code></pre><div class="info">Give the return type of a C function. Note that <code class="code">returning</code> is intended
to be used together with (@-&gt;); see the documentation for (@-&gt;) for an
example.</div>
<div class="info"><h3 id="3_TITLE">Struct and union types</h3></div>
<pre class="odoccode"><span class="TYPEstructured"><span class="keyword">type</span> <code class="type">('a, 'kind) </code>structured</span> = <code class="type">('a, 'kind) <a href="http://mirage.github.io/ctypes/#Static.structured">Static.structured</a></code></pre><div class="info">The base type of values representing C struct and union types. The
<code class="code">'kind</code> parameter is a polymorphic variant type indicating whether the type
represents a struct (<code class="code">`Struct</code>) or a union (<code class="code">`Union</code>).</div>
<pre class="odoccode"><span class="TYPEstructure"><span class="keyword">type</span> <code class="type">'a </code>structure</span> = <code class="type">('a, [ `Struct ]) <a href="http://mirage.github.io/ctypes/#Ctypes.structured" class="ocaml_internal">structured</a></code></pre><div class="info">The type of values representing C struct types.</div>
<pre class="odoccode"><span class="TYPEunion"><span class="keyword">type</span> <code class="type">'a </code>union</span> = <code class="type">('a, [ `Union ]) <a href="http://mirage.github.io/ctypes/#Ctypes.structured" class="ocaml_internal">structured</a></code></pre><div class="info">The type of values representing C union types.</div>
<pre class="odoccode"><span class="TYPEfield"><span class="keyword">type</span> <code class="type">('a, 't) </code>field</span></pre><div class="info">The type of values representing C struct or union members (called &quot;fields&quot;
here). A value of type <code class="code">(a, s) field</code> represents a field of type <code class="code">a</code> in a
struct or union of type <code class="code">s</code>.</div>
<pre class="odoccode"><span class="VALstructure"><span class="keyword">val</span> structure</span> : <code class="type">string -&gt; 's <a href="http://mirage.github.io/ctypes/#Ctypes.structure" class="ocaml_internal">structure</a> <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Construct a new structure type. The type value returned is incomplete and
can be updated using (*:*) until it is passed to seal, at which point
the set of fields is fixed.<p>The type (<code class="code">'_s structure typ</code>) of the expression returned by the call
<code class="code">structure tag</code> includes a weak type variable, which can be explicitly
instantiated to ensure that the OCaml values representing different C
structure types have incompatible types. Typical usage is as follows:</p><p><code class="code">type tagname</code></p><p><code class="code">let tagname : tagname structure typ = structure &quot;tagname&quot;</code></p></div>
<pre class="odoccode"><span class="VALunion"><span class="keyword">val</span> union</span> : <code class="type">string -&gt; 's <a href="http://mirage.github.io/ctypes/#Ctypes.union" class="ocaml_internal">union</a> <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Construct a new union type. This behaves analogously to structure;
fields are added with (+:+).</div>
<pre class="odoccode"><span class="VALfield"><span class="keyword">val</span> field</span> : <code class="type">('s, [&lt; `Struct | `Union ] as 'b) <a href="http://mirage.github.io/ctypes/#Ctypes.structured" class="ocaml_internal">structured</a> <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a> -&gt;
string -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a> -&gt; ('a, ('s, 'b) <a href="http://mirage.github.io/ctypes/#Ctypes.structured" class="ocaml_internal">structured</a>) <a href="http://mirage.github.io/ctypes/#Ctypes.field" class="ocaml_internal">field</a></code></pre><div class="info"><code class="code">field ty label ty'</code> adds a field of type <code class="code">ty'</code> with label <code class="code">label</code> to the
structure or union type <code class="code">ty</code> and returns a field value that can be used to
read and write the field in structure or union instances (e.g. using
getf and setf).<p>Attempting to add a field to a union type that has been sealed with <code class="code">seal</code>
is an error, and will raise ModifyingSealedType.</p></div>
<pre class="odoccode"><span class="VAL( *:* )"><span class="keyword">val</span> ( *:* )</span> : <code class="type">('s, [ `Struct ]) <a href="http://mirage.github.io/ctypes/#Ctypes.structured" class="ocaml_internal">structured</a> <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a> -&gt;
'a <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a> -&gt; ('a, ('s, [ `Struct ]) <a href="http://mirage.github.io/ctypes/#Ctypes.structured" class="ocaml_internal">structured</a>) <a href="http://mirage.github.io/ctypes/#Ctypes.field" class="ocaml_internal">field</a></code></pre><div class="info"><span class="warning">Deprecated.</span> Add an anonymous field to a structure. Use field instead.<br/></div>
<pre class="odoccode"><span class="VAL(+:+)"><span class="keyword">val</span> (+:+)</span> : <code class="type">('s, [ `Union ]) <a href="http://mirage.github.io/ctypes/#Ctypes.structured" class="ocaml_internal">structured</a> <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a> -&gt;
'a <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a> -&gt; ('a, ('s, [ `Union ]) <a href="http://mirage.github.io/ctypes/#Ctypes.structured" class="ocaml_internal">structured</a>) <a href="http://mirage.github.io/ctypes/#Ctypes.field" class="ocaml_internal">field</a></code></pre><div class="info"><span class="warning">Deprecated.</span> Add an anonymous field to a union. Use field instead.<br/></div>
<pre class="odoccode"><span class="VALseal"><span class="keyword">val</span> seal</span> : <code class="type">('a, [&lt; `Struct | `Union ]) <a href="http://mirage.github.io/ctypes/#Ctypes.structured" class="ocaml_internal">structured</a> <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a> -&gt; unit</code></pre><div class="info"><code class="code">seal t</code> completes the struct or union type <code class="code">t</code> so that no further fields
can be added. Struct and union types must be sealed before they can be used
in a way that involves their size or alignment; see the documentation for
IncompleteType for further details.</div>
<div class="info"><h3 id="3_TITLE">View types</h3></div>
<pre class="odoccode"><span class="VALview"><span class="keyword">val</span> view</span> : <code class="type">?format_typ:((Format.formatter -&gt; unit) -&gt; Format.formatter -&gt; unit) -&gt;
read:('a -&gt; 'b) -&gt; write:('b -&gt; 'a) -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a> -&gt; 'b <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info"><code class="code">view ~read:r ~write:w t</code> creates a C type representation <code class="code">t'</code> which
behaves like <code class="code">t</code> except that values read using <code class="code">t'</code> are subsequently
transformed using the function <code class="code">r</code> and values written using <code class="code">t'</code> are first
transformed using the function <code class="code">w</code>.<p>For example, given suitable definitions of <code class="code">string_of_char_ptr</code> and
<code class="code">char_ptr_of_string</code>, the type representation</p><p><code class="code">view ~read:string_of_char_ptr ~write:char_ptr_of_string (ptr char)</code></p><p>can be used to pass OCaml strings directly to and from bound C functions,
or to read and write string members in structs and arrays. (In fact, the
string type representation is defined in exactly this way.)</p><p>The optional argument <code class="code">format_typ</code> is used by the Ctypes.format_typ and
string_of_typ functions to print the type at the top level and
elsewhere. If <code class="code">format_typ</code> is not supplied the printer for <code class="code">t</code> is used
instead.</p></div>
<div class="info"><h3 id="3_TITLE">Abstract types</h3></div>
<pre class="odoccode"><span class="TYPEabstract"><span class="keyword">type</span> <code class="type">'a </code>abstract</span></pre><div class="info">The type of abstract values. The purpose of the <code class="code">abstract</code> type is to
represent values whose type varies from platform to platform.<p>For example, the type <code class="code">pthread_t</code> is a pointer on some platforms, an
integer on other platforms, and a struct on a third set of platforms. One
way to deal with this kind of situation is to have
possibly-platform-specific code which interrogates the C type in some way
to help determine an appropriate representation. Another way is to use
<code class="code">abstract</code>, leaving the representation opaque.</p><p>(Note, however, that although <code class="code">pthread_t</code> is a convenient example, since
the type used to implement it varies significantly across platforms, it's
not actually a good match for <code class="code">abstract</code>, since values of type <code class="code">pthread_t</code>
are passed and returned by value.)</p></div>
<pre class="odoccode"><span class="VALabstract"><span class="keyword">val</span> abstract</span> : <code class="type">name:string -&gt; size:int -&gt; alignment:int -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.abstract" class="ocaml_internal">abstract</a> <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Create an abstract type specification from the size and alignment
requirements for the type.</div>
<div class="info"><h3 id="3_TITLE">Operations on types</h3></div>
<pre class="odoccode"><span class="VALsizeof"><span class="keyword">val</span> sizeof</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a> -&gt; int</code></pre><div class="info"><code class="code">sizeof t</code> computes the size in bytes of the type <code class="code">t</code>. The exception
IncompleteType is raised if <code class="code">t</code> is incomplete.</div>
<pre class="odoccode"><span class="VALalignment"><span class="keyword">val</span> alignment</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a> -&gt; int</code></pre><div class="info"><code class="code">alignment t</code> computes the alignment requirements of the type <code class="code">t</code>. The
exception IncompleteType is raised if <code class="code">t</code> is incomplete.</div>
<pre class="odoccode"><span class="VALformat_typ"><span class="keyword">val</span> format_typ</span> : <code class="type">?name:string -&gt; Format.formatter -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a> -&gt; unit</code></pre><div class="info">Pretty-print a C representation of the type to the specified formatter.</div>
<pre class="odoccode"><span class="VALformat_fn"><span class="keyword">val</span> format_fn</span> : <code class="type">?name:string -&gt; Format.formatter -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.fn" class="ocaml_internal">fn</a> -&gt; unit</code></pre><div class="info">Pretty-print a C representation of the function type to the specified
formatter.</div>
<pre class="odoccode"><span class="VALstring_of_typ"><span class="keyword">val</span> string_of_typ</span> : <code class="type">?name:string -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a> -&gt; string</code></pre><div class="info">Return a C representation of the type.</div>
<pre class="odoccode"><span class="VALstring_of_fn"><span class="keyword">val</span> string_of_fn</span> : <code class="type">?name:string -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.fn" class="ocaml_internal">fn</a> -&gt; string</code></pre><div class="info">Return a C representation of the function type.</div>
<div class="info"><h2 id="values">Values representing C values</h2></div>
<pre class="odoccode"><span class="VALformat"><span class="keyword">val</span> format</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a> -&gt; Format.formatter -&gt; 'a -&gt; unit</code></pre><div class="info">Pretty-print a representation of the C value to the specified formatter.</div>
<pre class="odoccode"><span class="VALstring_of"><span class="keyword">val</span> string_of</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a> -&gt; 'a -&gt; string</code></pre><div class="info">Return a string representation of the C value.</div>
<div class="info"><h3 id="3_TITLE">Pointer values</h3></div>
<pre class="odoccode"><span class="VALnull"><span class="keyword">val</span> null</span> : <code class="type">unit <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a></code></pre><div class="info">A null pointer.</div>
<pre class="odoccode"><span class="VAL(!@)"><span class="keyword">val</span> (!@)</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a> -&gt; 'a</code></pre><div class="info"><code class="code">!@ p</code> dereferences the pointer <code class="code">p</code>. If the reference type is a scalar
type then dereferencing constructs a new value. If the reference type is
an aggregate type then dereferencing returns a value that references the
memory pointed to by <code class="code">p</code>.</div>
<pre class="odoccode"><span class="VAL(&lt;-@)"><span class="keyword">val</span> (&lt;-@)</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a> -&gt; 'a -&gt; unit</code></pre><div class="info"><code class="code">p &lt;-@ v</code> writes the value <code class="code">v</code> to the address <code class="code">p</code>.</div>
<pre class="odoccode"><span class="VAL(+@)"><span class="keyword">val</span> (+@)</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a> -&gt; int -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a></code></pre><div class="info">If <code class="code">p</code> is a pointer to an array element then <code class="code">p +@ n</code> computes the
address of the <code class="code">n</code>th next element.</div>
<pre class="odoccode"><span class="VAL(-@)"><span class="keyword">val</span> (-@)</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a> -&gt; int -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a></code></pre><div class="info">If <code class="code">p</code> is a pointer to an array element then <code class="code">p -@ n</code> computes the address
of the nth previous element.</div>
<pre class="odoccode"><span class="VALptr_diff"><span class="keyword">val</span> ptr_diff</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a> -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a> -&gt; int</code></pre><div class="info"><code class="code">ptr_diff p q</code> computes <code class="code">q - p</code>. As in C, both <code class="code">p</code> and <code class="code">q</code> must point
into the same array, and the result value is the difference of the
subscripts of the two array elements.</div>
<pre class="odoccode"><span class="VALfrom_voidp"><span class="keyword">val</span> from_voidp</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a> -&gt; unit <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a> -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a></code></pre><div class="info">Conversion from <code class="code">void *</code>.</div>
<pre class="odoccode"><span class="VALto_voidp"><span class="keyword">val</span> to_voidp</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a> -&gt; unit <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a></code></pre><div class="info">Conversion to <code class="code">void *</code>.</div>
<pre class="odoccode"><span class="VALallocate"><span class="keyword">val</span> allocate</span> : <code class="type">?finalise:('a <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a> -&gt; unit) -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a> -&gt; 'a -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a></code></pre><div class="info"><code class="code">allocate t v</code> allocates a fresh value of type <code class="code">t</code>, initialises it with
<code class="code">v</code> and returns its address. The argument <code class="code">?finalise</code>, if present, will be
called just before the memory is freed.</div>
<pre class="odoccode"><span class="VALallocate_n"><span class="keyword">val</span> allocate_n</span> : <code class="type">?finalise:('a <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a> -&gt; unit) -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a> -&gt; count:int -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a></code></pre><div class="info"><code class="code">allocate_n t ~count:n</code> allocates a fresh array with element type <code class="code">t</code> and
length <code class="code">n</code>, and returns its address. The argument <code class="code">?finalise</code>, if present,
will be called just before the memory is freed.</div>
<pre class="odoccode"><span class="VALptr_compare"><span class="keyword">val</span> ptr_compare</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a> -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a> -&gt; int</code></pre><div class="info">If <code class="code">p</code> and <code class="code">q</code> are pointers to elements <code class="code">i</code> and <code class="code">j</code> of the same array then
<code class="code">ptr_compare p q</code> compares the indexes of the elements. The result is
negative if <code class="code">i</code> is less than <code class="code">j</code>, positive if <code class="code">i</code> is greater than <code class="code">j</code>, and
zero if <code class="code">i</code> and <code class="code">j</code> are equal.</div>
<pre class="odoccode"><span class="VALreference_type"><span class="keyword">val</span> reference_type</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a> -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Retrieve the reference type of a pointer.</div>
<pre class="odoccode"><span class="VALptr_of_raw_address"><span class="keyword">val</span> ptr_of_raw_address</span> : <code class="type">int64 -&gt; unit <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a></code></pre><div class="info">Convert the numeric representation of an address to a pointer</div>
<div class="info"><h3 id="3_TITLE">Array values</h3></div>
<div class="info"><h4 id="4_TITLE">C array values</h4></div>
<div class="ocaml_module" name="Array"><pre class="odoccode"><span class="keyword">module</span> <a href="http://mirage.github.io/ctypes/#Ctypes.Array" class="ocaml_internal">Array</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"><div class="info">Operations on C arrays.</div></div><div class="ocaml_content">
<pre class="odoccode"><span class="TYPEt"><span class="keyword">type</span> <code class="type">'a </code>t</span> = <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.array" class="ocaml_internal">array</a></code></pre>
<pre class="odoccode"><span class="VALget"><span class="keyword">val</span> get</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.Array.t" class="ocaml_internal">t</a> -&gt; int -&gt; 'a</code></pre><div class="info"><code class="code">get a n</code> returns the <code class="code">n</code>th element of the zero-indexed array <code class="code">a</code>. The
semantics for non-scalar types are non-copying, as for (!@).<p>You can also write <code class="code">a.(n)</code> instead of <code class="code">Array.get a n</code>.</p><p>Raise <code class="code">Invalid_argument &quot;index out of bounds&quot;</code> if <code class="code">n</code> is outside of the
range <code class="code">0</code> to <code class="code">(Array.length a - 1)</code>.</p></div>
<pre class="odoccode"><span class="VALset"><span class="keyword">val</span> set</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.Array.t" class="ocaml_internal">t</a> -&gt; int -&gt; 'a -&gt; unit</code></pre><div class="info"><code class="code">set a n v</code> overwrites the <code class="code">n</code>th element of the zero-indexed array <code class="code">a</code>
with <code class="code">v</code>.<p>You can also write <code class="code">a.(n) &lt;- v</code> instead of <code class="code">Array.set a n v</code>.</p><p>Raise <code class="code">Invalid_argument &quot;index out of bounds&quot;</code> if <code class="code">n</code> is outside of the
range <code class="code">0</code> to <code class="code">(Array.length a - 1)</code>.</p></div>
<pre class="odoccode"><span class="VALunsafe_get"><span class="keyword">val</span> unsafe_get</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.Array.t" class="ocaml_internal">t</a> -&gt; int -&gt; 'a</code></pre><div class="info"><code class="code">unsafe_get a n</code> behaves like <code class="code">get a n</code> except that the check that <code class="code">n</code>
between <code class="code">0</code> and <code class="code">(Array.length a - 1)</code> is not performed.</div>
<pre class="odoccode"><span class="VALunsafe_set"><span class="keyword">val</span> unsafe_set</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.Array.t" class="ocaml_internal">t</a> -&gt; int -&gt; 'a -&gt; unit</code></pre><div class="info"><code class="code">unsafe_set a n v</code> behaves like <code class="code">set a n v</code> except that the check that
<code class="code">n</code> between <code class="code">0</code> and <code class="code">(Array.length a - 1)</code> is not performed.</div>
<pre class="odoccode"><span class="VALof_list"><span class="keyword">val</span> of_list</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a> -&gt; 'a list -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.Array.t" class="ocaml_internal">t</a></code></pre><div class="info"><code class="code">of_list t l</code> builds an array of type <code class="code">t</code> of the same length as <code class="code">l</code>, and
writes the elements of <code class="code">l</code> to the corresponding elements of the array.</div>
<pre class="odoccode"><span class="VALto_list"><span class="keyword">val</span> to_list</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.Array.t" class="ocaml_internal">t</a> -&gt; 'a list</code></pre><div class="info"><code class="code">to_list a</code> builds a list of the same length as <code class="code">a</code> such that each
element of the list is the result of reading the corresponding element of
<code class="code">a</code>.</div>
<pre class="odoccode"><span class="VALlength"><span class="keyword">val</span> length</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.Array.t" class="ocaml_internal">t</a> -&gt; int</code></pre><div class="info">Return the number of elements of the given array.</div>
<pre class="odoccode"><span class="VALstart"><span class="keyword">val</span> start</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.Array.t" class="ocaml_internal">t</a> -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a></code></pre><div class="info">Return the address of the first element of the given array.</div>
<pre class="odoccode"><span class="VALfrom_ptr"><span class="keyword">val</span> from_ptr</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a> -&gt; int -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.Array.t" class="ocaml_internal">t</a></code></pre><div class="info"><code class="code">from_ptr p n</code> creates an <code class="code">n</code>-length array reference to the memory at
address <code class="code">p</code>.</div>
<pre class="odoccode"><span class="VALmake"><span class="keyword">val</span> make</span> : <code class="type">?finalise:('a <a href="http://mirage.github.io/ctypes/#Ctypes.Array.t" class="ocaml_internal">t</a> -&gt; unit) -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a> -&gt; ?initial:'a -&gt; int -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.Array.t" class="ocaml_internal">t</a></code></pre><div class="info"><code class="code">make t n</code> creates an <code class="code">n</code>-length array of type <code class="code">t</code>. If the optional
argument <code class="code">?initial</code> is supplied, it indicates a value that should be
used to initialise every element of the array. The argument <code class="code">?finalise</code>,
if present, will be called just before the memory is freed.</div>
<pre class="odoccode"><span class="VALelement_type"><span class="keyword">val</span> element_type</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.array" class="ocaml_internal">array</a> -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info">Retrieve the element type of an array.</div></div></div>
<div class="info"><h4 id="4_TITLE">Bigarray values</h4></div>
<pre class="odoccode"><span class="VALbigarray_start"><span class="keyword">val</span> bigarray_start</span> : <code class="type">&lt; ba_repr : 'c; bigarray : 'b; carray : 'd; dims : 'e; element : 'a &gt;
<a href="http://mirage.github.io/ctypes/#Ctypes.bigarray_class" class="ocaml_internal">bigarray_class</a> -&gt; 'b -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a></code></pre><div class="info">Return the address of the first element of the given Bigarray value.</div>
<pre class="odoccode"><span class="VALbigarray_of_ptr"><span class="keyword">val</span> bigarray_of_ptr</span> : <code class="type">&lt; ba_repr : 'f; bigarray : 'b; carray : 'c; dims : 'i; element : 'a &gt;
<a href="http://mirage.github.io/ctypes/#Ctypes.bigarray_class" class="ocaml_internal">bigarray_class</a> -&gt; 'i -&gt; ('a, 'f) Bigarray.kind -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a> -&gt; 'b</code></pre><div class="info">Convert a C pointer to a bigarray value.</div>
<pre class="odoccode"><span class="VALarray_of_bigarray"><span class="keyword">val</span> array_of_bigarray</span> : <code class="type">&lt; ba_repr : 'a; bigarray : 'b; carray : 'c; dims : 'd; element : 'e &gt;
<a href="http://mirage.github.io/ctypes/#Ctypes.bigarray_class" class="ocaml_internal">bigarray_class</a> -&gt; 'b -&gt; 'c</code></pre><div class="info">Convert a C array to a Bigarray value.</div>
<pre class="odoccode"><span class="VALbigarray_of_array"><span class="keyword">val</span> bigarray_of_array</span> : <code class="type">&lt; ba_repr : 'f; bigarray : 'b; carray : 'c <a href="http://mirage.github.io/ctypes/#Ctypes.array" class="ocaml_internal">array</a>; dims : 'i; element : 'a &gt;
<a href="http://mirage.github.io/ctypes/#Ctypes.bigarray_class" class="ocaml_internal">bigarray_class</a> -&gt; ('a, 'f) Bigarray.kind -&gt; 'c <a href="http://mirage.github.io/ctypes/#Ctypes.array" class="ocaml_internal">array</a> -&gt; 'b</code></pre><div class="info">Convert a Bigarray value to a C array.</div>
<div class="info"><h3 id="3_TITLE">Struct and union values</h3></div>
<pre class="odoccode"><span class="VALmake"><span class="keyword">val</span> make</span> : <code class="type">?finalise:(('a, 'b) <a href="http://mirage.github.io/ctypes/#Ctypes.structured" class="ocaml_internal">structured</a> -&gt; unit) -&gt;
('a, 'b) <a href="http://mirage.github.io/ctypes/#Ctypes.structured" class="ocaml_internal">structured</a> <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a> -&gt; ('a, 'b) <a href="http://mirage.github.io/ctypes/#Ctypes.structured" class="ocaml_internal">structured</a></code></pre><div class="info">Allocate a fresh, uninitialised structure or union value. The argument
<code class="code">?finalise</code>, if present, will be called just before the underlying memory is
freed.</div>
<pre class="odoccode"><span class="VALsetf"><span class="keyword">val</span> setf</span> : <code class="type">('b, 'c) <a href="http://mirage.github.io/ctypes/#Ctypes.structured" class="ocaml_internal">structured</a> -&gt; ('a, ('b, 'c) <a href="http://mirage.github.io/ctypes/#Ctypes.structured" class="ocaml_internal">structured</a>) <a href="http://mirage.github.io/ctypes/#Ctypes.field" class="ocaml_internal">field</a> -&gt; 'a -&gt; unit</code></pre><div class="info"><code class="code">setf s f v</code> overwrites the value of the field <code class="code">f</code> in the structure or
union <code class="code">s</code> with <code class="code">v</code>.</div>
<pre class="odoccode"><span class="VALgetf"><span class="keyword">val</span> getf</span> : <code class="type">('b, 'c) <a href="http://mirage.github.io/ctypes/#Ctypes.structured" class="ocaml_internal">structured</a> -&gt; ('a, ('b, 'c) <a href="http://mirage.github.io/ctypes/#Ctypes.structured" class="ocaml_internal">structured</a>) <a href="http://mirage.github.io/ctypes/#Ctypes.field" class="ocaml_internal">field</a> -&gt; 'a</code></pre><div class="info"><code class="code">getf s f</code> retrieves the value of the field <code class="code">f</code> in the structure or union
<code class="code">s</code>. The semantics for non-scalar types are non-copying, as for
(!@).</div>
<pre class="odoccode"><span class="VAL(@.)"><span class="keyword">val</span> (@.)</span> : <code class="type">('b, 'c) <a href="http://mirage.github.io/ctypes/#Ctypes.structured" class="ocaml_internal">structured</a> -&gt; ('a, ('b, 'c) <a href="http://mirage.github.io/ctypes/#Ctypes.structured" class="ocaml_internal">structured</a>) <a href="http://mirage.github.io/ctypes/#Ctypes.field" class="ocaml_internal">field</a> -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a></code></pre><div class="info"><code class="code">s @. f</code> computes the address of the field <code class="code">f</code> in the structure or union
value <code class="code">s</code>.</div>
<pre class="odoccode"><span class="VAL(|-&gt;)"><span class="keyword">val</span> (|-&gt;)</span> : <code class="type">('b, 'c) <a href="http://mirage.github.io/ctypes/#Ctypes.structured" class="ocaml_internal">structured</a> <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a> -&gt; ('a, ('b, 'c) <a href="http://mirage.github.io/ctypes/#Ctypes.structured" class="ocaml_internal">structured</a>) <a href="http://mirage.github.io/ctypes/#Ctypes.field" class="ocaml_internal">field</a> -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a></code></pre><div class="info"><code class="code">p |-&gt; f</code> computes the address of the field <code class="code">f</code> in the structure or union
value pointed to by <code class="code">p</code>.</div>
<pre class="odoccode"><span class="VALoffsetof"><span class="keyword">val</span> offsetof</span> : <code class="type">('a, 'b <a href="http://mirage.github.io/ctypes/#Ctypes.structure" class="ocaml_internal">structure</a>) <a href="http://mirage.github.io/ctypes/#Ctypes.field" class="ocaml_internal">field</a> -&gt; int</code></pre><div class="info"><code class="code">offsetof f</code> returns the offset, in bytes, of the field <code class="code">f</code> from the
beginning of the associated struct type.</div>
<pre class="odoccode"><span class="VALfield_type"><span class="keyword">val</span> field_type</span> : <code class="type">('a, 'b) <a href="http://mirage.github.io/ctypes/#Ctypes.field" class="ocaml_internal">field</a> -&gt; 'a <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a></code></pre><div class="info"><code class="code">field_type f</code> returns the type of the field <code class="code">f</code>.</div>
<pre class="odoccode"><span class="VALaddr"><span class="keyword">val</span> addr</span> : <code class="type">('a, 'b) <a href="http://mirage.github.io/ctypes/#Ctypes.structured" class="ocaml_internal">structured</a> -&gt; ('a, 'b) <a href="http://mirage.github.io/ctypes/#Ctypes.structured" class="ocaml_internal">structured</a> <a href="http://mirage.github.io/ctypes/#Ctypes.ptr" class="ocaml_internal">ptr</a></code></pre><div class="info"><code class="code">addr s</code> returns the address of the structure or union <code class="code">s</code>.</div>
<div class="info"><h3 id="3_TITLE">Coercions</h3></div>
<pre class="odoccode"><span class="VALcoerce"><span class="keyword">val</span> coerce</span> : <code class="type">'a <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a> -&gt; 'b <a href="http://mirage.github.io/ctypes/#Ctypes.typ" class="ocaml_internal">typ</a> -&gt; 'a -&gt; 'b</code></pre><div class="info"><code class="code">coerce t1 t2</code> returns a coercion function between the types represented
by <code class="code">t1</code> and <code class="code">t2</code>. If <code class="code">t1</code> cannot be coerced to <code class="code">t2</code>, <code class="code">coerce</code> raises
Uncoercible.<p>The following coercions are currently supported:</p><ul><li>All pointer types are intercoercible.</li><li>Any type may be coerced to void</li><li>There is a coercion between a view and another type <code class="code">t</code> (in either
direction) if there is a coercion between the representation type
underlying the view and <code class="code">t</code>.</li></ul>The set of supported coercions is subject to change. Future versions of
ctypes may both add new types of coercion and restrict the existing
coercions.</div>
<div class="info"><h2 id="2_TITLE">Exceptions</h2></div>
<pre class="odoccode"><span class="EXCEPTIONUnsupported"><span class="keyword">exception</span> Unsupported</span> <span class="keyword">of</span> <code class="type">string</code></pre><div class="info">An attempt was made to use a feature not currently supported by ctypes.
In practice this refers to attempts to use an union, array or abstract
type as an argument or return type of a function.</div>
<pre class="odoccode"><span class="EXCEPTIONModifyingSealedType"><span class="keyword">exception</span> ModifyingSealedType</span> <span class="keyword">of</span> <code class="type">string</code></pre><div class="info">An attempt was made to modify a sealed struct or union type
description.</div>
<pre class="odoccode"><span class="EXCEPTIONIncompleteType"><span class="keyword">exception</span> IncompleteType</span></pre><div class="info">An attempt was made to compute the size or alignment of an incomplete
type.<p>The incomplete types are struct and union types that have not been sealed,
and the void type.</p><p>It is not permitted to compute the size or alignment requirements of an
incomplete type, to use it as a struct or union member, to read or write a
value of the type through a pointer or to use it as the referenced type in
pointer arithmetic. Additionally, incomplete struct and union types
cannot be used as argument or return types.</p></div>
<pre class="odoccode"><span class="EXCEPTIONUncoercible"><span class="keyword">exception</span> Uncoercible</span></pre><div class="info">An attempt was made to coerce between uncoercible types.</div>
</div></div>