<div class="ocaml_top"><div class="ocaml_summary"/>
<div class="ocaml_content"><pre class="odoccode"><span class="TYPEt"><span class="keyword">type</span> t</span></pre><div class="info">An open connection to an NBD server</div>
<pre class="odoccode"><span class="TYPEsize"><span class="keyword">type</span> size</span> = <code class="type">int64</code></pre><div class="info">The size of a remote disk</div>
<pre class="odoccode"><code><span class="TYPEchannel"><span class="keyword">type</span> channel</span> = {</code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTchannel.read">read</span> : <code class="type"><a href="http://mirage.github.io/cstruct/#Cstruct.t">Cstruct.t</a> -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTchannel.write">write</span> : <code class="type"><a href="http://mirage.github.io/cstruct/#Cstruct.t">Cstruct.t</a> -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code>;</code></td></tr><tr><td>}</td></tr></table>
<pre class="odoccode"><span class="VALopen_channel"><span class="keyword">val</span> open_channel</span> : <code class="type">string -&gt; int -&gt; <a href="http://mirage.github.io/nbd/#Nbd_lwt_client.channel" class="ocaml_internal">channel</a> <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info"><code class="code">open_channel hostname port</code> connects to host:port and returns
a channel.</div>
<pre class="odoccode"><span class="VALnegotiate"><span class="keyword">val</span> negotiate</span> : <code class="type"><a href="http://mirage.github.io/nbd/#Nbd_lwt_client.channel" class="ocaml_internal">channel</a> -&gt; (<a href="http://mirage.github.io/nbd/#Nbd_lwt_client.t" class="ocaml_internal">t</a> * <a href="http://mirage.github.io/nbd/#Nbd_lwt_client.size" class="ocaml_internal">size</a> * <a href="http://mirage.github.io/nbd/#Nbd.Flag.t">Nbd.Flag.t</a> list) <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info"><code class="code">negotiate channel</code> takes an already-connected channel and
performs the initial protocol negotiation. Returns
(remote disk size * flags)</div>
<pre class="odoccode"><span class="VALwrite"><span class="keyword">val</span> write</span> : <code class="type"><a href="http://mirage.github.io/nbd/#Nbd_lwt_client.t" class="ocaml_internal">t</a> -&gt; <a href="http://mirage.github.io/cstruct/#Cstruct.t">Cstruct.t</a> -&gt; int64 -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info"><code class="code">write t buf dst_offset</code> writes the whole string <code class="code">buf</code> to
<code class="code">dst_offset</code> in the remote disk.</div>
<pre class="odoccode"><span class="VALread"><span class="keyword">val</span> read</span> : <code class="type"><a href="http://mirage.github.io/nbd/#Nbd_lwt_client.t" class="ocaml_internal">t</a> -&gt; int64 -&gt; int32 -&gt; <a href="http://mirage.github.io/cstruct/#Cstruct.t">Cstruct.t</a> <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info"><code class="code">read t offset len</code> reads <code class="code">len</code> bytes from the remote disk starting
at <code class="code">offset</code></div>
</div></div>