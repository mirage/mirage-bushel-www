<div class="ocaml_top"><div class="ocaml_summary"/>
<div class="ocaml_content"><div class="ocaml_modtype" name="IO_PAGE"><pre class="odoccode"><span class="keyword">module type</span> <a href="http://mirage.github.io/mirage-types/#V1:IO_PAGE" class="ocaml_internal">IO_PAGE</a> = <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<div class="info">Memory allocation interface.</div>
<pre class="odoccode"><span class="TYPEbuf"><span class="keyword">type</span> buf</span></pre><div class="info">Type of a C buffer (usually Cstruct)</div>
<pre class="odoccode"><span class="TYPEt"><span class="keyword">type</span> t</span> = <code class="type">(char, Bigarray.int8_unsigned_elt, Bigarray.c_layout) Bigarray.Array1.t</code></pre><div class="info">Type of memory blocks.</div>
<pre class="odoccode"><span class="VALget"><span class="keyword">val</span> get</span> : <code class="type">int -&gt; <a href="http://mirage.github.io/mirage-types/#V1:IO_PAGE.t" class="ocaml_internal">t</a></code></pre><div class="info"><code class="code">get n</code> allocates and returns a memory block of <code class="code">n</code> pages. If
there is not enough memory, the unikernel will terminate.</div>
<pre class="odoccode"><span class="VALget_order"><span class="keyword">val</span> get_order</span> : <code class="type">int -&gt; <a href="http://mirage.github.io/mirage-types/#V1:IO_PAGE.t" class="ocaml_internal">t</a></code></pre><div class="info"><code class="code">get_order i</code> is <code class="code">get (1 lsl i)</code>.</div>
<pre class="odoccode"><span class="VALpages"><span class="keyword">val</span> pages</span> : <code class="type">int -&gt; <a href="http://mirage.github.io/mirage-types/#V1:IO_PAGE.t" class="ocaml_internal">t</a> list</code></pre><div class="info"><code class="code">pages n</code> allocates a memory block of <code class="code">n</code> pages and return the the
list of pages allocated.</div>
<pre class="odoccode"><span class="VALpages_order"><span class="keyword">val</span> pages_order</span> : <code class="type">int -&gt; <a href="http://mirage.github.io/mirage-types/#V1:IO_PAGE.t" class="ocaml_internal">t</a> list</code></pre><div class="info"><code class="code">pages_order i</code> is <code class="code">pages (1 lsl i)</code>.</div>
<pre class="odoccode"><span class="VALlength"><span class="keyword">val</span> length</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:IO_PAGE.t" class="ocaml_internal">t</a> -&gt; int</code></pre><div class="info"><code class="code">length t</code> is the size of <code class="code">t</code>, in bytes.</div>
<pre class="odoccode"><span class="VALto_cstruct"><span class="keyword">val</span> to_cstruct</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:IO_PAGE.t" class="ocaml_internal">t</a> -&gt; <a href="http://mirage.github.io/mirage-types/#V1:IO_PAGE.buf" class="ocaml_internal">buf</a></code></pre>
<pre class="odoccode"><span class="VALto_string"><span class="keyword">val</span> to_string</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:IO_PAGE.t" class="ocaml_internal">t</a> -&gt; string</code></pre>
<pre class="odoccode"><span class="VALto_pages"><span class="keyword">val</span> to_pages</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:IO_PAGE.t" class="ocaml_internal">t</a> -&gt; <a href="http://mirage.github.io/mirage-types/#V1:IO_PAGE.t" class="ocaml_internal">t</a> list</code></pre><div class="info"><code class="code">to_pages t</code> is a list of <code class="code">size</code> memory blocks of one page each,
where <code class="code">size</code> is the size of <code class="code">t</code> in pages.</div>
<pre class="odoccode"><span class="VALstring_blit"><span class="keyword">val</span> string_blit</span> : <code class="type">string -&gt; int -&gt; <a href="http://mirage.github.io/mirage-types/#V1:IO_PAGE.t" class="ocaml_internal">t</a> -&gt; int -&gt; int -&gt; unit</code></pre><div class="info"><code class="code">string_blit src srcoff dst dstoff len</code> copies <code class="code">len</code> bytes from
string <code class="code">src</code>, starting at byte number <code class="code">srcoff</code>, to memory block
<code class="code">dst</code>, starting at byte number dstoff.</div>
<pre class="odoccode"><span class="VALblit"><span class="keyword">val</span> blit</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:IO_PAGE.t" class="ocaml_internal">t</a> -&gt; <a href="http://mirage.github.io/mirage-types/#V1:IO_PAGE.t" class="ocaml_internal">t</a> -&gt; unit</code></pre><div class="info"><code class="code">blit t1 t2</code> is the same as Bigarray.Array1.blit.</div>
<pre class="odoccode"><span class="VALround_to_page_size"><span class="keyword">val</span> round_to_page_size</span> : <code class="type">int -&gt; int</code></pre><div class="info"><code class="code">round_to_page_size n</code> returns the number of bytes that will be
allocated for storing <code class="code">n</code> bytes in memory</div></div></div>
<div class="ocaml_modtype" name="CLOCK"><pre class="odoccode"><span class="keyword">module type</span> <a href="http://mirage.github.io/mirage-types/#V1:CLOCK" class="ocaml_internal">CLOCK</a> = <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<div class="info">Clock operations.
Currently read-only to retrieve the time in various formats.</div>
<pre class="odoccode"><code><span class="TYPEtm"><span class="keyword">type</span> tm</span> = {</code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTtm.tm_sec">tm_sec</span> : <code class="type">int</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">Seconds 0..60</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTtm.tm_min">tm_min</span> : <code class="type">int</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">Minutes 0..59</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTtm.tm_hour">tm_hour</span> : <code class="type">int</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">Hours 0..23</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTtm.tm_mday">tm_mday</span> : <code class="type">int</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">Day of month 1..31</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTtm.tm_mon">tm_mon</span> : <code class="type">int</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">Month of year 0..11</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTtm.tm_year">tm_year</span> : <code class="type">int</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">Year - 1900</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTtm.tm_wday">tm_wday</span> : <code class="type">int</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">Day of week (Sunday is 0)</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTtm.tm_yday">tm_yday</span> : <code class="type">int</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">Day of year 0..365</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTtm.tm_isdst">tm_isdst</span> : <code class="type">bool</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">Daylight time savings in effect</div></td></tr><tr><td>}</td></tr></table><div class="info">The type representing wallclock time and calendar date.</div>
<pre class="odoccode"><span class="VALtime"><span class="keyword">val</span> time</span> : <code class="type">unit -&gt; float</code></pre><div class="info">Return the current time since 00:00:00 GMT, Jan. 1, 1970, in
seconds.</div>
<pre class="odoccode"><span class="VALgmtime"><span class="keyword">val</span> gmtime</span> : <code class="type">float -&gt; <a href="http://mirage.github.io/mirage-types/#V1:CLOCK.tm" class="ocaml_internal">tm</a></code></pre><div class="info">Convert a time in seconds, as returned by time, into a
date and a time. Assumes UTC (Coordinated Universal Time), also
known as GMT.</div></div></div>
<div class="ocaml_modtype" name="DEVICE"><pre class="odoccode"><span class="keyword">module type</span> <a href="http://mirage.github.io/mirage-types/#V1:DEVICE" class="ocaml_internal">DEVICE</a> = <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<div class="info">Device operations.
Defines the functions to connect and disconnect any device</div>
<pre class="odoccode"><span class="TYPEio"><span class="keyword">type</span> <code class="type">+'a </code>io</span></pre><div class="info">A potentially blocking I/O operation</div>
<pre class="odoccode"><span class="TYPEt"><span class="keyword">type</span> t</span></pre><div class="info">The type representing the internal state of the device</div>
<pre class="odoccode"><span class="TYPEerror"><span class="keyword">type</span> error</span></pre><div class="info">An error signalled by the device, normally returned after a
connection attempt</div>
<pre class="odoccode"><span class="TYPEid"><span class="keyword">type</span> id</span></pre><div class="info">Type defining an identifier for this device that uniquely
identifies it among a device tree.</div>
<pre class="odoccode"><span class="VALid"><span class="keyword">val</span> id</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:DEVICE.t" class="ocaml_internal">t</a> -&gt; <a href="http://mirage.github.io/mirage-types/#V1:DEVICE.id" class="ocaml_internal">id</a></code></pre><div class="info">Return the identifier that was used to construct this device</div>
<pre class="odoccode"><span class="VALconnect"><span class="keyword">val</span> connect</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:DEVICE.id" class="ocaml_internal">id</a> -&gt; [ `Error of <a href="http://mirage.github.io/mirage-types/#V1:DEVICE.error" class="ocaml_internal">error</a> | `Ok of <a href="http://mirage.github.io/mirage-types/#V1:DEVICE.t" class="ocaml_internal">t</a> ] <a href="http://mirage.github.io/mirage-types/#V1:DEVICE.io" class="ocaml_internal">io</a></code></pre><div class="info">Connect to the device identified by <code class="code">id</code></div>
<pre class="odoccode"><span class="VALdisconnect"><span class="keyword">val</span> disconnect</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:DEVICE.t" class="ocaml_internal">t</a> -&gt; unit <a href="http://mirage.github.io/mirage-types/#V1:DEVICE.io" class="ocaml_internal">io</a></code></pre><div class="info">Disconnect from the device. While this might take some
time to complete, it can never result in an error.</div></div></div>
<div class="ocaml_modtype" name="KV_RO"><pre class="odoccode"><span class="keyword">module type</span> <a href="http://mirage.github.io/mirage-types/#V1:KV_RO" class="ocaml_internal">KV_RO</a> = <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<div class="info">Static Key/value store.</div>
<pre class="odoccode"><code><span class="TYPEerror"><span class="keyword">type</span> error</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTerror.Unknown_key"><span class="constructor">Unknown_key</span></span> <span class="keyword">of</span> <code class="type">string</code></code></td></tr></table>
<div class="ocaml_include" path="http://mirage.github.io/mirage-types/#V1:DEVICE" items="[]" types="[&quot;id&quot;,&quot;t&quot;,&quot;io&quot;]"><pre class="ocaml_include_handle"><span class="keyword">include</span> <code class="type"><code class="code"><a href="http://mirage.github.io/mirage-types/#V1:DEVICE" class="ocaml_internal">DEVICE</a></code> with type <a href="http://mirage.github.io/mirage-types/#V1:DEVICE.error" class="ocaml_internal">error</a> := <a href="http://mirage.github.io/mirage-types/#V1:KV_RO.error" class="ocaml_internal">error</a></code></pre><div class="ocaml_summary"/></div>
<pre class="odoccode"><span class="TYPEpage_aligned_buffer"><span class="keyword">type</span> page_aligned_buffer</span></pre><div class="info">Abstract type for a page-aligned memory buffer</div>
<pre class="odoccode"><span class="VALread"><span class="keyword">val</span> read</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:KV_RO.t" class="ocaml_internal">t</a> -&gt;
string -&gt;
int -&gt; int -&gt; [ `Error of <a href="http://mirage.github.io/mirage-types/#V1:KV_RO.error" class="ocaml_internal">error</a> | `Ok of <a href="http://mirage.github.io/mirage-types/#V1:KV_RO.page_aligned_buffer" class="ocaml_internal">page_aligned_buffer</a> list ] <a href="http://mirage.github.io/mirage-types/#V1:KV_RO.io" class="ocaml_internal">io</a></code></pre><div class="info"><code class="code">read t key offset length</code> reads up to <code class="code">length</code> bytes from the value
associated with <code class="code">key</code>. If less data is returned than requested, this
indicates the end of the value.</div>
<pre class="odoccode"><span class="VALsize"><span class="keyword">val</span> size</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:KV_RO.t" class="ocaml_internal">t</a> -&gt; string -&gt; [ `Error of <a href="http://mirage.github.io/mirage-types/#V1:KV_RO.error" class="ocaml_internal">error</a> | `Ok of int64 ] <a href="http://mirage.github.io/mirage-types/#V1:KV_RO.io" class="ocaml_internal">io</a></code></pre><div class="info">Get the value size.</div></div></div>
<div class="ocaml_modtype" name="CONSOLE"><pre class="odoccode"><span class="keyword">module type</span> <a href="http://mirage.github.io/mirage-types/#V1:CONSOLE" class="ocaml_internal">CONSOLE</a> = <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"><div class="info">Text console input/output operations.</div></div><div class="ocaml_content">
<pre class="odoccode"><span class="TYPEerror"><span class="keyword">type</span> error</span> = <code class="type">[ `Invalid_console of string ]</code></pre>
<div class="ocaml_include" path="http://mirage.github.io/mirage-types/#V1:DEVICE" items="[]" types="[&quot;id&quot;,&quot;t&quot;,&quot;io&quot;]"><pre class="ocaml_include_handle"><span class="keyword">include</span> <code class="type"><code class="code"><a href="http://mirage.github.io/mirage-types/#V1:DEVICE" class="ocaml_internal">DEVICE</a></code> with type <a href="http://mirage.github.io/mirage-types/#V1:DEVICE.error" class="ocaml_internal">error</a> := <a href="http://mirage.github.io/mirage-types/#V1:CONSOLE.error" class="ocaml_internal">error</a></code></pre><div class="ocaml_summary"/></div>
<pre class="odoccode"><span class="VALwrite"><span class="keyword">val</span> write</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:CONSOLE.t" class="ocaml_internal">t</a> -&gt; string -&gt; int -&gt; int -&gt; int</code></pre><div class="info"><code class="code">write t buf off len</code> writes up to <code class="code">len</code> chars of <code class="code">String.sub buf
      off len</code> to the console <code class="code">t</code> and returns the number of bytes
written. Raises Invalid_argument if <code class="code">len &gt; buf - off</code>.</div>
<pre class="odoccode"><span class="VALwrite_all"><span class="keyword">val</span> write_all</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:CONSOLE.t" class="ocaml_internal">t</a> -&gt; string -&gt; int -&gt; int -&gt; unit <a href="http://mirage.github.io/mirage-types/#V1:CONSOLE.io" class="ocaml_internal">io</a></code></pre><div class="info"><code class="code">write_all t buf off len</code> is a thread that writes <code class="code">String.sub buf
      off len</code> to the console <code class="code">t</code> and returns when done. Raises
Invalid_argument if <code class="code">len &gt; buf - off</code>.</div>
<pre class="odoccode"><span class="VALlog"><span class="keyword">val</span> log</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:CONSOLE.t" class="ocaml_internal">t</a> -&gt; string -&gt; unit</code></pre><div class="info"><code class="code">log str</code> writes as much characters of <code class="code">str</code> that can be written
in one write operation to the console <code class="code">t</code>, then writes
&quot;\r\n&quot; to it.</div>
<pre class="odoccode"><span class="VALlog_s"><span class="keyword">val</span> log_s</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:CONSOLE.t" class="ocaml_internal">t</a> -&gt; string -&gt; unit <a href="http://mirage.github.io/mirage-types/#V1:CONSOLE.io" class="ocaml_internal">io</a></code></pre><div class="info"><code class="code">log_s str</code> is a thread that writes <code class="code">str ^ &quot;\r\n&quot;</code> in the
console <code class="code">t</code>.</div></div></div>
<div class="ocaml_modtype" name="BLOCK"><pre class="odoccode"><span class="keyword">module type</span> <a href="http://mirage.github.io/mirage-types/#V1:BLOCK" class="ocaml_internal">BLOCK</a> = <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><span class="TYPEpage_aligned_buffer"><span class="keyword">type</span> page_aligned_buffer</span></pre><div class="info">Abstract type for a page-aligned memory buffer</div>
<pre class="odoccode"><span class="TYPEerror"><span class="keyword">type</span> error</span> = <code class="type">[ `Disconnected | `Is_read_only | `Unimplemented | `Unknown of string ]</code></pre><div class="info">IO operation errors</div>
<div class="ocaml_include" path="http://mirage.github.io/mirage-types/#V1:DEVICE" items="[]" types="[&quot;id&quot;,&quot;t&quot;,&quot;io&quot;]"><pre class="ocaml_include_handle"><span class="keyword">include</span> <code class="type"><code class="code"><a href="http://mirage.github.io/mirage-types/#V1:DEVICE" class="ocaml_internal">DEVICE</a></code> with type <a href="http://mirage.github.io/mirage-types/#V1:DEVICE.error" class="ocaml_internal">error</a> := <a href="http://mirage.github.io/mirage-types/#V1:BLOCK.error" class="ocaml_internal">error</a></code></pre><div class="ocaml_summary"/></div>
<pre class="odoccode"><code><span class="TYPEinfo"><span class="keyword">type</span> info</span> = {</code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTinfo.read_write">read_write</span> : <code class="type">bool</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">True if we can write, false if read/only</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTinfo.sector_size">sector_size</span> : <code class="type">int</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">Octets per sector</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTinfo.size_sectors">size_sectors</span> : <code class="type">int64</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">Total sectors per device</div></td></tr><tr><td>}</td></tr></table><div class="info">Characteristics of the block device. Note some devices may be able
to make themselves bigger over time.</div>
<pre class="odoccode"><span class="VALget_info"><span class="keyword">val</span> get_info</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:BLOCK.t" class="ocaml_internal">t</a> -&gt; <a href="http://mirage.github.io/mirage-types/#V1:BLOCK.info" class="ocaml_internal">info</a> <a href="http://mirage.github.io/mirage-types/#V1:BLOCK.io" class="ocaml_internal">io</a></code></pre><div class="info">Query the characteristics of a specific block device</div>
<pre class="odoccode"><span class="VALread"><span class="keyword">val</span> read</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:BLOCK.t" class="ocaml_internal">t</a> -&gt;
int64 -&gt; <a href="http://mirage.github.io/mirage-types/#V1:BLOCK.page_aligned_buffer" class="ocaml_internal">page_aligned_buffer</a> list -&gt; [ `Error of <a href="http://mirage.github.io/mirage-types/#V1:BLOCK.error" class="ocaml_internal">error</a> | `Ok of unit ] <a href="http://mirage.github.io/mirage-types/#V1:BLOCK.io" class="ocaml_internal">io</a></code></pre><div class="info"><code class="code">read device sector_start buffers</code> returns a blocking IO operation which
attempts to fill <code class="code">buffers</code> with data starting at <code class="code">sector_start</code>.
Each of <code class="code">buffers</code> must be a whole number of sectors in length. The list
of buffers can be of any length.</div>
<pre class="odoccode"><span class="VALwrite"><span class="keyword">val</span> write</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:BLOCK.t" class="ocaml_internal">t</a> -&gt;
int64 -&gt; <a href="http://mirage.github.io/mirage-types/#V1:BLOCK.page_aligned_buffer" class="ocaml_internal">page_aligned_buffer</a> list -&gt; [ `Error of <a href="http://mirage.github.io/mirage-types/#V1:BLOCK.error" class="ocaml_internal">error</a> | `Ok of unit ] <a href="http://mirage.github.io/mirage-types/#V1:BLOCK.io" class="ocaml_internal">io</a></code></pre><div class="info"><code class="code">write device sector_start buffers</code> returns a blocking IO operation which
attempts to write the data contained within <code class="code">buffers</code> to <code class="code">t</code> starting
at <code class="code">sector_start</code>. When the IO operation completes then all writes have been
persisted.<p>Once submitted, it is not possible to cancel a request and there is no timeout.</p><p>The operation may fail with
<code class="code">`Unimplemented</code>: the operation has not been implemented, no data has been written
<code class="code">`Is_read_only</code>: the device is read-only, no data has been written
<code class="code">`Disconnected</code>: the device has been disconnected at application request,
an unknown amount of data has been written
<code class="code">`Unknown</code>: some other permanent, fatal error (e.g. disk is on fire), where
an unknown amount of data has been written</p><p>Each of <code class="code">buffers</code> must be a whole number of sectors in length. The list
of buffers can be of any length.</p><p>The data will not be copied, so the supplied buffers must not be re-used
until the IO operation completes.</p></div></div></div>
<div class="ocaml_modtype" name="NETWORK"><pre class="odoccode"><span class="keyword">module type</span> <a href="http://mirage.github.io/mirage-types/#V1:NETWORK" class="ocaml_internal">NETWORK</a> = <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><span class="TYPEpage_aligned_buffer"><span class="keyword">type</span> page_aligned_buffer</span></pre><div class="info">Abstract type for a page-aligned memory buffer</div>
<pre class="odoccode"><span class="TYPEbuffer"><span class="keyword">type</span> buffer</span></pre><div class="info">Abstract type for a memory buffer that may not be page aligned</div>
<pre class="odoccode"><span class="TYPEerror"><span class="keyword">type</span> error</span> = <code class="type">[ `Disconnected | `Unimplemented | `Unknown of string ]</code></pre><div class="info">IO operation errors</div>
<pre class="odoccode"><span class="TYPEmacaddr"><span class="keyword">type</span> macaddr</span></pre><div class="info">Unique MAC identifier for the device</div>
<div class="ocaml_include" path="http://mirage.github.io/mirage-types/#V1:DEVICE" items="[]" types="[&quot;id&quot;,&quot;t&quot;,&quot;io&quot;]"><pre class="ocaml_include_handle"><span class="keyword">include</span> <code class="type"><code class="code"><a href="http://mirage.github.io/mirage-types/#V1:DEVICE" class="ocaml_internal">DEVICE</a></code> with type <a href="http://mirage.github.io/mirage-types/#V1:DEVICE.error" class="ocaml_internal">error</a> := <a href="http://mirage.github.io/mirage-types/#V1:NETWORK.error" class="ocaml_internal">error</a></code></pre><div class="ocaml_summary"/></div>
<pre class="odoccode"><span class="VALwrite"><span class="keyword">val</span> write</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:NETWORK.t" class="ocaml_internal">t</a> -&gt; <a href="http://mirage.github.io/mirage-types/#V1:NETWORK.buffer" class="ocaml_internal">buffer</a> -&gt; unit <a href="http://mirage.github.io/mirage-types/#V1:NETWORK.io" class="ocaml_internal">io</a></code></pre><div class="info"><code class="code">write nf buf</code> outputs <code class="code">buf</code> to netfront <code class="code">nf</code>.</div>
<pre class="odoccode"><span class="VALwritev"><span class="keyword">val</span> writev</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:NETWORK.t" class="ocaml_internal">t</a> -&gt; <a href="http://mirage.github.io/mirage-types/#V1:NETWORK.buffer" class="ocaml_internal">buffer</a> list -&gt; unit <a href="http://mirage.github.io/mirage-types/#V1:NETWORK.io" class="ocaml_internal">io</a></code></pre><div class="info"><code class="code">writev nf bufs</code> output a list of buffers to netfront <code class="code">nf</code> as a
single packet.</div>
<pre class="odoccode"><span class="VALlisten"><span class="keyword">val</span> listen</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:NETWORK.t" class="ocaml_internal">t</a> -&gt; (<a href="http://mirage.github.io/mirage-types/#V1:NETWORK.buffer" class="ocaml_internal">buffer</a> -&gt; unit <a href="http://mirage.github.io/mirage-types/#V1:NETWORK.io" class="ocaml_internal">io</a>) -&gt; unit <a href="http://mirage.github.io/mirage-types/#V1:NETWORK.io" class="ocaml_internal">io</a></code></pre><div class="info"><code class="code">listen nf fn</code> is a blocking operation that calls <code class="code">fn buf</code> with
every packet that is read from the interface. It returns as soon
as it has initialised, and the function can be stopped by calling
<code class="code">disconnect</code> in the device layer.</div>
<pre class="odoccode"><span class="VALmac"><span class="keyword">val</span> mac</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:NETWORK.t" class="ocaml_internal">t</a> -&gt; <a href="http://mirage.github.io/mirage-types/#V1:NETWORK.macaddr" class="ocaml_internal">macaddr</a></code></pre><div class="info"><code class="code">mac nf</code> is the MAC address of <code class="code">nf</code>.</div>
<pre class="odoccode"><code><span class="TYPEstats"><span class="keyword">type</span> stats</span> = {</code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTstats.rx_bytes">rx_bytes</span> : <code class="type">int64</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTstats.rx_pkts">rx_pkts</span> : <code class="type">int32</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTstats.tx_bytes">tx_bytes</span> : <code class="type">int64</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="keyword">mutable</span> <span class="TYPEELTstats.tx_pkts">tx_pkts</span> : <code class="type">int32</code>;</code></td></tr><tr><td>}</td></tr></table>
<pre class="odoccode"><span class="VALget_stats_counters"><span class="keyword">val</span> get_stats_counters</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:NETWORK.t" class="ocaml_internal">t</a> -&gt; <a href="http://mirage.github.io/mirage-types/#V1:NETWORK.stats" class="ocaml_internal">stats</a></code></pre>
<pre class="odoccode"><span class="VALreset_stats_counters"><span class="keyword">val</span> reset_stats_counters</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:NETWORK.t" class="ocaml_internal">t</a> -&gt; unit</code></pre></div></div>
<div class="ocaml_modtype" name="FS"><pre class="odoccode"><span class="keyword">module type</span> <a href="http://mirage.github.io/mirage-types/#V1:FS" class="ocaml_internal">FS</a> = <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><span class="TYPEblock_device_error"><span class="keyword">type</span> block_device_error</span></pre><div class="info">Abstract type representing an error from the block layer</div>
<pre class="odoccode"><span class="TYPEerror"><span class="keyword">type</span> error</span> = <code class="type">[ `Block_device of <a href="http://mirage.github.io/mirage-types/#V1:FS.block_device_error" class="ocaml_internal">block_device_error</a>
| `Directory_not_empty of string
| `File_already_exists of string
| `Format_not_recognised of string
| `Is_a_directory of string
| `No_directory_entry of string * string
| `No_space
| `Not_a_directory of string
| `Unknown_error of string ]</code></pre>
<div class="ocaml_include" path="http://mirage.github.io/mirage-types/#V1:DEVICE" items="[]" types="[&quot;id&quot;,&quot;t&quot;,&quot;io&quot;]"><pre class="ocaml_include_handle"><span class="keyword">include</span> <code class="type"><code class="code"><a href="http://mirage.github.io/mirage-types/#V1:DEVICE" class="ocaml_internal">DEVICE</a></code> with type <a href="http://mirage.github.io/mirage-types/#V1:DEVICE.error" class="ocaml_internal">error</a> := <a href="http://mirage.github.io/mirage-types/#V1:FS.error" class="ocaml_internal">error</a></code></pre><div class="ocaml_summary"/></div>
<pre class="odoccode"><span class="TYPEpage_aligned_buffer"><span class="keyword">type</span> page_aligned_buffer</span></pre><div class="info">Abstract type for a page-aligned memory buffer</div>
<pre class="odoccode"><span class="VALread"><span class="keyword">val</span> read</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:FS.t" class="ocaml_internal">t</a> -&gt;
string -&gt;
int -&gt; int -&gt; [ `Error of <a href="http://mirage.github.io/mirage-types/#V1:FS.error" class="ocaml_internal">error</a> | `Ok of <a href="http://mirage.github.io/mirage-types/#V1:FS.page_aligned_buffer" class="ocaml_internal">page_aligned_buffer</a> list ] <a href="http://mirage.github.io/mirage-types/#V1:FS.io" class="ocaml_internal">io</a></code></pre><div class="info"><code class="code">read t key offset length</code> reads up to <code class="code">length</code> bytes from the value
associated with <code class="code">key</code>. If less data is returned than requested, this
indicates the end of the value.</div>
<pre class="odoccode"><span class="VALsize"><span class="keyword">val</span> size</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:FS.t" class="ocaml_internal">t</a> -&gt; string -&gt; [ `Error of <a href="http://mirage.github.io/mirage-types/#V1:FS.error" class="ocaml_internal">error</a> | `Ok of int64 ] <a href="http://mirage.github.io/mirage-types/#V1:FS.io" class="ocaml_internal">io</a></code></pre><div class="info">Get the value size.</div>
<pre class="odoccode"><code><span class="TYPEstat"><span class="keyword">type</span> stat</span> = {</code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstat.filename">filename</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">Filename within the enclosing directory</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstat.read_only">read_only</span> : <code class="type">bool</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">True means the contents are read-only</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstat.directory">directory</span> : <code class="type">bool</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">True means the entity is a directory; false means a file</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstat.size">size</span> : <code class="type">int64</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">Size of the entity in bytes</div></td></tr><tr><td>}</td></tr></table><div class="info">Per-file/directory statistics</div>
<pre class="odoccode"><span class="VALformat"><span class="keyword">val</span> format</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:FS.t" class="ocaml_internal">t</a> -&gt; int64 -&gt; [ `Error of <a href="http://mirage.github.io/mirage-types/#V1:FS.error" class="ocaml_internal">error</a> | `Ok of unit ] <a href="http://mirage.github.io/mirage-types/#V1:FS.io" class="ocaml_internal">io</a></code></pre><div class="info"><code class="code">format t size</code> erases the contents of <code class="code">t</code> and creates an empty filesystem
of size <code class="code">size</code> bytes</div>
<pre class="odoccode"><span class="VALcreate"><span class="keyword">val</span> create</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:FS.t" class="ocaml_internal">t</a> -&gt; string -&gt; [ `Error of <a href="http://mirage.github.io/mirage-types/#V1:FS.error" class="ocaml_internal">error</a> | `Ok of unit ] <a href="http://mirage.github.io/mirage-types/#V1:FS.io" class="ocaml_internal">io</a></code></pre><div class="info"><code class="code">create t path</code> creates an empty file at <code class="code">path</code></div>
<pre class="odoccode"><span class="VALmkdir"><span class="keyword">val</span> mkdir</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:FS.t" class="ocaml_internal">t</a> -&gt; string -&gt; [ `Error of <a href="http://mirage.github.io/mirage-types/#V1:FS.error" class="ocaml_internal">error</a> | `Ok of unit ] <a href="http://mirage.github.io/mirage-types/#V1:FS.io" class="ocaml_internal">io</a></code></pre><div class="info"><code class="code">mkdir t path</code> creates an empty directory at <code class="code">path</code></div>
<pre class="odoccode"><span class="VALdestroy"><span class="keyword">val</span> destroy</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:FS.t" class="ocaml_internal">t</a> -&gt; string -&gt; [ `Error of <a href="http://mirage.github.io/mirage-types/#V1:FS.error" class="ocaml_internal">error</a> | `Ok of unit ] <a href="http://mirage.github.io/mirage-types/#V1:FS.io" class="ocaml_internal">io</a></code></pre><div class="info"><code class="code">destroy t path</code> removes a <code class="code">path</code> (which may be a file or an empty
directory) on filesystem <code class="code">t</code></div>
<pre class="odoccode"><span class="VALstat"><span class="keyword">val</span> stat</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:FS.t" class="ocaml_internal">t</a> -&gt; string -&gt; [ `Error of <a href="http://mirage.github.io/mirage-types/#V1:FS.error" class="ocaml_internal">error</a> | `Ok of <a href="http://mirage.github.io/mirage-types/#V1:FS.stat" class="ocaml_internal">stat</a> ] <a href="http://mirage.github.io/mirage-types/#V1:FS.io" class="ocaml_internal">io</a></code></pre><div class="info"><code class="code">stat t path</code> returns information about file or directory at <code class="code">path</code></div>
<pre class="odoccode"><span class="VALlistdir"><span class="keyword">val</span> listdir</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:FS.t" class="ocaml_internal">t</a> -&gt; string -&gt; [ `Error of <a href="http://mirage.github.io/mirage-types/#V1:FS.error" class="ocaml_internal">error</a> | `Ok of string list ] <a href="http://mirage.github.io/mirage-types/#V1:FS.io" class="ocaml_internal">io</a></code></pre><div class="info"><code class="code">listdir t path</code> returns the names of files and subdirectories
within the directory <code class="code">path</code></div>
<pre class="odoccode"><span class="VALwrite"><span class="keyword">val</span> write</span> : <code class="type"><a href="http://mirage.github.io/mirage-types/#V1:FS.t" class="ocaml_internal">t</a> -&gt;
string -&gt; int -&gt; <a href="http://mirage.github.io/mirage-types/#V1:FS.page_aligned_buffer" class="ocaml_internal">page_aligned_buffer</a> -&gt; [ `Error of <a href="http://mirage.github.io/mirage-types/#V1:FS.error" class="ocaml_internal">error</a> | `Ok of unit ] <a href="http://mirage.github.io/mirage-types/#V1:FS.io" class="ocaml_internal">io</a></code></pre><div class="info"><code class="code">write t path offset data</code> writes <code class="code">data</code> at <code class="code">offset</code> in file <code class="code">path</code> on
filesystem <code class="code">t</code></div></div></div>
</div></div>