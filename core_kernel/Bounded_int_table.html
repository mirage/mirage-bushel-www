<div class="ocaml_top"><div class="ocaml_summary"><div class="info">A <code class="code">Bounded_int_table</code> is a table whose keys can be mapped to integers in a fixed
range, 0 ... num_keys-1, where <code class="code">num_keys</code> is specified at table-creation time. The
purpose of <code class="code">Bounded_int_table</code> is to be faster than <code class="code">Hashtbl</code> in situations where one
is willing to pay a space cost for the speed.<p><code class="code">Bounded_int_table</code> presents a subset of the <code class="code">Hashtbl</code> interface. The key type can be
any type, but table creation requires a <code class="code">key_to_int</code> function, which will be used
to extract the integer of all keys. If multiple keys map to the same integer, then
only one of them can be in the table at a time. Any operation that supplies a key
whose corresponding integer is outside the allowed range for the table will cause an
exception.</p><p>A <code class="code">Bounded_int_table</code> is implemented using two fixed size arrays of size <code class="code">num_keys</code>,
which are supplied at table-creation time. The space used does not depend on the
<code class="code">length</code> of the table but rather only on <code class="code">num_keys</code>. Operations that deal with a
single element (find, mem, add, remove, set) take constant time, and perform one or
two array operations. Operations that deal with all of the keys defined in the table
(data, fold, iter, iter_vals, keys, to_alist) take time proportional to the <code class="code">length</code>
of the table, not <code class="code">num_keys</code>.</p></div></div>
<div class="ocaml_content"><pre class="odoccode"><span class="TYPEt"><span class="keyword">type</span> <code class="type">('key, 'data) </code>t</span></pre>
<pre class="odoccode"><span class="TYPEtable"><span class="keyword">type</span> <code class="type">('a, 'b) </code>table</span> = <code class="type">('a, 'b) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a></code></pre>
<div class="ocaml_include" path="http://mirage.github.io/core_kernel/#Invariant:S2" items="[]" types="[]"><pre class="ocaml_include_handle"><span class="keyword">include</span> <code class="type"><code class="code"><a href="http://mirage.github.io/core_kernel/#Invariant:S2">Invariant.S2</a></code> with type t := ('a, 'b) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a></code></pre><div class="ocaml_summary"/></div>
<div class="ocaml_include" path="http://mirage.github.io/core_kernel/#Equal:S2" items="[]" types="[]"><pre class="ocaml_include_handle"><span class="keyword">include</span> <code class="type"><code class="code"><a href="http://mirage.github.io/core_kernel/#Equal:S2">Equal.S2</a></code> with type t := ('a, 'b) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a></code></pre><div class="ocaml_summary"/></div>
<pre class="odoccode"><span class="VALcreate"><span class="keyword">val</span> create</span> : <code class="type">?sexp_of_key:('key -&gt; <a href="http://mirage.github.io/core_kernel/#Std_internal.Sexp.t">Std_internal.Sexp.t</a>) -&gt;
num_keys:int -&gt; key_to_int:('key -&gt; int) -&gt; unit -&gt; ('key, 'data) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a></code></pre><div class="info"><code class="code">create ~num_keys ~key_to_int</code> returns a table where the keys can map to 0
.. num_keys-1, according to <code class="code">key_to_int</code>. It is an error if <code class="code">num_keys &lt; 0</code>.<p><code class="code">sexp_of_key</code>, if supplied, will be used to display keys in error messages.</p></div>
<pre class="odoccode"><span class="VALkeys"><span class="keyword">val</span> keys</span> : <code class="type">('key, 'a) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a> -&gt; 'key list</code></pre><div class="info">Standard hashtbl functions.</div>
<pre class="odoccode"><span class="VALdata"><span class="keyword">val</span> data</span> : <code class="type">('a, 'data) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a> -&gt; 'data list</code></pre>
<pre class="odoccode"><span class="VALfind"><span class="keyword">val</span> find</span> : <code class="type">('key, 'data) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a> -&gt; 'key -&gt; 'data option</code></pre>
<pre class="odoccode"><span class="VALfind_exn"><span class="keyword">val</span> find_exn</span> : <code class="type">('key, 'data) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a> -&gt; 'key -&gt; 'data</code></pre>
<pre class="odoccode"><span class="VALfind_or_add"><span class="keyword">val</span> find_or_add</span> : <code class="type">('key, 'data) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a> -&gt; 'key -&gt; default:(unit -&gt; 'data) -&gt; 'data</code></pre>
<pre class="odoccode"><span class="VALfold"><span class="keyword">val</span> fold</span> : <code class="type">('key, 'data) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a> -&gt;
init:'accum -&gt; f:(key:'key -&gt; data:'data -&gt; 'accum -&gt; 'accum) -&gt; 'accum</code></pre>
<pre class="odoccode"><span class="VALiter"><span class="keyword">val</span> iter</span> : <code class="type">('key, 'data) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a> -&gt; f:(key:'key -&gt; data:'data -&gt; unit) -&gt; unit</code></pre>
<pre class="odoccode"><span class="VALiter_vals"><span class="keyword">val</span> iter_vals</span> : <code class="type">('a, 'data) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a> -&gt; f:('data -&gt; unit) -&gt; unit</code></pre>
<pre class="odoccode"><span class="VALfilter_mapi"><span class="keyword">val</span> filter_mapi</span> : <code class="type">('key, 'data1) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a> -&gt;
f:(key:'key -&gt; data:'data1 -&gt; 'data2 option) -&gt; ('key, 'data2) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a></code></pre>
<pre class="odoccode"><span class="VALfilter_map"><span class="keyword">val</span> filter_map</span> : <code class="type">('key, 'data1) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a> -&gt; f:('data1 -&gt; 'data2 option) -&gt; ('key, 'data2) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a></code></pre>
<pre class="odoccode"><span class="VALmapi"><span class="keyword">val</span> mapi</span> : <code class="type">('key, 'data1) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a> -&gt; f:(key:'key -&gt; data:'data1 -&gt; 'data2) -&gt; ('key, 'data2) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a></code></pre>
<pre class="odoccode"><span class="VALmap"><span class="keyword">val</span> map</span> : <code class="type">('key, 'data1) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a> -&gt; f:('data1 -&gt; 'data2) -&gt; ('key, 'data2) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a></code></pre>
<pre class="odoccode"><span class="VALfor_alli"><span class="keyword">val</span> for_alli</span> : <code class="type">('key, 'data) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a> -&gt; f:(key:'key -&gt; data:'data -&gt; bool) -&gt; bool</code></pre>
<pre class="odoccode"><span class="VALexistsi"><span class="keyword">val</span> existsi</span> : <code class="type">('key, 'data) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a> -&gt; f:(key:'key -&gt; data:'data -&gt; bool) -&gt; bool</code></pre>
<pre class="odoccode"><span class="VALfor_all"><span class="keyword">val</span> for_all</span> : <code class="type">('a, 'data) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a> -&gt; f:('data -&gt; bool) -&gt; bool</code></pre>
<pre class="odoccode"><span class="VALexists"><span class="keyword">val</span> exists</span> : <code class="type">('a, 'data) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a> -&gt; f:('data -&gt; bool) -&gt; bool</code></pre>
<pre class="odoccode"><span class="VALlength"><span class="keyword">val</span> length</span> : <code class="type">('a, 'b) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a> -&gt; int</code></pre>
<pre class="odoccode"><span class="VALmem"><span class="keyword">val</span> mem</span> : <code class="type">('key, 'a) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a> -&gt; 'key -&gt; bool</code></pre>
<pre class="odoccode"><span class="VALremove"><span class="keyword">val</span> remove</span> : <code class="type">('key, 'a) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a> -&gt; 'key -&gt; unit</code></pre>
<pre class="odoccode"><span class="VALset"><span class="keyword">val</span> set</span> : <code class="type">('a, 'b) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a> -&gt; key:'a -&gt; data:'b -&gt; unit</code></pre>
<pre class="odoccode"><span class="VALadd"><span class="keyword">val</span> add</span> : <code class="type">('a, 'b) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a> -&gt; key:'a -&gt; data:'b -&gt; [ `Duplicate of 'b | `Ok ]</code></pre>
<pre class="odoccode"><span class="VALadd_exn"><span class="keyword">val</span> add_exn</span> : <code class="type">('a, 'b) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a> -&gt; key:'a -&gt; data:'b -&gt; unit</code></pre>
<pre class="odoccode"><span class="VALto_alist"><span class="keyword">val</span> to_alist</span> : <code class="type">('key, 'data) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a> -&gt; ('key * 'data) list</code></pre>
<div class="ocaml_module" name="With_key"><pre class="odoccode"><span class="keyword">module</span> <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.With_key" class="ocaml_internal">With_key</a> : <code class="type"><div class="sig_block"><code class="code">functor (</code><code class="code">Key</code><code class="code"> : </code><code class="code">sig</code> .. <code class="code">end</code><code class="code">) -&gt; </code><code class="code">sig</code> .. <code class="code">end</code></div></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><span class="TYPEt"><span class="keyword">type</span> <code class="type">'data </code>t</span> = <code class="type">(Key.t, 'data) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.table" class="ocaml_internal">table</a></code></pre><div class="info">Serialization of a bounded int table using <code class="code">bin_io</code> or <code class="code">sexp</code> preserves <code class="code">num_keys</code>,
but only takes space proportional to the <code class="code">length</code> of the table.</div>
<pre class="odoccode"><span class="VALcreate"><span class="keyword">val</span> create</span> : <code class="type">num_keys:int -&gt; 'data <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.With_key.t" class="ocaml_internal">t</a></code></pre>
<pre class="odoccode"><span class="VALof_alist"><span class="keyword">val</span> of_alist</span> : <code class="type">(Key.t * 'data) list -&gt; 'data <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.With_key.t" class="ocaml_internal">t</a> <a href="http://mirage.github.io/core_kernel/#Or_error.t">Or_error.t</a></code></pre>
<pre class="odoccode"><span class="VALof_alist_exn"><span class="keyword">val</span> of_alist_exn</span> : <code class="type">(Key.t * 'data) list -&gt; 'data <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.With_key.t" class="ocaml_internal">t</a></code></pre>
<pre class="odoccode"><span class="VALt_of_sexp"><span class="keyword">val</span> t_of_sexp</span> : <code class="type">(<a href="http://mirage.github.io/sexplib/#Sexp.t">Sexplib.Sexp.t</a> -&gt; 'data) -&gt; <a href="http://mirage.github.io/sexplib/#Sexp.t">Sexplib.Sexp.t</a> -&gt; 'data <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.With_key.t" class="ocaml_internal">t</a></code></pre>
<pre class="odoccode"><span class="VALsexp_of_t"><span class="keyword">val</span> sexp_of_t</span> : <code class="type">('data -&gt; <a href="http://mirage.github.io/sexplib/#Sexp.t">Sexplib.Sexp.t</a>) -&gt; 'data <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.With_key.t" class="ocaml_internal">t</a> -&gt; <a href="http://mirage.github.io/sexplib/#Sexp.t">Sexplib.Sexp.t</a></code></pre>
<pre class="odoccode"><span class="VALbin_t"><span class="keyword">val</span> bin_t</span> : <code class="type">'data <a href="http://mirage.github.io/bin_prot/#Type_class.t">Bin_prot.Type_class.t</a> -&gt; 'data <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.With_key.t" class="ocaml_internal">t</a> <a href="http://mirage.github.io/bin_prot/#Type_class.t">Bin_prot.Type_class.t</a></code></pre>
<pre class="odoccode"><span class="VALbin_read_t"><span class="keyword">val</span> bin_read_t</span> : <code class="type">'data <a href="http://mirage.github.io/bin_prot/#Read.reader">Bin_prot.Read.reader</a> -&gt; 'data <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.With_key.t" class="ocaml_internal">t</a> <a href="http://mirage.github.io/bin_prot/#Read.reader">Bin_prot.Read.reader</a></code></pre>
<pre class="odoccode"><span class="VAL__bin_read_t__"><span class="keyword">val</span> __bin_read_t__</span> : <code class="type">'data <a href="http://mirage.github.io/bin_prot/#Read.reader">Bin_prot.Read.reader</a> -&gt; (int -&gt; 'data <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.With_key.t" class="ocaml_internal">t</a>) <a href="http://mirage.github.io/bin_prot/#Read.reader">Bin_prot.Read.reader</a></code></pre>
<pre class="odoccode"><span class="VALbin_reader_t"><span class="keyword">val</span> bin_reader_t</span> : <code class="type">'data <a href="http://mirage.github.io/bin_prot/#Type_class.reader">Bin_prot.Type_class.reader</a> -&gt; 'data <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.With_key.t" class="ocaml_internal">t</a> <a href="http://mirage.github.io/bin_prot/#Type_class.reader">Bin_prot.Type_class.reader</a></code></pre>
<pre class="odoccode"><span class="VALbin_size_t"><span class="keyword">val</span> bin_size_t</span> : <code class="type">'data <a href="http://mirage.github.io/bin_prot/#Size.sizer">Bin_prot.Size.sizer</a> -&gt; 'data <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.With_key.t" class="ocaml_internal">t</a> <a href="http://mirage.github.io/bin_prot/#Size.sizer">Bin_prot.Size.sizer</a></code></pre>
<pre class="odoccode"><span class="VALbin_write_t"><span class="keyword">val</span> bin_write_t</span> : <code class="type">'data <a href="http://mirage.github.io/bin_prot/#Write.writer">Bin_prot.Write.writer</a> -&gt; 'data <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.With_key.t" class="ocaml_internal">t</a> <a href="http://mirage.github.io/bin_prot/#Write.writer">Bin_prot.Write.writer</a></code></pre>
<pre class="odoccode"><span class="VALbin_writer_t"><span class="keyword">val</span> bin_writer_t</span> : <code class="type">'data <a href="http://mirage.github.io/bin_prot/#Type_class.writer">Bin_prot.Type_class.writer</a> -&gt; 'data <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.With_key.t" class="ocaml_internal">t</a> <a href="http://mirage.github.io/bin_prot/#Type_class.writer">Bin_prot.Type_class.writer</a></code></pre></div></div>
<pre class="odoccode"><span class="VALdebug"><span class="keyword">val</span> debug</span> : <code class="type">bool ref</code></pre><div class="info">set <code class="code">debug := true</code> to turn on debugging, including potentially slow invariant
checking.</div>
<pre class="odoccode"><span class="VALsexp_of_t"><span class="keyword">val</span> sexp_of_t</span> : <code class="type">('key -&gt; <a href="http://mirage.github.io/sexplib/#Sexp.t">Sexplib.Sexp.t</a>) -&gt;
('data -&gt; <a href="http://mirage.github.io/sexplib/#Sexp.t">Sexplib.Sexp.t</a>) -&gt; ('key, 'data) <a href="http://mirage.github.io/core_kernel/#Bounded_int_table.t" class="ocaml_internal">t</a> -&gt; <a href="http://mirage.github.io/sexplib/#Sexp.t">Sexplib.Sexp.t</a></code></pre>
</div></div>