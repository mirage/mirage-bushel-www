<div class="ocaml_top"><div class="ocaml_summary"/>
<div class="ocaml_content"><pre class="odoccode"><span class="VALsector_size"><span class="keyword">val</span> sector_size</span> : <code class="type">int</code></pre><div class="info">Sector size of the vhd virtual disk, in bytes</div>
<pre class="odoccode"><span class="VALsector_shift"><span class="keyword">val</span> sector_shift</span> : <code class="type">int</code></pre><div class="info"><code class="code">1 lsl sector_shift = sector_size</code></div>
<pre class="odoccode"><span class="VALcstruct_equal"><span class="keyword">val</span> cstruct_equal</span> : <code class="type"><a href="http://mirage.github.io/cstruct/#Cstruct.t">Cstruct.t</a> -&gt; <a href="http://mirage.github.io/cstruct/#Cstruct.t">Cstruct.t</a> -&gt; bool</code></pre>
<pre class="odoccode"><span class="EXCEPTIONInvalid_sector"><span class="keyword">exception</span> Invalid_sector</span> <span class="keyword">of</span> <code class="type">int64 * int64</code></pre>
<div class="info">An attempt to access (read/write) an invalid sector</div>
<pre class="odoccode"><span class="VALmax_disk_size"><span class="keyword">val</span> max_disk_size</span> : <code class="type">int64</code></pre><div class="info">Maximum size of a dynamic disk in bytes</div>
<div class="ocaml_module" name="UTF16"><pre class="odoccode"><span class="keyword">module</span> <a href="http://mirage.github.io/vhd-format/#Vhd.UTF16" class="ocaml_internal">UTF16</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><span class="TYPEt"><span class="keyword">type</span> t</span> = <code class="type">int array</code></pre>
<pre class="odoccode"><span class="VALto_utf8_exn"><span class="keyword">val</span> to_utf8_exn</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.UTF16.t" class="ocaml_internal">t</a> -&gt; string</code></pre></div></div>
<div class="ocaml_module" name="Feature"><pre class="odoccode"><span class="keyword">module</span> <a href="http://mirage.github.io/vhd-format/#Vhd.Feature" class="ocaml_internal">Feature</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><code><span class="TYPEt"><span class="keyword">type</span> t</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTt.Temporary"><span class="constructor">Temporary</span></span></code></td><td class="typefieldcomment" align="left"><div class="info">A temporary disk is a candidate for deletion on shutdown</div></td></tr></table>
<pre class="odoccode"><span class="VALto_string"><span class="keyword">val</span> to_string</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.Feature.t" class="ocaml_internal">t</a> -&gt; string</code></pre></div></div>
<div class="ocaml_module" name="Disk_type"><pre class="odoccode"><span class="keyword">module</span> <a href="http://mirage.github.io/vhd-format/#Vhd.Disk_type" class="ocaml_internal">Disk_type</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><code><span class="TYPEt"><span class="keyword">type</span> t</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTt.Fixed_hard_disk"><span class="constructor">Fixed_hard_disk</span></span></code></td><td class="typefieldcomment" align="left"><div class="info">A flat constant-space image</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTt.Dynamic_hard_disk"><span class="constructor">Dynamic_hard_disk</span></span></code></td><td class="typefieldcomment" align="left"><div class="info">An image which can grow and shrink as data is added and removed</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTt.Differencing_hard_disk"><span class="constructor">Differencing_hard_disk</span></span></code></td><td class="typefieldcomment" align="left"><div class="info">An image which stores only differences from a base &quot;parent&quot; disk</div></td></tr></table>
<pre class="odoccode"><span class="VALto_string"><span class="keyword">val</span> to_string</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.Disk_type.t" class="ocaml_internal">t</a> -&gt; string</code></pre></div></div>
<div class="ocaml_module" name="Host_OS"><pre class="odoccode"><span class="keyword">module</span> <a href="http://mirage.github.io/vhd-format/#Vhd.Host_OS" class="ocaml_internal">Host_OS</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><code><span class="TYPEt"><span class="keyword">type</span> t</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTt.Windows"><span class="constructor">Windows</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTt.Macintosh"><span class="constructor">Macintosh</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTt.Other"><span class="constructor">Other</span></span> <span class="keyword">of</span> <code class="type">int32</code></code></td></tr></table>
<pre class="odoccode"><span class="VALto_string"><span class="keyword">val</span> to_string</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.Host_OS.t" class="ocaml_internal">t</a> -&gt; string</code></pre></div></div>
<div class="ocaml_module" name="Geometry"><pre class="odoccode"><span class="keyword">module</span> <a href="http://mirage.github.io/vhd-format/#Vhd.Geometry" class="ocaml_internal">Geometry</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><code><span class="TYPEt"><span class="keyword">type</span> t</span> = {</code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.cylinders">cylinders</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.heads">heads</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.sectors">sectors</span> : <code class="type">int</code>;</code></td></tr><tr><td>}</td></tr></table>
<pre class="odoccode"><span class="VALto_string"><span class="keyword">val</span> to_string</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.Geometry.t" class="ocaml_internal">t</a> -&gt; string</code></pre>
<pre class="odoccode"><span class="VALof_sectors"><span class="keyword">val</span> of_sectors</span> : <code class="type">int64 -&gt; <a href="http://mirage.github.io/vhd-format/#Vhd.Geometry.t" class="ocaml_internal">t</a></code></pre></div></div>
<div class="ocaml_module" name="Footer"><pre class="odoccode"><span class="keyword">module</span> <a href="http://mirage.github.io/vhd-format/#Vhd.Footer" class="ocaml_internal">Footer</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><code><span class="TYPEt"><span class="keyword">type</span> t</span> = {</code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.features">features</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.Feature.t" class="ocaml_internal">Feature.t</a> list</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.data_offset">data_offset</span> : <code class="type">int64</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">For dynamic and differencing disks, this is the absolute byte offset
from the beginning of the file to the next structure. For fixed disks
the value is undefined.</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.time_stamp">time_stamp</span> : <code class="type">int32</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">Creation time in seconds since midnight on January 1, 2000</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.creator_application">creator_application</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">Name of the application which created the image</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.creator_version">creator_version</span> : <code class="type">int32</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">Version number of the application which created the image</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.creator_host_os">creator_host_os</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.Host_OS.t" class="ocaml_internal">Host_OS.t</a></code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.original_size">original_size</span> : <code class="type">int64</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">size of the virtual disk in bytes at creation time</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.current_size">current_size</span> : <code class="type">int64</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">size of the virtual disk in bytes now</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.geometry">geometry</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.Geometry.t" class="ocaml_internal">Geometry.t</a></code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.disk_type">disk_type</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.Disk_type.t" class="ocaml_internal">Disk_type.t</a></code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.checksum">checksum</span> : <code class="type">int32</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">one's complement checksum of the footer with the checksum set to 0l</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.uid">uid</span> : <code class="type"><a href="http://mirage.github.io/uuidm/#Uuidm.t">Uuidm.t</a></code>;</code></td><td class="typefieldcomment" align="left"><div class="info">128-bit UUID</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.saved_state">saved_state</span> : <code class="type">bool</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">true if the virtual machine is in a saved (suspended) state</div></td></tr><tr><td>}</td></tr></table>
<pre class="odoccode"><span class="VALcreate"><span class="keyword">val</span> create</span> : <code class="type">?features:<a href="http://mirage.github.io/vhd-format/#Vhd.Feature.t" class="ocaml_internal">Feature.t</a> list -&gt;
data_offset:int64 -&gt;
?time_stamp:int32 -&gt;
?creator_application:string -&gt;
?creator_version:int32 -&gt;
?creator_host_os:<a href="http://mirage.github.io/vhd-format/#Vhd.Host_OS.t" class="ocaml_internal">Host_OS.t</a> -&gt;
current_size:int64 -&gt;
?original_size:int64 -&gt;
disk_type:<a href="http://mirage.github.io/vhd-format/#Vhd.Disk_type.t" class="ocaml_internal">Disk_type.t</a> -&gt; ?uid:<a href="http://mirage.github.io/uuidm/#Uuidm.t">Uuidm.t</a> -&gt; ?saved_state:bool -&gt; unit -&gt; <a href="http://mirage.github.io/vhd-format/#Vhd.Footer.t" class="ocaml_internal">t</a></code></pre>
<pre class="odoccode"><span class="VALcompute_checksum"><span class="keyword">val</span> compute_checksum</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.Footer.t" class="ocaml_internal">t</a> -&gt; int32</code></pre><div class="info">compute the expected checksum value</div>
<pre class="odoccode"><span class="VALdefault_creator_application"><span class="keyword">val</span> default_creator_application</span> : <code class="type">string</code></pre>
<pre class="odoccode"><span class="VALdefault_creator_version"><span class="keyword">val</span> default_creator_version</span> : <code class="type">int32</code></pre>
<pre class="odoccode"><span class="VALsizeof"><span class="keyword">val</span> sizeof</span> : <code class="type">int</code></pre>
<pre class="odoccode"><span class="VALmarshal"><span class="keyword">val</span> marshal</span> : <code class="type"><a href="http://mirage.github.io/cstruct/#Cstruct.t">Cstruct.t</a> -&gt; <a href="http://mirage.github.io/vhd-format/#Vhd.Footer.t" class="ocaml_internal">t</a> -&gt; <a href="http://mirage.github.io/vhd-format/#Vhd.Footer.t" class="ocaml_internal">t</a></code></pre>
<pre class="odoccode"><span class="VALunmarshal"><span class="keyword">val</span> unmarshal</span> : <code class="type"><a href="http://mirage.github.io/cstruct/#Cstruct.t">Cstruct.t</a> -&gt; (<a href="http://mirage.github.io/vhd-format/#Vhd.Footer.t" class="ocaml_internal">t</a>, exn) <a href="http://mirage.github.io/vhd-format/#Vhd_result.t">Vhd_result.t</a></code></pre>
<pre class="odoccode"><span class="VALto_string"><span class="keyword">val</span> to_string</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.Footer.t" class="ocaml_internal">t</a> -&gt; string</code></pre></div></div>
<div class="ocaml_module" name="Platform_code"><pre class="odoccode"><span class="keyword">module</span> <a href="http://mirage.github.io/vhd-format/#Vhd.Platform_code" class="ocaml_internal">Platform_code</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><code><span class="TYPEt"><span class="keyword">type</span> t</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTt.None"><span class="constructor">None</span></span></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTt.Wi2r"><span class="constructor">Wi2r</span></span></code></td><td class="typefieldcomment" align="left"><div class="info">deprecated</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTt.Wi2k"><span class="constructor">Wi2k</span></span></code></td><td class="typefieldcomment" align="left"><div class="info">deprecated</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTt.W2ru"><span class="constructor">W2ru</span></span></code></td><td class="typefieldcomment" align="left"><div class="info">UTF-16 relative windows path</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTt.W2ku"><span class="constructor">W2ku</span></span></code></td><td class="typefieldcomment" align="left"><div class="info">UTF-16 absolute windows path</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTt.Mac"><span class="constructor">Mac</span></span></code></td><td class="typefieldcomment" align="left"><div class="info">Mac OS alias</div></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTt.MacX"><span class="constructor">MacX</span></span></code></td><td class="typefieldcomment" align="left"><div class="info">RFC2396 file URL</div></td></tr></table>
<pre class="odoccode"><span class="VALto_string"><span class="keyword">val</span> to_string</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.Platform_code.t" class="ocaml_internal">t</a> -&gt; string</code></pre></div></div>
<div class="ocaml_module" name="Parent_locator"><pre class="odoccode"><span class="keyword">module</span> <a href="http://mirage.github.io/vhd-format/#Vhd.Parent_locator" class="ocaml_internal">Parent_locator</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><code><span class="TYPEt"><span class="keyword">type</span> t</span> = {</code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.platform_code">platform_code</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.Platform_code.t" class="ocaml_internal">Platform_code.t</a></code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.platform_data_space">platform_data_space</span> : <code class="type">int32</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">The number of 512-byte sectors needed to store the platform_data</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.platform_data_space_original">platform_data_space_original</span> : <code class="type">int32</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">The original platform_data_space before automatic correction</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.platform_data_length">platform_data_length</span> : <code class="type">int32</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">The length of the platform_data</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.platform_data_offset">platform_data_offset</span> : <code class="type">int64</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">The absolute offset of the platform_data</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.platform_data">platform_data</span> : <code class="type"><a href="http://mirage.github.io/cstruct/#Cstruct.t">Cstruct.t</a></code>;</code></td></tr><tr><td>}</td></tr></table>
<pre class="odoccode"><span class="VALnull"><span class="keyword">val</span> null</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.Parent_locator.t" class="ocaml_internal">t</a></code></pre><div class="info">No parent locator</div>
<pre class="odoccode"><span class="VALequal"><span class="keyword">val</span> equal</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.Parent_locator.t" class="ocaml_internal">t</a> -&gt; <a href="http://mirage.github.io/vhd-format/#Vhd.Parent_locator.t" class="ocaml_internal">t</a> -&gt; bool</code></pre>
<pre class="odoccode"><span class="VALto_string"><span class="keyword">val</span> to_string</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.Parent_locator.t" class="ocaml_internal">t</a> -&gt; string</code></pre>
<pre class="odoccode"><span class="VALto_filename"><span class="keyword">val</span> to_filename</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.Parent_locator.t" class="ocaml_internal">t</a> -&gt; string option</code></pre><div class="info">Attempt to read a filename from the platform_data</div>
<pre class="odoccode"><span class="VALsizeof"><span class="keyword">val</span> sizeof</span> : <code class="type">int</code></pre>
<pre class="odoccode"><span class="VALmarshal"><span class="keyword">val</span> marshal</span> : <code class="type"><a href="http://mirage.github.io/cstruct/#Cstruct.t">Cstruct.t</a> -&gt; <a href="http://mirage.github.io/vhd-format/#Vhd.Parent_locator.t" class="ocaml_internal">t</a> -&gt; unit</code></pre>
<pre class="odoccode"><span class="VALunmarshal"><span class="keyword">val</span> unmarshal</span> : <code class="type"><a href="http://mirage.github.io/cstruct/#Cstruct.t">Cstruct.t</a> -&gt; (<a href="http://mirage.github.io/vhd-format/#Vhd.Parent_locator.t" class="ocaml_internal">t</a>, exn) <a href="http://mirage.github.io/vhd-format/#Vhd_result.t">Vhd_result.t</a></code></pre></div></div>
<div class="ocaml_module" name="Header"><pre class="odoccode"><span class="keyword">module</span> <a href="http://mirage.github.io/vhd-format/#Vhd.Header" class="ocaml_internal">Header</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><code><span class="TYPEt"><span class="keyword">type</span> t</span> = {</code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.table_offset">table_offset</span> : <code class="type">int64</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">absolute byte offset of the BAT</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.max_table_entries">max_table_entries</span> : <code class="type">int</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">the maximum number of blocks</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.block_size_sectors_shift">block_size_sectors_shift</span> : <code class="type">int</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">each block is 2 ** block_size_sectors_shift sectors in size</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.checksum">checksum</span> : <code class="type">int32</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">ones-complement checksum of the header</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.parent_unique_id">parent_unique_id</span> : <code class="type"><a href="http://mirage.github.io/uuidm/#Uuidm.t">Uuidm.t</a></code>;</code></td><td class="typefieldcomment" align="left"><div class="info">if a differencing disk, this is the 128-bit UUID of the parent</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.parent_time_stamp">parent_time_stamp</span> : <code class="type">int32</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">modification time stamp of the parent disk, as seconds since midnight Jan 1 2000</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.parent_unicode_name">parent_unicode_name</span> : <code class="type">int array</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">parent disk filename</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.parent_locators">parent_locators</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.Parent_locator.t" class="ocaml_internal">Parent_locator.t</a> array</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">up to 8 different pointers to the parent disk image</div></td></tr><tr><td>}</td></tr></table>
<pre class="odoccode"><span class="VALcreate"><span class="keyword">val</span> create</span> : <code class="type">table_offset:int64 -&gt;
current_size:int64 -&gt;
?block_size_sectors_shift:int -&gt;
?checksum:int32 -&gt;
?parent_unique_id:<a href="http://mirage.github.io/uuidm/#Uuidm.t">Uuidm.t</a> -&gt;
?parent_time_stamp:int32 -&gt;
?parent_unicode_name:int array -&gt;
?parent_locators:<a href="http://mirage.github.io/vhd-format/#Vhd.Parent_locator.t" class="ocaml_internal">Parent_locator.t</a> array -&gt; unit -&gt; <a href="http://mirage.github.io/vhd-format/#Vhd.Header.t" class="ocaml_internal">t</a></code></pre>
<pre class="odoccode"><span class="VALequal"><span class="keyword">val</span> equal</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.Header.t" class="ocaml_internal">t</a> -&gt; <a href="http://mirage.github.io/vhd-format/#Vhd.Header.t" class="ocaml_internal">t</a> -&gt; bool</code></pre>
<pre class="odoccode"><span class="VALto_string"><span class="keyword">val</span> to_string</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.Header.t" class="ocaml_internal">t</a> -&gt; string</code></pre>
<pre class="odoccode"><span class="VALcompute_checksum"><span class="keyword">val</span> compute_checksum</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.Header.t" class="ocaml_internal">t</a> -&gt; int32</code></pre><div class="info">compute the expected checksum value</div>
<pre class="odoccode"><span class="VALsizeof_bitmap"><span class="keyword">val</span> sizeof_bitmap</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.Header.t" class="ocaml_internal">t</a> -&gt; int</code></pre>
<pre class="odoccode"><span class="VALdefault_block_size"><span class="keyword">val</span> default_block_size</span> : <code class="type">int</code></pre>
<pre class="odoccode"><span class="VALdefault_block_size_sectors_shift"><span class="keyword">val</span> default_block_size_sectors_shift</span> : <code class="type">int</code></pre>
<pre class="odoccode"><span class="VALsizeof"><span class="keyword">val</span> sizeof</span> : <code class="type">int</code></pre>
<pre class="odoccode"><span class="VALmarshal"><span class="keyword">val</span> marshal</span> : <code class="type"><a href="http://mirage.github.io/cstruct/#Cstruct.t">Cstruct.t</a> -&gt; <a href="http://mirage.github.io/vhd-format/#Vhd.Header.t" class="ocaml_internal">t</a> -&gt; <a href="http://mirage.github.io/vhd-format/#Vhd.Header.t" class="ocaml_internal">t</a></code></pre>
<pre class="odoccode"><span class="VALunmarshal"><span class="keyword">val</span> unmarshal</span> : <code class="type"><a href="http://mirage.github.io/cstruct/#Cstruct.t">Cstruct.t</a> -&gt; (<a href="http://mirage.github.io/vhd-format/#Vhd.Header.t" class="ocaml_internal">t</a>, exn) <a href="http://mirage.github.io/vhd-format/#Vhd_result.t">Vhd_result.t</a></code></pre></div></div>
<div class="ocaml_module" name="BAT"><pre class="odoccode"><span class="keyword">module</span> <a href="http://mirage.github.io/vhd-format/#Vhd.BAT" class="ocaml_internal">BAT</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><span class="TYPEt"><span class="keyword">type</span> t</span></pre><div class="info">Absolute sector offset of a data block, where a data block contains
a sector bitmap and then data</div>
<pre class="odoccode"><span class="VALequal"><span class="keyword">val</span> equal</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.BAT.t" class="ocaml_internal">t</a> -&gt; <a href="http://mirage.github.io/vhd-format/#Vhd.BAT.t" class="ocaml_internal">t</a> -&gt; bool</code></pre><div class="info"><code class="code">equal t1 t2</code> is true if <code class="code">t1</code> and <code class="code">t2</code> represent the same data</div>
<pre class="odoccode"><span class="VALget"><span class="keyword">val</span> get</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.BAT.t" class="ocaml_internal">t</a> -&gt; int -&gt; int32</code></pre><div class="info"><code class="code">get t i</code> returns the <code class="code">i</code>th entry</div>
<pre class="odoccode"><span class="VALset"><span class="keyword">val</span> set</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.BAT.t" class="ocaml_internal">t</a> -&gt; int -&gt; int32 -&gt; unit</code></pre><div class="info"><code class="code">set t i j</code> sets the <code class="code">i</code>th entry to <code class="code">j</code></div>
<pre class="odoccode"><span class="VALlength"><span class="keyword">val</span> length</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.BAT.t" class="ocaml_internal">t</a> -&gt; int</code></pre><div class="info"><code class="code">length t</code> the number of entries in the table</div>
<pre class="odoccode"><span class="VALto_string"><span class="keyword">val</span> to_string</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.BAT.t" class="ocaml_internal">t</a> -&gt; string</code></pre><div class="info"><code class="code">to_string t</code> creates a debug-printable string</div></div></div>
<div class="ocaml_module" name="Batmap_header"><pre class="odoccode"><span class="keyword">module</span> <a href="http://mirage.github.io/vhd-format/#Vhd.Batmap_header" class="ocaml_internal">Batmap_header</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><code><span class="TYPEt"><span class="keyword">type</span> t</span> = {</code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.offset">offset</span> : <code class="type">int64</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.size_in_sectors">size_in_sectors</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.major_version">major_version</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.minor_version">minor_version</span> : <code class="type">int</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.checksum">checksum</span> : <code class="type">int32</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.marker">marker</span> : <code class="type">int</code>;</code></td></tr><tr><td>}</td></tr></table></div></div>
<div class="ocaml_module" name="Batmap"><pre class="odoccode"><span class="keyword">module</span> <a href="http://mirage.github.io/vhd-format/#Vhd.Batmap" class="ocaml_internal">Batmap</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><span class="TYPEt"><span class="keyword">type</span> t</span></pre></div></div>
<div class="ocaml_module" name="Bitmap"><pre class="odoccode"><span class="keyword">module</span> <a href="http://mirage.github.io/vhd-format/#Vhd.Bitmap" class="ocaml_internal">Bitmap</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><span class="TYPEt"><span class="keyword">type</span> t</span></pre>
<pre class="odoccode"><span class="VALget"><span class="keyword">val</span> get</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.Bitmap.t" class="ocaml_internal">t</a> -&gt; int64 -&gt; bool</code></pre><div class="info"><code class="code">get t sector</code> is true if <code class="code">sector</code> is present in the block</div>
<pre class="odoccode"><span class="VALset"><span class="keyword">val</span> set</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.Bitmap.t" class="ocaml_internal">t</a> -&gt; int64 -&gt; (int64 * <a href="http://mirage.github.io/cstruct/#Cstruct.t">Cstruct.t</a>) option</code></pre><div class="info"><code class="code">set t sector</code> asserts the bit for <code class="code">sector</code>, returning a
(relative offset, data to be written to disk) pair.</div></div></div>
<div class="ocaml_module" name="Sector"><pre class="odoccode"><span class="keyword">module</span> <a href="http://mirage.github.io/vhd-format/#Vhd.Sector" class="ocaml_internal">Sector</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><span class="TYPEt"><span class="keyword">type</span> t</span> = <code class="type"><a href="http://mirage.github.io/cstruct/#Cstruct.t">Cstruct.t</a></code></pre>
<pre class="odoccode"><span class="VALdump"><span class="keyword">val</span> dump</span> : <code class="type"><a href="http://mirage.github.io/cstruct/#Cstruct.t">Cstruct.t</a> -&gt; unit</code></pre></div></div>
<div class="ocaml_module" name="Vhd"><pre class="odoccode"><span class="keyword">module</span> <a href="http://mirage.github.io/vhd-format/#Vhd.Vhd" class="ocaml_internal">Vhd</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><code><span class="TYPEt"><span class="keyword">type</span> <code class="type">'a </code>t</span> = {</code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.filename">filename</span> : <code class="type">string</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.handle">handle</span> : <code class="type">'a</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.header">header</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.Header.t" class="ocaml_internal">Header.t</a></code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.footer">footer</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.Footer.t" class="ocaml_internal">Footer.t</a></code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.parent">parent</span> : <code class="type">'a <a href="http://mirage.github.io/vhd-format/#Vhd.Vhd.t" class="ocaml_internal">t</a> option</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.bat">bat</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.BAT.t" class="ocaml_internal">BAT.t</a></code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.batmap">batmap</span> : <code class="type">(<a href="http://mirage.github.io/vhd-format/#Vhd.Batmap_header.t" class="ocaml_internal">Batmap_header.t</a> * <a href="http://mirage.github.io/vhd-format/#Vhd.Batmap.t" class="ocaml_internal">Batmap.t</a>) option</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.bitmap_cache">bitmap_cache</span> : <code class="type">(int * <a href="http://mirage.github.io/vhd-format/#Vhd.Bitmap.t" class="ocaml_internal">Bitmap.t</a>) option ref</code>;</code></td></tr><tr><td>}</td></tr></table>
<pre class="odoccode"><span class="VALcheck_overlapping_blocks"><span class="keyword">val</span> check_overlapping_blocks</span> : <code class="type">'a <a href="http://mirage.github.io/vhd-format/#Vhd.Vhd.t" class="ocaml_internal">t</a> -&gt; unit</code></pre>
<div class="ocaml_module" name="Field"><pre class="odoccode"><span class="keyword">module</span> <a href="http://mirage.github.io/vhd-format/#Vhd.Vhd.Field" class="ocaml_internal">Field</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><span class="VALlist"><span class="keyword">val</span> list</span> : <code class="type">string list</code></pre>
<pre class="odoccode"><span class="VALget"><span class="keyword">val</span> get</span> : <code class="type">'a <a href="http://mirage.github.io/vhd-format/#Vhd.Vhd.t" class="ocaml_internal">t</a> -&gt; string -&gt; string option</code></pre></div></div></div></div>
<div class="ocaml_module" name="Raw"><pre class="odoccode"><span class="keyword">module</span> <a href="http://mirage.github.io/vhd-format/#Vhd.Raw" class="ocaml_internal">Raw</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><code><span class="TYPEt"><span class="keyword">type</span> <code class="type">'a </code>t</span> = {</code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.filename">filename</span> : <code class="type">string</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTt.handle">handle</span> : <code class="type">'a</code>;</code></td></tr><tr><td>}</td></tr></table></div></div>
<pre class="odoccode"><code><span class="TYPEsize"><span class="keyword">type</span> size</span> = {</code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTsize.total">total</span> : <code class="type">int64</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">size of the final disk, in sectors</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTsize.metadata">metadata</span> : <code class="type">int64</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">number of metadata sectors</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTsize.empty">empty</span> : <code class="type">int64</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">number of sectors of empty space</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTsize.copy">copy</span> : <code class="type">int64</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">number of copied sectors</div></td></tr><tr><td>}</td></tr></table><div class="info">The amount of data contained in a stream, broken down by type</div>
<pre class="odoccode"><span class="VALempty"><span class="keyword">val</span> empty</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.size" class="ocaml_internal">size</a></code></pre>
<div class="ocaml_module" name="Stream"><pre class="odoccode"><span class="keyword">module</span> <a href="http://mirage.github.io/vhd-format/#Vhd.Stream" class="ocaml_internal">Stream</a> : <code class="type"><div class="sig_block"><code class="code">functor (</code><code class="code">A</code><code class="code"> : </code><code class="code"><a href="http://mirage.github.io/vhd-format/#S:ASYNC">S.ASYNC</a></code><code class="code">) -&gt; </code><code class="code">sig</code> .. <code class="code">end</code></div></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><code><span class="TYPEll"><span class="keyword">type</span> <code class="type">'a </code>ll</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTll.Cons"><span class="constructor">Cons</span></span> <span class="keyword">of</span> <code class="type">'a * unit -&gt; 'a <a href="http://mirage.github.io/vhd-format/#Vhd.Stream.ll" class="ocaml_internal">ll</a> A.t</code></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTll.End"><span class="constructor">End</span></span></code></td><td class="typefieldcomment" align="left"><div class="info">a lazy list</div></td></tr></table>
<pre class="odoccode"><span class="VALiter"><span class="keyword">val</span> iter</span> : <code class="type">('a -&gt; unit A.t) -&gt; 'a <a href="http://mirage.github.io/vhd-format/#Vhd.Stream.ll" class="ocaml_internal">ll</a> -&gt; unit A.t</code></pre><div class="info"><code class="code">iter f stream</code> applies each element from <code class="code">stream</code> to <code class="code">f</code> in order.</div>
<pre class="odoccode"><span class="VALfold_left"><span class="keyword">val</span> fold_left</span> : <code class="type">('a -&gt; 'b -&gt; 'a A.t) -&gt; 'a -&gt; 'b <a href="http://mirage.github.io/vhd-format/#Vhd.Stream.ll" class="ocaml_internal">ll</a> -&gt; 'a A.t</code></pre><div class="info"><code class="code">fold_left f initial stream</code> folds <code class="code">f</code> across all the elements in
the <code class="code">stream</code> with neutral element <code class="code">initial</code></div>
<pre class="odoccode"><code><span class="TYPEstream"><span class="keyword">type</span> <code class="type">'a </code>stream</span> = {</code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstream.elements">elements</span> : <code class="type">'a <a href="http://mirage.github.io/vhd-format/#Element.t">Element.t</a> <a href="http://mirage.github.io/vhd-format/#Vhd.Stream.ll" class="ocaml_internal">ll</a></code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstream.size">size</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.size" class="ocaml_internal">size</a></code>;</code></td></tr><tr><td>}</td></tr></table><div class="info">an image of a disk represented as a stream</div></div></div>
<div class="ocaml_module" name="Make"><pre class="odoccode"><span class="keyword">module</span> <a href="http://mirage.github.io/vhd-format/#Vhd.Make" class="ocaml_internal">Make</a> : <code class="type"><div class="sig_block"><code class="code">functor (</code><code class="code">File</code><code class="code"> : </code><code class="code"><a href="http://mirage.github.io/vhd-format/#S:IO">S.IO</a></code><code class="code">) -&gt; </code><code class="code">sig</code> .. <code class="code">end</code></div></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<div class="ocaml_module" name="Vhd_IO"><pre class="odoccode"><span class="keyword">module</span> <a href="http://mirage.github.io/vhd-format/#Vhd.Make.Vhd_IO" class="ocaml_internal">Vhd_IO</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><span class="VALopenfile"><span class="keyword">val</span> openfile</span> : <code class="type">?path:string list -&gt; string -&gt; bool -&gt; File.fd <a href="http://mirage.github.io/vhd-format/#Vhd.Vhd.t" class="ocaml_internal">Vhd.t</a> File.t</code></pre><div class="info"><code class="code">openfile ?path filename</code> reads the vhd metadata from <code class="code">filename</code> (and other
files on the path from <code class="code">filename</code> to the root of the tree). If <code class="code">filename</code>
or any of the parent locators have relative paths, then they will be
searched for on the ?path.</div>
<pre class="odoccode"><span class="VALclose"><span class="keyword">val</span> close</span> : <code class="type">File.fd <a href="http://mirage.github.io/vhd-format/#Vhd.Vhd.t" class="ocaml_internal">Vhd.t</a> -&gt; unit File.t</code></pre><div class="info"><code class="code">close t</code> frees all resources associated with <code class="code">t</code></div>
<pre class="odoccode"><span class="VALcreate_dynamic"><span class="keyword">val</span> create_dynamic</span> : <code class="type">filename:string -&gt;
size:int64 -&gt;
?uuid:<a href="http://mirage.github.io/uuidm/#Uuidm.t">Uuidm.t</a> -&gt;
?saved_state:bool -&gt; ?features:<a href="http://mirage.github.io/vhd-format/#Vhd.Feature.t" class="ocaml_internal">Feature.t</a> list -&gt; unit -&gt; File.fd <a href="http://mirage.github.io/vhd-format/#Vhd.Vhd.t" class="ocaml_internal">Vhd.t</a> File.t</code></pre><div class="info"><code class="code">create_dynamic ~filename ~size</code> creates an empty dynamic vhd with
virtual size <code class="code">size</code> bytes and filename <code class="code">filename</code>.</div>
<pre class="odoccode"><span class="VALcreate_difference"><span class="keyword">val</span> create_difference</span> : <code class="type">filename:string -&gt;
parent:File.fd <a href="http://mirage.github.io/vhd-format/#Vhd.Vhd.t" class="ocaml_internal">Vhd.t</a> -&gt;
?uuid:<a href="http://mirage.github.io/uuidm/#Uuidm.t">Uuidm.t</a> -&gt;
?saved_state:bool -&gt; ?features:<a href="http://mirage.github.io/vhd-format/#Vhd.Feature.t" class="ocaml_internal">Feature.t</a> list -&gt; unit -&gt; File.fd <a href="http://mirage.github.io/vhd-format/#Vhd.Vhd.t" class="ocaml_internal">Vhd.t</a> File.t</code></pre><div class="info"><code class="code">create_difference ~filename ~parent</code> creates an empty differencing vhd
with filename <code class="code">filename</code> backed by parent <code class="code">parent</code>.</div>
<pre class="odoccode"><span class="VALget_sector_location"><span class="keyword">val</span> get_sector_location</span> : <code class="type">File.fd <a href="http://mirage.github.io/vhd-format/#Vhd.Vhd.t" class="ocaml_internal">Vhd.t</a> -&gt; int64 -&gt; (File.fd <a href="http://mirage.github.io/vhd-format/#Vhd.Vhd.t" class="ocaml_internal">Vhd.t</a> * int64) option File.t</code></pre><div class="info"><code class="code">get_sector_location t sector</code> returns <code class="code">Some (t', sector')</code> if the
<code class="code">sector</code> in the virtual disk resides in physical <code class="code">sector'</code> in
the vhd <code class="code">t'</code> (where <code class="code">t'</code> may be any vhd on the path from <code class="code">t</code> to the
root of the tree. If no sector is present, this returns <code class="code">None</code>.</div>
<pre class="odoccode"><span class="VALread_sector"><span class="keyword">val</span> read_sector</span> : <code class="type">File.fd <a href="http://mirage.github.io/vhd-format/#Vhd.Vhd.t" class="ocaml_internal">Vhd.t</a> -&gt; int64 -&gt; <a href="http://mirage.github.io/cstruct/#Cstruct.t">Cstruct.t</a> option File.t</code></pre><div class="info"><code class="code">read_sector t sector</code> returns <code class="code">Some data</code> where <code class="code">data</code> is the byte
data stored at <code class="code">sector</code> in the virtual disk, if any such data exists.
If no data is stored at <code class="code">sector</code>, this returns <code class="code">None</code></div>
<pre class="odoccode"><span class="VALwrite_sector"><span class="keyword">val</span> write_sector</span> : <code class="type">File.fd <a href="http://mirage.github.io/vhd-format/#Vhd.Vhd.t" class="ocaml_internal">Vhd.t</a> -&gt; int64 -&gt; <a href="http://mirage.github.io/cstruct/#Cstruct.t">Cstruct.t</a> -&gt; unit File.t</code></pre><div class="info"><code class="code">write_sector t sector data</code> writes <code class="code">data</code> at <code class="code">sector</code> in <code class="code">t</code> and
updates all file metadata to preserve consistency.</div></div></div>
<div class="ocaml_module" name="Raw_IO"><pre class="odoccode"><span class="keyword">module</span> <a href="http://mirage.github.io/vhd-format/#Vhd.Make.Raw_IO" class="ocaml_internal">Raw_IO</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><span class="VALopenfile"><span class="keyword">val</span> openfile</span> : <code class="type">string -&gt; bool -&gt; File.fd <a href="http://mirage.github.io/vhd-format/#Vhd.Raw.t" class="ocaml_internal">Raw.t</a> File.t</code></pre><div class="info"><code class="code">openfile filename</code> opens a raw-format file <code class="code">filename</code></div>
<pre class="odoccode"><span class="VALclose"><span class="keyword">val</span> close</span> : <code class="type">File.fd <a href="http://mirage.github.io/vhd-format/#Vhd.Raw.t" class="ocaml_internal">Raw.t</a> -&gt; unit File.t</code></pre><div class="info"><code class="code">close t</code> frees all resources associated with <code class="code">t</code></div>
<pre class="odoccode"><span class="VALcreate"><span class="keyword">val</span> create</span> : <code class="type">filename:string -&gt; size:int64 -&gt; unit -&gt; File.fd <a href="http://mirage.github.io/vhd-format/#Vhd.Raw.t" class="ocaml_internal">Raw.t</a> File.t</code></pre><div class="info"><code class="code">create ~filename ~size</code> creates an empty raw file with
virtual size <code class="code">size</code> bytes and filename <code class="code">filename</code>.</div></div></div>
<pre class="odoccode"><code><span class="TYPEll"><span class="keyword">type</span> <code class="type">'a </code>ll</span> = </code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTll.Cons"><span class="constructor">Cons</span></span> <span class="keyword">of</span> <code class="type">'a * unit -&gt; 'a <a href="http://mirage.github.io/vhd-format/#Vhd.Make.ll" class="ocaml_internal">ll</a> File.t</code></code></td></tr><tr><td align="left" valign="top"><code><span class="keyword">|</span></code></td><td align="left" valign="top"><code><span class="TYPEELTll.End"><span class="constructor">End</span></span></code></td><td class="typefieldcomment" align="left"><div class="info">a lazy list</div></td></tr></table>
<pre class="odoccode"><span class="VALiter"><span class="keyword">val</span> iter</span> : <code class="type">('a -&gt; unit File.t) -&gt; 'a <a href="http://mirage.github.io/vhd-format/#Vhd.Make.ll" class="ocaml_internal">ll</a> -&gt; unit File.t</code></pre><div class="info"><code class="code">iter f stream</code> applies each element from <code class="code">stream</code> to <code class="code">f</code> in order.</div>
<pre class="odoccode"><span class="VALfold_left"><span class="keyword">val</span> fold_left</span> : <code class="type">('a -&gt; 'b -&gt; 'a File.t) -&gt; 'a -&gt; 'b <a href="http://mirage.github.io/vhd-format/#Vhd.Make.ll" class="ocaml_internal">ll</a> -&gt; 'a File.t</code></pre><div class="info"><code class="code">fold_left f initial stream</code> folds <code class="code">f</code> across all the elements in
the <code class="code">stream</code> with neutral element <code class="code">initial</code></div>
<pre class="odoccode"><code><span class="TYPEstream"><span class="keyword">type</span> <code class="type">'a </code>stream</span> = {</code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstream.elements">elements</span> : <code class="type">'a <a href="http://mirage.github.io/vhd-format/#Element.t">Element.t</a> <a href="http://mirage.github.io/vhd-format/#Vhd.Make.ll" class="ocaml_internal">ll</a></code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTstream.size">size</span> : <code class="type"><a href="http://mirage.github.io/vhd-format/#Vhd.size" class="ocaml_internal">size</a></code>;</code></td></tr><tr><td>}</td></tr></table><div class="info">an image of a disk represented as a stream</div>
<pre class="odoccode"><span class="VALexpand_empty"><span class="keyword">val</span> expand_empty</span> : <code class="type">'a <a href="http://mirage.github.io/vhd-format/#Vhd.Make.stream" class="ocaml_internal">stream</a> -&gt; 'a <a href="http://mirage.github.io/vhd-format/#Vhd.Make.stream" class="ocaml_internal">stream</a> File.t</code></pre><div class="info">replaces 'Empty' elements with explicit writes of zeroes</div>
<pre class="odoccode"><span class="VALexpand_copy"><span class="keyword">val</span> expand_copy</span> : <code class="type">File.fd <a href="http://mirage.github.io/vhd-format/#Vhd.Make.stream" class="ocaml_internal">stream</a> -&gt; File.fd <a href="http://mirage.github.io/vhd-format/#Vhd.Make.stream" class="ocaml_internal">stream</a> File.t</code></pre><div class="info">replaces 'Copy' elements with explicit writes of data</div>
<div class="ocaml_module" name="Vhd_input"><pre class="odoccode"><span class="keyword">module</span> <a href="http://mirage.github.io/vhd-format/#Vhd.Make.Vhd_input" class="ocaml_internal">Vhd_input</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><span class="VALraw"><span class="keyword">val</span> raw</span> : <code class="type">?from:File.fd <a href="http://mirage.github.io/vhd-format/#Vhd.Vhd.t" class="ocaml_internal">Vhd.t</a> -&gt; File.fd <a href="http://mirage.github.io/vhd-format/#Vhd.Vhd.t" class="ocaml_internal">Vhd.t</a> -&gt; File.fd <a href="http://mirage.github.io/vhd-format/#Vhd.Make.stream" class="ocaml_internal">stream</a> File.t</code></pre><div class="info"><code class="code">raw t</code> creates a raw-formatted stream representing the consolidated
data present in the virtual disk <code class="code">t</code>. If <code class="code">from</code> is provided then
the stream will contain the vhd differencing disk needed to transform
<code class="code">from</code> into <code class="code">t</code>.</div>
<pre class="odoccode"><span class="VALvhd"><span class="keyword">val</span> vhd</span> : <code class="type">?from:File.fd <a href="http://mirage.github.io/vhd-format/#Vhd.Vhd.t" class="ocaml_internal">Vhd.t</a> -&gt;
?emit_batmap:bool -&gt; File.fd <a href="http://mirage.github.io/vhd-format/#Vhd.Vhd.t" class="ocaml_internal">Vhd.t</a> -&gt; File.fd <a href="http://mirage.github.io/vhd-format/#Vhd.Make.stream" class="ocaml_internal">stream</a> File.t</code></pre><div class="info"><code class="code">vhd t</code> creates a vhd-formatted stream representing the consolidated
data present in the virtual disk <code class="code">t</code>. If <code class="code">from</code> is provided then
the stream will contain the vhd differencing disk needed to transform
<code class="code">from</code> into <code class="code">t</code>. If ?emit_batmap is set then the resulting vhd will have
the non-standard 'BATmap' metadata included.</div>
<pre class="odoccode"><span class="VALhybrid"><span class="keyword">val</span> hybrid</span> : <code class="type">?from:File.fd <a href="http://mirage.github.io/vhd-format/#Vhd.Vhd.t" class="ocaml_internal">Vhd.t</a> -&gt; File.fd -&gt; File.fd <a href="http://mirage.github.io/vhd-format/#Vhd.Vhd.t" class="ocaml_internal">Vhd.t</a> -&gt; File.fd <a href="http://mirage.github.io/vhd-format/#Vhd.Make.stream" class="ocaml_internal">stream</a> File.t</code></pre><div class="info"><code class="code">hybrid ?from raw vhd</code> creates a raw-formatted stream representing
the consolidated data present in the virtual disk <code class="code">t</code>, in terms of
copies from the virtual disk <code class="code">raw</code>. If <code class="code">from</code> is provided then the
stream will contain only the virtual updates required to transform
<code class="code">from</code> into <code class="code">t</code></div></div></div>
<div class="ocaml_module" name="Raw_input"><pre class="odoccode"><span class="keyword">module</span> <a href="http://mirage.github.io/vhd-format/#Vhd.Make.Raw_input" class="ocaml_internal">Raw_input</a> : <code class="type"><code class="code">sig</code> .. <code class="code">end</code></code></pre><div class="ocaml_summary"/><div class="ocaml_content">
<pre class="odoccode"><span class="VALraw"><span class="keyword">val</span> raw</span> : <code class="type">File.fd <a href="http://mirage.github.io/vhd-format/#Vhd.Raw.t" class="ocaml_internal">Raw.t</a> -&gt; File.fd <a href="http://mirage.github.io/vhd-format/#Vhd.Make.stream" class="ocaml_internal">stream</a> File.t</code></pre>
<pre class="odoccode"><span class="VALvhd"><span class="keyword">val</span> vhd</span> : <code class="type">File.fd <a href="http://mirage.github.io/vhd-format/#Vhd.Raw.t" class="ocaml_internal">Raw.t</a> -&gt; File.fd <a href="http://mirage.github.io/vhd-format/#Vhd.Make.stream" class="ocaml_internal">stream</a> File.t</code></pre></div></div></div></div>
</div></div>