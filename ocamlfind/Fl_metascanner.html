<div class="ocaml_top"><div class="ocaml_summary"><div class="info">Parses META files</div></div>
<div class="ocaml_content"><pre class="odoccode"><span class="TYPEformal_pred"><span class="keyword">type</span> formal_pred</span> = <code class="type">[ `NegPred of string | `Pred of string ]</code></pre>
<pre class="odoccode"><span class="TYPEflavour"><span class="keyword">type</span> flavour</span> = <code class="type">[ `Appendix | `BaseDef ]</code></pre><div class="info"><code class="code">`BaseDef</code> refers to META definitions using the &quot;=&quot; operator,
and <code class="code">`Appendix</code> refers to definitions using the &quot;+=&quot; operator.</div>
<pre class="odoccode"><code><span class="TYPEpkg_definition"><span class="keyword">type</span> pkg_definition</span> = {</code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTpkg_definition.def_var">def_var</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">The name of the defined variable</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTpkg_definition.def_flav">def_flav</span> : <code class="type"><a href="http://mirage.github.io/ocamlfind/#Fl_metascanner.flavour" class="ocaml_internal">flavour</a></code>;</code></td><td class="typefieldcomment" align="left"><div class="info">The flavour of the definition</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTpkg_definition.def_preds">def_preds</span> : <code class="type"><a href="http://mirage.github.io/ocamlfind/#Fl_metascanner.formal_pred" class="ocaml_internal">formal_pred</a> list</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">The formal predicates of the def</div></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTpkg_definition.def_value">def_value</span> : <code class="type">string</code>;</code></td><td class="typefieldcomment" align="left"><div class="info">The value assigned to the variable</div></td></tr><tr><td>}</td></tr></table><div class="info">A <code class="code">pkg_definition</code> is expressed by the syntax
<pre class="code"><code>var(p1,p2,...) = &quot;value&quot;</code></pre> (flavour `BaseDef),
or the syntax
<pre class="code"><code>var(p1,p2,...) += &quot;value&quot;</code></pre> (flavour `Appendix)
in the META file. The list of predicates may be omitted. Predicates
may be negated by using &quot;-&quot;, e.g. &quot;-x&quot;.</div>
<pre class="odoccode"><code><span class="TYPEpkg_expr"><span class="keyword">type</span> pkg_expr</span> = {</code></pre><table class="typetable">
		    <tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTpkg_expr.pkg_defs">pkg_defs</span> : <code class="type"><a href="http://mirage.github.io/ocamlfind/#Fl_metascanner.pkg_definition" class="ocaml_internal">pkg_definition</a> list</code>;</code></td></tr><tr><td align="left" valign="top"><code>  </code></td><td align="left" valign="top"><code><span class="TYPEELTpkg_expr.pkg_children">pkg_children</span> : <code class="type">(string * <a href="http://mirage.github.io/ocamlfind/#Fl_metascanner.pkg_expr" class="ocaml_internal">pkg_expr</a>) list</code>;</code></td></tr><tr><td>}</td></tr></table><div class="info">A value of type <code class="code">pkg_expr</code> denotes the contents of a META file.
The component <code class="code">pkg_defs</code> are the variable definitions.
The component <code class="code">pkg_children</code> contains
the definitions of the subpackages.</div>
<pre class="odoccode"><span class="VALparse"><span class="keyword">val</span> parse</span> : <code class="type">in_channel -&gt; <a href="http://mirage.github.io/ocamlfind/#Fl_metascanner.pkg_expr" class="ocaml_internal">pkg_expr</a></code></pre><div class="info"><code class="code">parse ch:</code>
scans and parses the file connected with channel <code class="code">ch</code>. The file must
have a syntax compatible with the META format. The return value
contains the found definitions for the package and all subpackages.<p><code class="code">exception Stream.Error of string:</code> is
raised on syntax errors. The string explains the error.</p></div>
<pre class="odoccode"><span class="VALparse2"><span class="keyword">val</span> parse2</span> : <code class="type">in_channel -&gt; <a href="http://mirage.github.io/ocamlfind/#Fl_metascanner.pkg_expr" class="ocaml_internal">pkg_expr</a></code></pre>
<pre class="odoccode"><span class="VALparse2_lexing"><span class="keyword">val</span> parse2_lexing</span> : <code class="type">Lexing.lexbuf -&gt; <a href="http://mirage.github.io/ocamlfind/#Fl_metascanner.pkg_expr" class="ocaml_internal">pkg_expr</a></code></pre>
<pre class="odoccode"><span class="VALparse_lexing"><span class="keyword">val</span> parse_lexing</span> : <code class="type">Lexing.lexbuf -&gt; <a href="http://mirage.github.io/ocamlfind/#Fl_metascanner.pkg_expr" class="ocaml_internal">pkg_expr</a></code></pre>
<pre class="odoccode"><span class="VALprint"><span class="keyword">val</span> print</span> : <code class="type">out_channel -&gt; <a href="http://mirage.github.io/ocamlfind/#Fl_metascanner.pkg_expr" class="ocaml_internal">pkg_expr</a> -&gt; unit</code></pre><div class="info"><code class="code">print ch expr</code>:
Outputs the package expression to a channel.</div>
<pre class="odoccode"><span class="VALlookup"><span class="keyword">val</span> lookup</span> : <code class="type">string -&gt; string list -&gt; <a href="http://mirage.github.io/ocamlfind/#Fl_metascanner.pkg_definition" class="ocaml_internal">pkg_definition</a> list -&gt; string</code></pre><div class="info"><code class="code">lookup variable_name predicate_list def</code>:<p>Returns the value of <code class="code">variable_name</code> in <code class="code">def</code> under the assumption
that the predicates in <code class="code">predicate_list</code> hold, but no other predicates.</p><p>The rules are as follows: In the step (A), only the <code class="code">`BaseDef</code>
definitions are considered. The first base definition is determined where
all predicates are satisfied and that has the longest predicate list.
In the step (B) only the <code class="code">`Appendix</code> definitions are considered.
All definitions are determined where all predicates are satisfied.
The final result is the concatenation of the single result of (A)
and all results of (B) (in the order they are defined). A space
character is inserted between two concatenated strings.</p><p>When step (A) does not find any matching definition, the exception
<code class="code">Not_found</code> is raised.</p></div>
<pre class="odoccode"><span class="VALpredicate_exists"><span class="keyword">val</span> predicate_exists</span> : <code class="type">string -&gt; <a href="http://mirage.github.io/ocamlfind/#Fl_metascanner.pkg_definition" class="ocaml_internal">pkg_definition</a> list -&gt; bool</code></pre><div class="info"><code class="code">predicate_exists variable_name def</code>:<p>Whether <code class="code">variable_name</code> is explicitly mentioned in <code class="code">def</code>.</p></div>
</div></div>