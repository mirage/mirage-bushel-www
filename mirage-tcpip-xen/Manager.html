<div class="ocaml_top"><div class="ocaml_summary"><div class="info">Manage network interfaces.</div></div>
<div class="ocaml_content"><pre class="odoccode"><span class="TYPEconfig"><span class="keyword">type</span> config</span> = <code class="type">[ `DHCP | `IPv4 of <a href="http://mirage.github.io/ipaddr/#Ipaddr.V4.t">Ipaddr.V4.t</a> * <a href="http://mirage.github.io/ipaddr/#Ipaddr.V4.t">Ipaddr.V4.t</a> * <a href="http://mirage.github.io/ipaddr/#Ipaddr.V4.t">Ipaddr.V4.t</a> list ]</code></pre><div class="info">Type representing an IPv4 configuration for an interface.</div>
<pre class="odoccode"><span class="TYPEid"><span class="keyword">type</span> id</span> = <code class="type"><a href="http://mirage.github.io/mirage-net-xen/#Netif.id">Netif.id</a></code></pre><div class="info">Textual id identifying a network interface, typically &quot;tap0&quot; on
UNIX and &quot;0&quot; on Xen.</div>
<pre class="odoccode"><span class="TYPEinterface"><span class="keyword">type</span> interface</span></pre><div class="info">Type representing a network interface, including facilities to
send data (Ethernet frames, IP packets, ICMP, UDP, TCP, ...)
through it.</div>
<pre class="odoccode"><span class="TYPEt"><span class="keyword">type</span> t</span></pre><div class="info">Type of a manager.</div>
<pre class="odoccode"><span class="TYPEcallback"><span class="keyword">type</span> callback</span> = <code class="type"><a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.t" class="ocaml_internal">t</a> -&gt; <a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.interface" class="ocaml_internal">interface</a> -&gt; <a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.id" class="ocaml_internal">id</a> -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info">Type of the callback function provided at manager creation
time.</div>
<div class="info">Accesors for components of the interface type</div>
<pre class="odoccode"><span class="VALget_id"><span class="keyword">val</span> get_id</span> : <code class="type"><a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.interface" class="ocaml_internal">interface</a> -&gt; <a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.id" class="ocaml_internal">id</a></code></pre>
<pre class="odoccode"><span class="VALget_ethif"><span class="keyword">val</span> get_ethif</span> : <code class="type"><a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.interface" class="ocaml_internal">interface</a> -&gt; <a href="http://mirage.github.io/mirage-tcpip-xen/#Ethif.t">Ethif.t</a></code></pre>
<pre class="odoccode"><span class="VALget_ipv4"><span class="keyword">val</span> get_ipv4</span> : <code class="type"><a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.interface" class="ocaml_internal">interface</a> -&gt; <a href="http://mirage.github.io/mirage-tcpip-xen/#Ipv4.t">Ipv4.t</a></code></pre>
<pre class="odoccode"><span class="VALget_icmp"><span class="keyword">val</span> get_icmp</span> : <code class="type"><a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.interface" class="ocaml_internal">interface</a> -&gt; <a href="http://mirage.github.io/mirage-tcpip-xen/#Icmp.t">Icmp.t</a></code></pre>
<pre class="odoccode"><span class="VALget_udp"><span class="keyword">val</span> get_udp</span> : <code class="type"><a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.interface" class="ocaml_internal">interface</a> -&gt; <a href="http://mirage.github.io/mirage-tcpip-xen/#Udp.t">Udp.t</a></code></pre>
<pre class="odoccode"><span class="VALget_tcp"><span class="keyword">val</span> get_tcp</span> : <code class="type"><a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.interface" class="ocaml_internal">interface</a> -&gt; <a href="http://mirage.github.io/mirage-tcpip-xen/#Pcb.t">Tcp.Pcb.t</a></code></pre>
<pre class="odoccode"><span class="VALcreate"><span class="keyword">val</span> create</span> : <code class="type"><a href="http://mirage.github.io/mirage-net-xen/#Netif.t">Netif.t</a> list -&gt; <a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.callback" class="ocaml_internal">callback</a> -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info"><code class="code">create callback</code> will create a manager that will use
<code class="code">OS.Netif.create</code> to watch for network interfaces, create a value
of type interface for each of those devices and call <code class="code">callback</code> of
each of them. The return value is a cancellable thread that will
free all interface values when cancelled.</div>
<pre class="odoccode"><span class="VALconfigure"><span class="keyword">val</span> configure</span> : <code class="type"><a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.interface" class="ocaml_internal">interface</a> -&gt; <a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.config" class="ocaml_internal">config</a> -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info"><code class="code">configure intf cfg</code> applies <code class="code">cfg</code> to <code class="code">intf</code>. After this step,
depending on the configuration (DHCP or static address), <code class="code">intf</code>
will either perform a DHCP discovery or assign itself a specified
address, and will be able to receive and send packets at the
resulting address.</div>
<pre class="odoccode"><span class="VALset_promiscuous"><span class="keyword">val</span> set_promiscuous</span> : <code class="type"><a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.t" class="ocaml_internal">t</a> -&gt; <a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.id" class="ocaml_internal">id</a> -&gt; (<a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.id" class="ocaml_internal">id</a> -&gt; <a href="http://mirage.github.io/mirage-tcpip-xen/#Ethif.packet">Ethif.packet</a> -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a>) -&gt; unit</code></pre><div class="info"><code class="code">set_promiscuous mgr id f</code> will install <code class="code">f</code> as the promiscuous
callback for <code class="code">id</code> if it exists, or raise <code class="code">Not_found</code>
otherwise. See the documentation of module <code class="code">Ethif</code> for more
information about registering a callback for the promiscuous
mode.</div>
<pre class="odoccode"><span class="VALinject_packet"><span class="keyword">val</span> inject_packet</span> : <code class="type"><a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.t" class="ocaml_internal">t</a> -&gt; <a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.id" class="ocaml_internal">id</a> -&gt; <a href="http://mirage.github.io/cstruct/#Cstruct.t">Cstruct.t</a> -&gt; unit <a href="http://mirage.github.io/lwt/#Lwt.t">Lwt.t</a></code></pre><div class="info"><code class="code">inject_packet mgr id frame</code> will write <code class="code">frame</code> into <code class="code">id</code>'s
buffer, causing <code class="code">frame</code> to be emitted on the network.</div>
<pre class="odoccode"><span class="VALtcpv4_of_addr"><span class="keyword">val</span> tcpv4_of_addr</span> : <code class="type"><a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.t" class="ocaml_internal">t</a> -&gt; <a href="http://mirage.github.io/ipaddr/#Ipaddr.V4.t">Ipaddr.V4.t</a> option -&gt; <a href="http://mirage.github.io/mirage-tcpip-xen/#Pcb.t">Tcp.Pcb.t</a> list</code></pre><div class="info"><code class="code">tcpv4_of_addr mgr ip</code> returns all the TCP threads that operate on
<code class="code">ip</code>.</div>
<pre class="odoccode"><span class="VALudpv4_of_addr"><span class="keyword">val</span> udpv4_of_addr</span> : <code class="type"><a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.t" class="ocaml_internal">t</a> -&gt; <a href="http://mirage.github.io/ipaddr/#Ipaddr.V4.t">Ipaddr.V4.t</a> option -&gt; <a href="http://mirage.github.io/mirage-tcpip-xen/#Udp.t">Udp.t</a> list</code></pre><div class="info">Like <code class="code">tcpv4_of_addr</code> returns UDP threads.</div>
<pre class="odoccode"><span class="VALtcpv4_of_dst_addr"><span class="keyword">val</span> tcpv4_of_dst_addr</span> : <code class="type"><a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.t" class="ocaml_internal">t</a> -&gt; <a href="http://mirage.github.io/ipaddr/#Ipaddr.V4.t">Ipaddr.V4.t</a> -&gt; <a href="http://mirage.github.io/mirage-tcpip-xen/#Pcb.t">Tcp.Pcb.t</a></code></pre><div class="info"><code class="code">tcpv4_of_dst_addr mgr ip</code> returns a TCP threads able to talk to
remote address <code class="code">ip</code>.</div>
<pre class="odoccode"><span class="VALget_intf_mac"><span class="keyword">val</span> get_intf_mac</span> : <code class="type"><a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.t" class="ocaml_internal">t</a> -&gt; <a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.id" class="ocaml_internal">id</a> -&gt; <a href="http://mirage.github.io/ipaddr/#Macaddr.t">Macaddr.t</a></code></pre><div class="info"><code class="code">get_intf_mac mgr id</code> returns the MAC address of interface <code class="code">id</code>.</div>
<pre class="odoccode"><span class="VALget_intf_ipv4addr"><span class="keyword">val</span> get_intf_ipv4addr</span> : <code class="type"><a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.t" class="ocaml_internal">t</a> -&gt; <a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.id" class="ocaml_internal">id</a> -&gt; <a href="http://mirage.github.io/ipaddr/#Ipaddr.V4.t">Ipaddr.V4.t</a></code></pre><div class="info"><code class="code">get_intf_ipv4addr mgr id</code> returns the IPv4 address of interface
<code class="code">id</code> if it exists, or raise <code class="code">Not_found</code> otherwise.</div>
<pre class="odoccode"><span class="VALget_intfs"><span class="keyword">val</span> get_intfs</span> : <code class="type"><a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.t" class="ocaml_internal">t</a> -&gt; (<a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.id" class="ocaml_internal">id</a> * <a href="http://mirage.github.io/mirage-tcpip-xen/#Manager.interface" class="ocaml_internal">interface</a>) list</code></pre>
</div></div>